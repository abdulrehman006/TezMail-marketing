"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([["3015"],{3733(e,t,a){a.d(t,{GV:()=>c,JT:()=>v,Ni:()=>d,d2:()=>r,e:()=>m,oq:()=>i,q3:()=>n,qD:()=>p,vW:()=>u,wj:()=>o});var l=a(85020);let{t:s}=a(46831).Ru.global,i=e=>l.K.get("/contact/group/list",{params:e}),r=()=>l.K.get("/contact/group/all"),n=e=>l.K.get("/contact/group/info",{params:e}),o=e=>l.K.post("/contact/group/create",e,{fetchOptions:{loading:s("contacts.group.loading.createGroup"),successMessage:!0}}),u=e=>l.K.post("/contact/group/update",e,{fetchOptions:{loading:s("contacts.group.loading.updateGroup"),successMessage:!0}}),d=e=>l.K.post("/contact/group/delete",e,{fetchOptions:{loading:s("contacts.group.loading.deleteGroup"),successMessage:!0}}),c=e=>l.K.post("/contact/group/tag_contact_count",e),p=e=>l.K.post("/contact/group/export",e,{responseType:"blob",fetchOptions:{loading:s("contacts.group.loading.exportGroup"),successMessage:!0}}),m=e=>l.K.post("/contact/group/update",e,{fetchOptions:{loading:s("contacts.group.loading.saveSettings"),successMessage:!0}}),v=e=>l.K.post("/contact/group/update_unsubscribe",e,{fetchOptions:{loading:s("contacts.group.loading.saveSettings"),successMessage:!0}})},22392(e,t,a){a.d(t,{$5:()=>o,Es:()=>_,KY:()=>g,Kr:()=>d,PV:()=>v,TA:()=>i,aV:()=>r,lZ:()=>m,nz:()=>b,p9:()=>c,pC:()=>f,rN:()=>k,tP:()=>n,xZ:()=>p,yT:()=>h,yu:()=>u});var l=a(85020);let{t:s}=a(46831).Ay.global,i=e=>l.K.get("/domains/list",{params:e}),r=()=>l.K.get("/domains/all"),n=()=>l.K.post("/multi_ip_domain/apply"),o=e=>l.K.post("/domains/create",e,{fetchOptions:{loading:s("domain.api.loading.creating"),successMessage:!0}}),u=e=>l.K.post("/domains/update",e,{fetchOptions:{loading:s("domain.api.loading.updating"),successMessage:!0}}),d=e=>l.K.post("/domains/delete",e,{fetchOptions:{loading:s("domain.api.loading.deleting"),successMessage:!0}}),c=e=>l.K.post("/domains/set_ssl",e,{fetchOptions:{loading:s("domain.api.loading.settingSSL"),successMessage:!0}}),p=e=>l.K.get("/domains/get_ssl",{params:e}),m=e=>l.K.post("/domains/fresh_dns_records",e,{fetchOptions:{loading:s("domain.api.loading.refreshingDns"),successMessage:!0}}),v=e=>l.K.post("/ssl/apply_cert",e,{fetchOptions:{loading:s("domain.api.loading.applyingCert"),successMessage:!0}}),g=e=>l.K.post("/domains/set_default_domain",e,{fetchOptions:{loading:s("domain.api.loading.settingDefault"),successMessage:!0}}),b=e=>l.K.post("/askai/project/create",e,{fetchOptions:{loading:s("domain.api.loading.settingBrandInfo"),successMessage:!0}}),k=e=>l.K.post("/multi_ip_domain/test",e,{fetchOptions:{loading:s("domain.api.loading.testingConnection"),successMessage:!0}}),f=()=>l.K.post("/askai/supplier/status"),_=e=>l.K.post("/domain_blocklist/check",e,{fetchOptions:{loading:s("domain.api.loading.detecting"),successMessage:!0}}),h=e=>l.K.get("/domain_blocklist/logs",{params:e})},28674(e,t,a){a.d(t,{DZ:()=>n,Ez:()=>o,Gt:()=>u,LN:()=>d,P5:()=>i,Se:()=>c,dz:()=>r});var l=a(85020);let{t:s}=a(46831).Ay.global,i=e=>l.K.get("/mailbox/list",{params:e}),r=e=>l.K.post("/mailbox/create",e,{fetchOptions:{loading:s("mailbox.api.loading.creating"),successMessage:!0}}),n=e=>l.K.post("/mailbox/batch_create",e,{fetchOptions:{loading:s("mailbox.api.loading.creating"),successMessage:!0}}),o=e=>l.K.post("/mailbox/update",e,{fetchOptions:{loading:s("mailbox.api.loading.updating"),successMessage:!0}}),u=e=>l.K.post("/mailbox/delete",e,{fetchOptions:{loading:s("mailbox.api.loading.deleting"),successMessage:!0}}),d=e=>l.K.post("/mailbox/export",e,{responseType:"blob",fetchOptions:{loading:s("mailbox.api.loading.exporting"),successMessage:!0}}),c=e=>l.K.post("/mailbox/import",e,{fetchOptions:{loading:s("mailbox.api.loading.importing"),successMessage:!0}})},24270(e,t,a){a.d(t,{FI:()=>v,GA:()=>p,MX:()=>o,VP:()=>m,XZ:()=>u,lC:()=>d,oc:()=>b,p0:()=>g,pS:()=>n,u3:()=>r,vq:()=>c});var l=a(46831),s=a(85020);let{t:i}=l.Ru.global;function r(e){return s.K.get("/batch_mail/task/list",{params:e})}function n(e){return s.K.get("/batch_mail/task/stat_chart",{params:e})}function o(e){return s.K.get("/batch_mail/task/find",{params:e})}function u(e){return s.K.post("/batch_mail/task/create",e,{fetchOptions:{loading:i("market.task.loading.creating"),successMessage:!0}})}function d(e){return s.K.post("/batch_mail/task/update",e,{fetchOptions:{loading:i("market.task.loading.updating"),successMessage:!0}})}function c(e){return s.K.post("/batch_mail/task/delete",e,{fetchOptions:{loading:i("market.task.loading.deleting"),successMessage:!0}})}function p(e){return s.K.post("/batch_mail/task/pause",e,{fetchOptions:{loading:i("market.task.loading.pausing"),successMessage:!0}})}function m(e){return s.K.post("/batch_mail/task/resume",e,{fetchOptions:{loading:i("market.task.loading.resuming"),successMessage:!0}})}function v(e){return s.K.post("/batch_mail/task/send_test",e,{fetchOptions:{loading:i("market.task.loading.sendingTest"),successMessage:!0}})}function g(e){return s.K.get("/batch_mail/tracking/mail_provider",{params:e})}function b(e){return s.K.get("/batch_mail/tracking/logs",{params:e})}},44301(e,t,a){a.d(t,{CI:()=>c,I7:()=>p,UT:()=>n,mn:()=>u,n5:()=>r,tY:()=>o,ub:()=>d});var l=a(46831),s=a(85020);let{t:i}=l.Ay.global;function r(e){return s.K.get("/email_template/list",{params:e})}function n(){return s.K.get("/email_template/all")}function o(e){return s.K.get("/email_template/get",{params:e})}function u(e){return s.K.post("/email_template/create",e,{fetchOptions:{loading:i("market.template.loading.creating"),successMessage:!0}})}function d(e){return s.K.post("/email_template/update",e,{fetchOptions:{loading:i("market.template.loading.updating"),successMessage:!0}})}function c(e){return s.K.post("/email_template/copy",e,{fetchOptions:{loading:i("market.template.loading.copying"),successMessage:!0}})}function p(e){return s.K.post("/email_template/delete",e,{fetchOptions:{loading:i("market.template.loading.deleting"),successMessage:!0}})}},63114(e,t,a){a.d(t,{Gw:()=>u,Hh:()=>d,Tn:()=>i,VZ:()=>n,_R:()=>o,cl:()=>r});var l=a(85020);let{t:s}=a(46831).Ru.global,i=e=>l.K.get("/tags/list",{params:e}),r=e=>l.K.get("/tags/all",{params:e}),n=e=>l.K.post("/tags/create",e,{fetchOptions:{loading:s("contacts.tags.loading.creating"),successMessage:!0}}),o=e=>l.K.post("/tags/delete",e,{fetchOptions:{loading:s("contacts.tags.loading.deleting"),successMessage:!0}}),u=e=>l.K.post("/tags/update",e,{fetchOptions:{loading:s("contacts.tags.loading.updating"),successMessage:!0}}),d=e=>l.K.post("/tags/batch_contacts",e,{fetchOptions:{loading:s("contacts.tags.loading.bulkSetting"),successMessage:!0}})},45935(e,t,a){a.d(t,{A:()=>i});var l=a(90290);let s=["height","srcdoc"],i=(0,l.pM)({__name:"index",props:{value:{type:String,default:""},height:{type:[String,Number],default:"100%"}},setup:e=>(t,a)=>((0,l.uX)(),(0,l.CE)("iframe",{width:"100%",height:e.height,srcdoc:e.value,style:{border:"none",borderRadius:"4px"}},null,8,s))})},11128(e,t,a){a.d(t,{A:()=>d});var l=a(95403),s=a(90290),i=a(12532),r=a(22392),n=a(28674);let o={class:"flex-1"},u={class:"flex-1 ml-10px"},d=(0,s.pM)({__name:"FromSelect",props:{value:{},valueModifiers:{},name:{},nameModifiers:{},domain:{},domainModifiers:{}},emits:["update:value","update:name","update:domain"],setup(e){let t=(0,s.fn)(e,"value"),a=(0,s.fn)(e,"name"),d=(0,s.KR)(!1),c=(0,s.fn)(e,"domain"),p=(0,s.KR)([]),m=(0,s.KR)([]),v=(0,s.EW)(()=>m.value.filter(e=>e.domain===c.value).map(e=>({label:e.username,value:e.username,data:e}))),g=async()=>{await (0,s.dY)(),v.value.length>0?(t.value=v.value[0].value,b(t.value,v.value[0])):(t.value=null,a.value="")},b=(e,t)=>{let{data:l}=t;(0,i.Gv)(l)&&(a.value=l.full_name)},k=async()=>{let e=await (0,r.aV)();if((0,i.cy)(e)&&(p.value=e.map(e=>({label:e.domain,value:e.domain})),!c.value&&e.length>0)){let t=e.filter(e=>e.default);t.length>0?c.value=t[0].domain:c.value=e[0].domain}},f=async()=>{let e=await (0,n.P5)({page:1,page_size:1e3,domain:""});(0,i.Gv)(e)&&(m.value=e.list)};return(async()=>{try{d.value=!0,await f(),await k(),await (0,s.dY)(),null===t.value?g():t.value&&(c.value=t.value.split("@")[1])}finally{d.value=!1}})(),(e,a)=>{let i=l.A;return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",o,[(0,s.bF)(i,{value:c.value,"onUpdate:value":[a[0]||(a[0]=e=>c.value=e),g],loading:(0,s.R1)(d),options:(0,s.R1)(p)},null,8,["value","loading","options"])]),(0,s.Lk)("div",u,[(0,s.bF)(i,{value:t.value,"onUpdate:value":[a[1]||(a[1]=e=>t.value=e),b],loading:(0,s.R1)(d),options:(0,s.R1)(v),filterable:!0},null,8,["value","loading","options"])])],64)}}})},26562(e,t,a){a.d(t,{A:()=>n});var l=a(95403),s=a(90290),i=a(12532),r=a(44301);let n=(0,s.pM)({__name:"TemplateSelect",props:{value:{},valueModifiers:{},content:{},contentModifiers:{}},emits:(0,s.zz)(["listReady"],["update:value","update:content"]),setup(e,t){let{emit:a}=t,n=(0,s.fn)(e,"value"),o=(0,s.fn)(e,"content"),u=(0,s.KR)(!1),d=(0,s.KR)([]),c=(e,t)=>{let{data:a}=t;(0,i.Gv)(a)&&(o.value=a.html_content)};return(async()=>{try{u.value=!0;let e=await (0,r.UT)();if((0,i.cy)(e)){if(d.value=e.map(e=>({label:e.temp_name,value:e.id,data:e})),null===n.value)n.value=e[0].id,o.value=e[0].html_content;else{let t=e.find(e=>e.id===n.value);t&&(o.value=t.html_content)}a("listReady",e)}}finally{u.value=!1}})(),(e,t)=>{let a=l.A;return(0,s.uX)(),(0,s.Wv)(a,{value:n.value,"onUpdate:value":[t[0]||(t[0]=e=>n.value=e),c],loading:(0,s.R1)(u),filterable:!0,options:(0,s.R1)(d)},null,8,["value","loading","options"])}}})},43285(e,t,a){a.r(t),a.d(t,{default:()=>eg});var l=a(45935),s=a(13665),i=a(51625),r=a(23141),n=a(2770),o=a(5887),u=a(20349),d=a(45679),c=a(27546),p=a(91664),m=a(10932),v=a(95403),g=a(45449),b=a(60801),k=a(29252),f=a(4374),_=a(90290),h=a(40528),R=a(97786),y=a(12532),x=a(24270),K=a(11128),w=a(60045),F=a(3733),A=a(60319),O=a(66401),M=a(96833),C=a(3401);let j={class:"pt-12px"},L={class:"flex-1"},$={class:"mt-8px text-12px text-desc"},E=`email,attributes
example1@example.com,"{""age"": ""13"", ""Gender"": ""XXX""}"
example2@example.com,"{""age"": ""45"", ""city"": ""XXX""}"
`,T=(0,_.pM)({__name:"CreateGroup",setup(e){let{t}=(0,C.s9)(),a=(0,_.rk)("formRef"),l=(0,_.Kh)({create_type:2,name:"",file_data:"",file_type:"",description:"",status:1,double_optin:0}),i={name:{required:!0,message:t("market.task.createGroup.validation.groupNameRequired"),trigger:["blur","input"]}},r=[{label:"Confirmed",value:1},{label:"Unconfirmed",value:0}],n=e=>{let t=new FileReader;t.onload=t=>{var a;l.file_type=e.name.substring(e.name.lastIndexOf(".")+1),l.file_data=null==(a=t.target)?void 0:a.result},e.file&&t.readAsText(e.file)},o=async()=>{await (0,M.PE)({file_path:"./template/example_recipients.csv"})},u=async()=>{var e;if(await (null==(e=a.value)?void 0:e.validate()),(0,O.A)(l.file_data))return y.QB.error(t("contacts.subscribers.import.validation.fileRequired")),Promise.reject()},[d,p]=(0,w.h)({onChangeState:e=>{e&&(l.name="",l.file_data="",l.file_type="")},onConfirm:async()=>{await u(),await (0,F.wj)((0,_.ux)(l));let e=p.getState();null==e||e.refresh()}});return(e,u)=>{let p=g.A,m=b.Ay,k=v.A,f=A.A,h=c.Ay,R=s.A;return(0,_.uX)(),(0,_.Wv)((0,_.R1)(d),{title:(0,_.R1)(t)("market.task.createGroup.title"),width:"500"},{default:(0,_.k6)(()=>[(0,_.Lk)("div",j,[(0,_.bF)(R,{ref_key:"formRef",ref:a,model:(0,_.R1)(l),rules:i},{default:(0,_.k6)(()=>[(0,_.bF)(m,{label:(0,_.R1)(t)("market.task.createGroup.groupName"),path:"name"},{default:(0,_.k6)(()=>[(0,_.bF)(p,{value:(0,_.R1)(l).name,"onUpdate:value":u[0]||(u[0]=e=>(0,_.R1)(l).name=e),placeholder:(0,_.R1)(t)("market.task.createGroup.groupNamePlaceholder")},null,8,["value","placeholder"])]),_:1},8,["label"]),(0,_.bF)(m,{label:"Status"},{default:(0,_.k6)(()=>[(0,_.bF)(k,{value:(0,_.R1)(l).status,"onUpdate:value":u[1]||(u[1]=e=>(0,_.R1)(l).status=e),options:r},null,8,["value"])]),_:1}),(0,_.bF)(m,{label:(0,_.R1)(t)("market.task.createGroup.email"),path:"file_data"},{default:(0,_.k6)(()=>[(0,_.Lk)("div",L,[(0,_.bF)(f,{"is-upload":!1,accept:["csv"],onChange:n}),(0,_.Lk)("div",$,[(0,_.eW)((0,_.v_)(e.$t("contacts.subscribers.import.fileTypeHint"))+" ",1),(0,_.bF)(h,{text:"",type:"primary",onClick:o},{default:(0,_.k6)(()=>[(0,_.eW)((0,_.v_)(e.$t("common.actions.download")),1)]),_:1})])])]),_:1},8,["label"]),(0,_.bF)(m,{label:e.$t("contacts.subscribers.import.exampleCsvLabel")},{default:(0,_.k6)(()=>[(0,_.Lk)("pre",{class:"csv-example"},(0,_.v_)(E))]),_:1},8,["label"])]),_:1},8,["model"])])]),_:1},8,["title"])}}});var U=a(64901);let W=(0,U.default)(T,[["__scopeId","data-v-aad7589f"]]),G={class:"flex-1"},S={class:"ml-12px"},B=(0,_.pM)({__name:"GroupSelect",props:(0,_.zz)({disabled:{type:Boolean,default:!1}},{value:{default:()=>0},valueModifiers:{},label:{default:()=>""},labelModifiers:{}}),emits:["update:value","update:label"],setup(e){let t=(0,_.fn)(e,"value"),a=(0,_.fn)(e,"label"),l=(0,_.KR)(!1),s=(0,_.KR)([]),[i,r]=(0,w.h)({component:W,state:{refresh:()=>{u()}}}),n=()=>{r.open()},o=async(e,t)=>{a.value=`${t.label}`},u=async()=>{try{l.value=!0;let e=await (0,F.d2)();(0,y.Gv)(e)&&(s.value=e.list.map(e=>({label:e.name,value:e.id})))}finally{l.value=!1}};return u(),(a,r)=>{let u=v.A,d=c.Ay;return(0,_.uX)(),(0,_.CE)(_.FK,null,[(0,_.Lk)("div",G,[(0,_.bF)(u,{value:t.value,"onUpdate:value":[r[0]||(r[0]=e=>t.value=e),o],options:(0,_.R1)(s),filterable:!0,disabled:e.disabled,"max-tag-count":"responsive",loading:(0,_.R1)(l),placeholder:a.$t("market.task.edit.recipientsPlaceholder")},null,8,["value","options","disabled","loading","placeholder"])]),(0,_.Lk)("div",S,[(0,_.bF)(d,{text:"",type:"primary",onClick:n},{default:(0,_.k6)(()=>[(0,_.eW)((0,_.v_)(a.$t("common.actions.create")),1)]),_:1})]),(0,_.bF)((0,_.R1)(i))],64)}}});var P=a(63114),z=a(75220);let q={class:"ml-12px"},N=(0,_.pM)({__name:"TagSelect",props:(0,_.zz)({groupId:{type:Number,default:null},disabled:{type:Boolean,default:!1}},{value:{default:()=>[]},valueModifiers:{}}),emits:["update:value"],setup(e){let t=(0,_.fn)(e,"value"),a=(0,z.rd)(),l=(0,_.KR)([]),s=(0,_.EW)(()=>l.value.filter(t=>t.group_id===e.groupId).map(e=>({value:e.id,label:e.name}))),i=async()=>{let e=await (0,P.cl)({});(0,y.Gv)(e)&&(l.value=e.list)},r=()=>{a.push("/contacts/tags")};return(0,_.wB)(()=>e.groupId,()=>{t.value=[]}),i(),(a,l)=>{let i=v.A,n=c.Ay;return(0,_.uX)(),(0,_.CE)(_.FK,null,[(0,_.bF)(i,{value:t.value,"onUpdate:value":l[0]||(l[0]=e=>t.value=e),options:(0,_.R1)(s),disabled:e.disabled,multiple:!0,filterable:!0,"max-tag-count":"responsive"},null,8,["value","options","disabled"]),(0,_.Lk)("div",q,[(0,_.bF)(n,{text:"",type:"primary",onClick:r},{default:(0,_.k6)(()=>[(0,_.eW)((0,_.v_)(a.$t("common.actions.create")),1)]),_:1})])],64)}}});var X=a(26562);let I={class:"task-edit-container"},D={class:"flex flex-col flex-1 p-24px overflow-auto"},V={class:"flex-1"},Q={class:"flex items-center"},Y={class:"flex-1"},Z={class:"ml-12px text-desc"},H={class:"w-60px"},J={class:"flex-1 mr-10px"},ee={class:"task-preview"},et={class:"preview-header"},ea={class:"preview-header-item"},el={class:"preview-label"},es={class:"preview-value"},ei={class:"preview-header-item"},er={class:"preview-label"},en={class:"preview-value"},eo={class:"preview-header-item"},eu={class:"preview-label"},ed={class:"preview-value"},ec={class:"preview-content"},ep={key:1,class:"empty-preview"},em={class:"action-buttons"},ev=(0,_.pM)({__name:"edit",setup(e){let{t}=(0,C.s9)(),a=(0,z.lq)(),w=(0,z.rd)(),A=(0,h.on)(),O=(0,_.rk)("formRef"),M=(0,_.rk)("formContentRef"),{height:j}=(0,R.SSU)(M),L=(0,_.KR)(!1),$=(0,_.KR)(0),E=(0,_.Kh)({addresser:null,full_name:"",subject:"",group_id:null,template_id:null,is_record:1,unsubscribe:1,warmup:0,threads:0,start_time:null,remark:"",tag_ids:[],tag_logic:"OR"}),T=[{label:"OR",value:"OR"},{label:"AND",value:"AND"},{label:"NOT",value:"NOT"}],U={full_name:{trigger:["blur","input"],validator:()=>""!==E.full_name||Error(t("market.task.edit.validation.displayNameRequired"))},subject:{trigger:["blur","input"],validator:()=>""!==E.subject||Error(t("market.task.edit.validation.subjectRequired"))},group_ids:{trigger:"change",validator:()=>!!E.group_id||Error(t("market.task.edit.validation.recipientsRequired"))},template_id:{trigger:"change",validator:()=>null!==E.template_id||Error(t("market.task.edit.validation.templateRequired"))},start_time:{validator:()=>1!==P.value||null!==E.start_time||Error(t("market.task.edit.validation.sendTimeRequired"))}},W=(0,_.KR)(""),G=(0,_.KR)(0),S=(0,_.KR)(0),P=(0,_.KR)(0),q=(0,_.KR)(""),ev=(0,_.KR)(""),eg=()=>{w.push("/template")},eb=e=>{0===e?E.threads=0:E.threads=5},ek=()=>{0===P.value&&(E.start_time=null)},ef=async()=>{q.value?E.subject?E.template_id?await (0,x.FI)({addresser:E.addresser||"",subject:E.subject,recipient:q.value,template_id:E.template_id||0}):y.QB.error(t("market.task.edit.validation.templateRequired")):y.QB.error(t("market.task.edit.validation.subjectRequired")):y.QB.error(t("market.task.edit.validation.testEmailRequired"))},e_=()=>{E.subject||E.group_id?(0,y.lJ)({title:t("market.task.edit.discard.title"),content:t("market.task.edit.discard.content"),onConfirm:()=>{w.go(-1)}}):w.go(-1)},eh=async()=>{if(!E.group_id){G.value=0;return}let e=await (0,F.GV)({group_id:E.group_id||0,tag_ids:E.tag_ids,tag_logic:E.tag_logic});(0,y.Gv)(e)&&(G.value=e.total)},eR=()=>{let e=E.start_time;return(0===P.value||null===e)&&(e=Date.now()),{track_open:1,track_click:1,addresser:E.addresser||"",full_name:E.full_name,subject:E.subject,group_id:E.group_id||0,template_id:E.template_id||0,is_record:E.is_record,unsubscribe:E.unsubscribe,warmup:E.warmup,threads:E.threads,start_time:e/1e3,remark:E.remark,tag_ids:E.tag_ids,tag_logic:E.tag_logic}},ey=async()=>{var e;await (null==(e=O.value)?void 0:e.validate()),L.value?await (0,x.lC)({task_id:$.value,...eR()}):await (0,x.XZ)(eR()),w.push("/market/task")};function ex(e){if(a.query.chat_id){let t=e.find(e=>e.chat_id==a.query.chat_id);t&&(E.template_id=t.id,E.subject=A.temp_subject,ev.value=t.html_content)}}return(async()=>{let{task_id:e,type:t}=a.query;if("edit"===t?($.value=Number(e),L.value=!0):($.value=0,L.value=!1),!e)return;let l=await (0,x.MX)({id:Number(e)});(0,y.Gv)(l)&&(E.addresser=l.addresser,E.full_name=l.full_name,E.subject=l.subject,E.group_id=l.group_id,E.template_id=l.template_id,E.is_record=l.is_record,E.unsubscribe=l.unsubscribe,E.threads=l.threads,S.value=+(0!==l.threads),E.remark=l.remark,E.tag_logic=l.tag_logic,(0,_.dY)(()=>{E.tag_ids=l.tag_ids}))})(),(e,a)=>{let h=(0,_.g2)("router-link"),R=f.A,y=k.Ay,x=b.Ay,w=g.A,F=(0,_.g2)("i18n-t"),A=v.A,C=m.Ay,$=p.A,z=c.Ay,eR=d.A,eK=u.A,ew=o.A,eF=n.A,eA=r.Ay,eO=i.A,eM=s.A,eC=l.A;return(0,_.uX)(),(0,_.CE)("div",I,[(0,_.Lk)("div",D,[(0,_.bF)(y,{class:"mb-20px"},{default:(0,_.k6)(()=>[(0,_.bF)(R,null,{default:(0,_.k6)(()=>[(0,_.bF)(h,{to:"/market/task"},{default:(0,_.k6)(()=>[(0,_.eW)((0,_.v_)(e.$t("market.task.title")),1)]),_:1})]),_:1}),(0,_.bF)(R,null,{default:(0,_.k6)(()=>[(0,_.eW)((0,_.v_)((0,_.R1)(L)?e.$t("market.task.edit.editTitle"):e.$t("market.task.edit.addTitle")),1)]),_:1})]),_:1}),(0,_.Lk)("div",{class:"task-edit-box",style:(0,_.Tr)({minHeight:(0,_.R1)(j)+"px"})},[(0,_.bF)(eM,{ref_key:"formRef",ref:O,class:"task-edit-form",model:(0,_.R1)(E),rules:U},{default:(0,_.k6)(()=>[(0,_.Lk)("div",{ref_key:"formContentRef",ref:M},[(0,_.bF)(eA,{class:"mb-24px"},{default:(0,_.k6)(()=>[(0,_.bF)(x,{label:e.$t("market.task.edit.from")},{default:(0,_.k6)(()=>[(0,_.bF)(K.A,{value:(0,_.R1)(E).addresser,"onUpdate:value":a[0]||(a[0]=e=>(0,_.R1)(E).addresser=e),name:(0,_.R1)(E).full_name,"onUpdate:name":a[1]||(a[1]=e=>(0,_.R1)(E).full_name=e)},null,8,["value","name"])]),_:1},8,["label"]),(0,_.bF)(x,{label:e.$t("market.task.edit.displayName"),path:"full_name"},{default:(0,_.k6)(()=>[(0,_.bF)(w,{value:(0,_.R1)(E).full_name,"onUpdate:value":a[2]||(a[2]=e=>(0,_.R1)(E).full_name=e),placeholder:e.$t("market.task.edit.displayNamePlaceholder")},null,8,["value","placeholder"])]),_:1},8,["label"]),(0,_.bF)(x,{label:e.$t("market.task.edit.subject"),path:"subject"},{default:(0,_.k6)(()=>[(0,_.bF)(w,{value:(0,_.R1)(E).subject,"onUpdate:value":a[3]||(a[3]=e=>(0,_.R1)(E).subject=e),placeholder:e.$t("market.task.edit.subjectPlaceholder")},null,8,["value","placeholder"])]),_:1},8,["label"]),(0,_.bF)(x,{label:e.$t("market.task.edit.recipients"),type:"group_ids"},{default:(0,_.k6)(()=>[(0,_.Lk)("div",V,[(0,_.Lk)("div",Q,[(0,_.bF)(B,{value:(0,_.R1)(E).group_id,"onUpdate:value":a[4]||(a[4]=e=>(0,_.R1)(E).group_id=e),label:(0,_.R1)(W),"onUpdate:label":a[5]||(a[5]=e=>(0,_.i9)(W)?W.value=e:null),disabled:(0,_.R1)(L)},null,8,["value","label","disabled"])]),(0,_.bF)(F,{class:"mt-8px",tag:"div",scope:"global",keypath:"market.task.edit.recipientsCount"},{count:(0,_.k6)(()=>[(0,_.Lk)("b",null,(0,_.v_)((0,_.R1)(G)),1)]),_:1})])]),_:1},8,["label"]),(0,_.bF)($,{cols:24,"x-gap":24},{default:(0,_.k6)(()=>[(0,_.bF)(C,{span:6,label:e.$t("market.task.edit.tagLogic"),path:"tag_logic"},{default:(0,_.k6)(()=>[(0,_.bF)(A,{value:(0,_.R1)(E).tag_logic,"onUpdate:value":[a[6]||(a[6]=e=>(0,_.R1)(E).tag_logic=e),a[7]||(a[7]=()=>eh())],options:T,disabled:(0,_.R1)(L)},null,8,["value","disabled"])]),_:1},8,["label"]),(0,_.bF)(C,{span:18,label:e.$t("market.task.edit.tags"),path:"tag_ids"},{default:(0,_.k6)(()=>[(0,_.bF)(N,{value:(0,_.R1)(E).tag_ids,"onUpdate:value":[a[8]||(a[8]=e=>(0,_.R1)(E).tag_ids=e),a[9]||(a[9]=()=>eh())],"group-id":(0,_.R1)(E).group_id,disabled:(0,_.R1)(L)},null,8,["value","group-id","disabled"])]),_:1},8,["label"])]),_:1}),(0,_.bF)(x,{label:e.$t("market.task.edit.template"),path:"template_id"},{default:(0,_.k6)(()=>[(0,_.Lk)("div",Y,[(0,_.bF)(X.A,{value:(0,_.R1)(E).template_id,"onUpdate:value":a[10]||(a[10]=e=>(0,_.R1)(E).template_id=e),content:(0,_.R1)(ev),"onUpdate:content":a[11]||(a[11]=e=>(0,_.i9)(ev)?ev.value=e:null),onListReady:ex},null,8,["value","content"])]),(0,_.bF)(z,{text:"",type:"primary",class:"ml-12px",onClick:eg},{default:(0,_.k6)(()=>[(0,_.eW)((0,_.v_)((0,_.R1)(t)("common.actions.create")),1)]),_:1})]),_:1},8,["label"]),(0,_.Q3)("",!0),(0,_.bF)(x,{label:(0,_.R1)(t)("market.task.edit.ipWarmup")},{default:(0,_.k6)(()=>[(0,_.bF)(eR,{value:(0,_.R1)(E).warmup,"onUpdate:value":a[13]||(a[13]=e=>(0,_.R1)(E).warmup=e),"checked-value":1,"unchecked-value":0},null,8,["value"]),(0,_.Lk)("span",Z,(0,_.v_)((0,_.R1)(t)("market.task.edit.ipWarmupTip")),1)]),_:1},8,["label"]),(0,_.bF)(x,{label:e.$t("market.task.edit.unsubscribeLink")},{default:(0,_.k6)(()=>[(0,_.bF)(eR,{value:(0,_.R1)(E).unsubscribe,"onUpdate:value":a[14]||(a[14]=e=>(0,_.R1)(E).unsubscribe=e),"checked-value":1,"unchecked-value":0},null,8,["value"])]),_:1},8,["label"]),(0,_.bF)(x,{label:e.$t("market.task.edit.threads"),"show-feedback":!1},{default:(0,_.k6)(()=>[(0,_.bF)(ew,{value:(0,_.R1)(S),"onUpdate:value":[a[15]||(a[15]=e=>(0,_.i9)(S)?S.value=e:null),eb]},{default:(0,_.k6)(()=>[(0,_.bF)(eK,{value:0},{default:(0,_.k6)(()=>[(0,_.eW)((0,_.v_)(e.$t("market.task.edit.threadsAuto")),1)]),_:1}),(0,_.bF)(eK,{value:1},{default:(0,_.k6)(()=>[(0,_.eW)((0,_.v_)(e.$t("market.task.edit.threadsCustom")),1)]),_:1})]),_:1},8,["value"]),(0,_.bo)((0,_.Lk)("div",H,[(0,_.bF)(eF,{value:(0,_.R1)(E).threads,"onUpdate:value":a[16]||(a[16]=e=>(0,_.R1)(E).threads=e),min:1,max:100,"show-button":!1},null,8,["value"])],512),[[_.aG,1===(0,_.R1)(S)]])]),_:1},8,["label"])]),_:1}),(0,_.bF)(eA,null,{default:(0,_.k6)(()=>[(0,_.bF)(x,{label:(0,_.R1)(t)("market.task.edit.sendTime"),path:"start_time"},{default:(0,_.k6)(()=>[(0,_.bF)(ew,{value:(0,_.R1)(P),"onUpdate:value":[a[18]||(a[18]=e=>(0,_.i9)(P)?P.value=e:null),ek],class:"flex items-center"},{default:(0,_.k6)(()=>[(0,_.bF)(eK,{value:0},{default:(0,_.k6)(()=>[(0,_.eW)((0,_.v_)((0,_.R1)(t)("market.task.edit.sendTimeNow")),1)]),_:1}),(0,_.bF)(eK,{class:"items-center",value:1}),(0,_.bF)(eO,{value:(0,_.R1)(E).start_time,"onUpdate:value":a[17]||(a[17]=e=>(0,_.R1)(E).start_time=e),class:"ml-8px",type:"datetime",disabled:0===(0,_.R1)(P)},null,8,["value","disabled"])]),_:1},8,["value"])]),_:1},8,["label"]),(0,_.bF)(x,{label:e.$t("market.task.edit.remark")},{default:(0,_.k6)(()=>[(0,_.bF)(w,{value:(0,_.R1)(E).remark,"onUpdate:value":a[19]||(a[19]=e=>(0,_.R1)(E).remark=e),placeholder:e.$t("market.task.edit.remarkPlaceholder")},null,8,["value","placeholder"])]),_:1},8,["label"]),(0,_.bF)(x,{label:e.$t("market.task.edit.testEmail"),"show-feedback":!1},{default:(0,_.k6)(()=>[(0,_.Lk)("div",J,[(0,_.bF)(w,{value:(0,_.R1)(q),"onUpdate:value":a[20]||(a[20]=e=>(0,_.i9)(q)?q.value=e:null),placeholder:e.$t("market.task.edit.testEmailPlaceholder")},null,8,["value","placeholder"])]),(0,_.bF)(z,{onClick:ef},{default:(0,_.k6)(()=>[(0,_.eW)((0,_.v_)(e.$t("market.task.edit.sendTest")),1)]),_:1})]),_:1},8,["label"])]),_:1})],512)]),_:1},8,["model"]),(0,_.Lk)("div",ee,[(0,_.bF)(eA,{class:"h-full","content-style":{display:"flex",flexDirection:"column",height:"100%"}},{default:(0,_.k6)(()=>[(0,_.Lk)("div",et,[(0,_.Lk)("div",ea,[(0,_.Lk)("div",el,(0,_.v_)((0,_.R1)(t)("market.task.edit.from"))+":",1),(0,_.Lk)("div",es,(0,_.v_)((0,_.R1)(E).addresser),1)]),(0,_.Lk)("div",ei,[(0,_.Lk)("div",er,(0,_.v_)((0,_.R1)(t)("market.task.edit.to"))+":",1),(0,_.Lk)("div",en,(0,_.v_)((0,_.R1)(W)||"--"),1)]),(0,_.Lk)("div",eo,[(0,_.Lk)("div",eu,(0,_.v_)((0,_.R1)(t)("market.task.edit.subject"))+":",1),(0,_.Lk)("div",ed,(0,_.v_)((0,_.R1)(E).subject||"--"),1)])]),(0,_.Lk)("div",ec,[(0,_.R1)(ev)?((0,_.uX)(),(0,_.Wv)(eC,{key:0,value:(0,_.R1)(ev)},null,8,["value"])):((0,_.uX)(),(0,_.CE)("div",ep,(0,_.v_)((0,_.R1)(t)("market.task.edit.preview.empty")),1))])]),_:1})])],4)]),(0,_.Lk)("div",em,[(0,_.bF)(z,{type:"primary",onClick:ey},{default:(0,_.k6)(()=>[(0,_.eW)((0,_.v_)(e.$t("common.actions.confirm")),1)]),_:1}),(0,_.bF)(z,{class:"ml-16px",secondary:"",onClick:e_},{default:(0,_.k6)(()=>[(0,_.eW)((0,_.v_)(e.$t("common.actions.back")),1)]),_:1})])])}}}),eg=(0,U.default)(ev,[["__scopeId","data-v-58378725"]])},11051(e,t,a){a.d(t,{A:()=>r});var l=a(90290),s=a(61853),i=a(63979);function r(e={},t){let a=(0,l.Kh)({ctrl:!1,command:!1,win:!1,shift:!1,tab:!1}),{keydown:n,keyup:o}=e,u=e=>{switch(e.key){case"Control":a.ctrl=!0;break;case"Meta":a.command=!0,a.win=!0;break;case"Shift":a.shift=!0;break;case"Tab":a.tab=!0}void 0!==n&&Object.keys(n).forEach(t=>{if(t!==e.key)return;let a=n[t];if("function"==typeof a)a(e);else{let{stop:t=!1,prevent:l=!1}=a;t&&e.stopPropagation(),l&&e.preventDefault(),a.handler(e)}})},d=e=>{switch(e.key){case"Control":a.ctrl=!1;break;case"Meta":a.command=!1,a.win=!1;break;case"Shift":a.shift=!1;break;case"Tab":a.tab=!1}void 0!==o&&Object.keys(o).forEach(t=>{if(t!==e.key)return;let a=o[t];if("function"==typeof a)a(e);else{let{stop:t=!1,prevent:l=!1}=a;t&&e.stopPropagation(),l&&e.preventDefault(),a.handler(e)}})},c=()=>{(void 0===t||t.value)&&((0,s.on)("keydown",document,u),(0,s.on)("keyup",document,d)),void 0!==t&&(0,l.wB)(t,e=>{e?((0,s.on)("keydown",document,u),(0,s.on)("keyup",document,d)):((0,s.A)("keydown",document,u),(0,s.A)("keyup",document,d))})};return(0,i.a)()?((0,l.KC)(c),(0,l.xo)(()=>{(void 0===t||t.value)&&((0,s.A)("keydown",document,u),(0,s.A)("keyup",document,d))})):c(),(0,l.tB)(a)}},66401(e,t,a){a.d(t,{A:()=>p});var l=a(84065),s=a(57672),i=a(20018),r=a(92049),n=a(38446),o=a(55254),u=a(97271),d=a(79415),c=Object.prototype.hasOwnProperty;let p=function(e){if(null==e)return!0;if((0,n.A)(e)&&((0,r.A)(e)||"string"==typeof e||"function"==typeof e.splice||(0,o.A)(e)||(0,d.A)(e)||(0,i.A)(e)))return!e.length;var t=(0,s.A)(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if((0,u.A)(e))return!(0,l.A)(e).length;for(var a in e)if(c.call(e,a))return!1;return!0}},29252(e,t,a){a.d(t,{s7:()=>c,Ay:()=>m});var l=a(90290),s=a(49359),i=a(50922),r=a(4019),n=a(29794),o=a(23766),u=a(75454);let d=(0,u.cB)("breadcrumb",`
 white-space: nowrap;
 cursor: default;
 line-height: var(--n-item-line-height);
`,[(0,u.c)("ul",`
 list-style: none;
 padding: 0;
 margin: 0;
 `),(0,u.c)("a",`
 color: inherit;
 text-decoration: inherit;
 `),(0,u.cB)("breadcrumb-item",`
 font-size: var(--n-font-size);
 transition: color .3s var(--n-bezier);
 display: inline-flex;
 align-items: center;
 `,[(0,u.cB)("icon",`
 font-size: 18px;
 vertical-align: -.2em;
 transition: color .3s var(--n-bezier);
 color: var(--n-item-text-color);
 `),(0,u.c)("&:not(:last-child)",[(0,u.cM)("clickable",[(0,u.cE)("link",`
 cursor: pointer;
 `,[(0,u.c)("&:hover",`
 background-color: var(--n-item-color-hover);
 `),(0,u.c)("&:active",`
 background-color: var(--n-item-color-pressed); 
 `)])])]),(0,u.cE)("link",`
 padding: 4px;
 border-radius: var(--n-item-border-radius);
 transition:
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
 color: var(--n-item-text-color);
 position: relative;
 `,[(0,u.c)("&:hover",`
 color: var(--n-item-text-color-hover);
 `,[(0,u.cB)("icon",`
 color: var(--n-item-text-color-hover);
 `)]),(0,u.c)("&:active",`
 color: var(--n-item-text-color-pressed);
 `,[(0,u.cB)("icon",`
 color: var(--n-item-text-color-pressed);
 `)])]),(0,u.cE)("separator",`
 margin: 0 8px;
 color: var(--n-separator-color);
 transition: color .3s var(--n-bezier);
 user-select: none;
 -webkit-user-select: none;
 `),(0,u.c)("&:last-child",[(0,u.cE)("link",`
 font-weight: var(--n-font-weight-active);
 cursor: unset;
 color: var(--n-item-text-color-active);
 `,[(0,u.cB)("icon",`
 color: var(--n-item-text-color-active);
 `)]),(0,u.cE)("separator",`
 display: none;
 `)])])]),c=(0,n.D)("n-breadcrumb"),p=Object.assign(Object.assign({},s.A.props),{separator:{type:String,default:"/"}}),m=(0,l.pM)({name:"Breadcrumb",props:p,setup(e){let{mergedClsPrefixRef:t,inlineThemeDisabled:a}=(0,i.Ay)(e),n=(0,s.A)("Breadcrumb","-breadcrumb",d,o.A,e,t);(0,l.Gt)(c,{separatorRef:(0,l.lW)(e,"separator"),mergedClsPrefixRef:t});let u=(0,l.EW)(()=>{let{common:{cubicBezierEaseInOut:e},self:{separatorColor:t,itemTextColor:a,itemTextColorHover:l,itemTextColorPressed:s,itemTextColorActive:i,fontSize:r,fontWeightActive:o,itemBorderRadius:u,itemColorHover:d,itemColorPressed:c,itemLineHeight:p}}=n.value;return{"--n-font-size":r,"--n-bezier":e,"--n-item-text-color":a,"--n-item-text-color-hover":l,"--n-item-text-color-pressed":s,"--n-item-text-color-active":i,"--n-separator-color":t,"--n-item-color-hover":d,"--n-item-color-pressed":c,"--n-item-border-radius":u,"--n-font-weight-active":o,"--n-item-line-height":p}}),p=a?(0,r.R)("breadcrumb",void 0,u,e):void 0;return{mergedClsPrefix:t,cssVars:a?void 0:u,themeClass:null==p?void 0:p.themeClass,onRender:null==p?void 0:p.onRender}},render(){var e;return null==(e=this.onRender)||e.call(this),(0,l.h)("nav",{class:[`${this.mergedClsPrefix}-breadcrumb`,this.themeClass],style:this.cssVars,"aria-label":"Breadcrumb"},(0,l.h)("ul",null,this.$slots))}})},4374(e,t,a){a.d(t,{A:()=>n});var l=a(90290),s=a(49521),i=a(91900),r=a(29252);let n=(0,l.pM)({name:"BreadcrumbItem",props:{separator:String,href:String,clickable:{type:Boolean,default:!0},onClick:Function},slots:Object,setup(e,{slots:t}){let a=(0,l.WQ)(r.s7,null);if(!a)return()=>null;let{separatorRef:n,mergedClsPrefixRef:o}=a,u=function(e=i.B?window:null){let t=()=>{let{hash:t,host:a,hostname:l,href:s,origin:i,pathname:r,port:n,protocol:o,search:u}=(null==e?void 0:e.location)||{};return{hash:t,host:a,hostname:l,href:s,origin:i,pathname:r,port:n,protocol:o,search:u}},a=(0,l.KR)(t()),s=()=>{a.value=t()};return(0,l.sV)(()=>{e&&(e.addEventListener("popstate",s),e.addEventListener("hashchange",s))}),(0,l.hi)(()=>{e&&(e.removeEventListener("popstate",s),e.removeEventListener("hashchange",s))}),a}(),d=(0,l.EW)(()=>e.href?"a":"span"),c=(0,l.EW)(()=>u.value.href===e.href?"location":null);return()=>{let{value:a}=o;return(0,l.h)("li",{class:[`${a}-breadcrumb-item`,e.clickable&&`${a}-breadcrumb-item--clickable`]},(0,l.h)(d.value,{class:`${a}-breadcrumb-item__link`,"aria-current":c.value,href:e.href,onClick:e.onClick},t),(0,l.h)("span",{class:`${a}-breadcrumb-item__separator`,"aria-hidden":"true"},(0,s.Nj)(t.separator,()=>{var t;return[null!=(t=e.separator)?t:n.value]})))}}})},48920(e,t,a){a.d(t,{A:()=>u});var l=a(90290),s=a(49359),i=a(50922),r=a(18672),n=a(78565);let o=Object.assign(Object.assign({},r.vY),s.A.props),u=(0,l.pM)({name:"Tooltip",props:o,slots:Object,__popover__:!0,setup(e){let{mergedClsPrefixRef:t}=(0,i.Ay)(e),a=(0,s.A)("Tooltip","-tooltip",void 0,n.A,e,t),r=(0,l.KR)(null);return Object.assign(Object.assign({},{syncPosition(){r.value.syncPosition()},setShow(e){r.value.setShow(e)}}),{popoverRef:r,mergedTheme:a,popoverThemeOverrides:(0,l.EW)(()=>a.value.self)})},render(){let{mergedTheme:e,internalExtraClass:t}=this;return(0,l.h)(r.Ay,Object.assign(Object.assign({},this.$props),{theme:e.peers.Popover,themeOverrides:e.peerOverrides.Popover,builtinThemeOverrides:this.popoverThemeOverrides,internalExtraClass:t.concat("tooltip"),ref:"popoverRef"}),this.$slots)}})}}]);