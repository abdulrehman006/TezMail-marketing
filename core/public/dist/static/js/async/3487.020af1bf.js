"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([["3487"],{60045(e,t,a){a.d(t,{h:()=>i});var n=a(90290),l=a(98179);let s=Symbol("MODAL_INJECT"),i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{state:t={},component:a,onCancel:i,onConfirm:r}=e,o=(0,n.Kh)({});return a?[(0,n.pM)({setup(l,i){let{attrs:r,slots:u}=i;return(0,n.Gt)(s,{state:t,options:e,extendApi:e=>{Object.setPrototypeOf(o,e)},setState:e=>{Object.assign(t,e)}}),()=>(0,n.h)(a,{...l,...r},u)}}),o]:[(0,n.pM)({setup(t,a){let{attrs:u,slots:c}=a,d=(0,n.WQ)(s),v=(0,n.KR)(!1);return o.open=()=>{var t;v.value=!0,null==(t=e.onChangeState)||t.call(e,v.value)},o.close=()=>{v.value=!1},o.setState=t=>{var a;null==d||d.setState(t),null==(a=e.onChangeState)||a.call(e,v.value)},o.getState=()=>(null==d?void 0:d.state)??{},null==d||d.extendApi(o),()=>(0,n.bF)(l.A,(0,n.v6)({show:v.value},t,u,{onCancel:i,onConfirm:r,"onUpdate:show":e=>{v.value=e??!1}}),c)}}),o]}},66009(e,t,a){a.d(t,{Gc:()=>o,PE:()=>r,Ug:()=>i,hQ:()=>s,rF:()=>u});var n=a(85020);let{t:l}=a(46831).Ay.global,s=()=>n.K.get("/settings/get_version"),i=()=>n.K.get("/docker_api/list"),r=e=>n.K.post("/docker_api/restart",e,{fetchOptions:{loading:l("settings.api.loading.restarting"),successMessage:!0}}),o=e=>n.K.post("/services/get_config",e),u=e=>n.K.post("/services/save_config",e,{fetchOptions:{loading:l("settings.api.loading.saving"),successMessage:!0}})},22041(e,t,a){a.d(t,{A:()=>r});var n=a(76628),l=a(90290),s=a(5487);let i=(0,l.pM)({__name:"index",props:(0,l.zz)({language:{type:String,default:"html"},theme:{type:String,default:"vs-dark"},options:{type:Object,default:()=>({})}},{value:{default:""},valueModifiers:{}}),emits:(0,l.zz)(["save"],["update:value"]),setup(e,t){let{expose:a,emit:i}=t,r=(0,l.fn)(e,"value"),o=(0,l.KR)(null),u=null,c=(0,l.KR)(!1),d=async()=>{if(o.value&&!u)try{c.value=!0;let t=await s.A.init();(u=t.editor.create(o.value,{value:r.value,language:e.language,theme:e.theme,minimap:{enabled:!1},automaticLayout:!0,scrollBeyondLastLine:!1,fontSize:14,tabSize:2,wordWrap:"on",...e.options})).onDidChangeModelContent(()=>{r.value=(null==u?void 0:u.getValue())||""}),u.addCommand(t.KeyMod.CtrlCmd|t.KeyCode.KeyS,function(){i("save")})}finally{c.value=!1}};return(0,l.wB)(()=>r.value,e=>{u&&e!==u.getValue()&&u.setValue(e)}),(0,l.sV)(()=>{d()}),(0,l.xo)(()=>{u&&(u.dispose(),u=null)}),a({getEditor:()=>u}),(e,t)=>{let a=n.A;return(0,l.uX)(),(0,l.Wv)(a,{class:"h-full",show:(0,l.R1)(c)},{default:(0,l.k6)(()=>[(0,l.Lk)("div",{ref_key:"containerRef",ref:o,class:"monaco-editor-container"},null,512)]),_:1},8,["show"])}}}),r=(0,a(64901).default)(i,[["__scopeId","data-v-87023034"]])},14146(e,t,a){a.r(t),a.d(t,{default:()=>S});var n=a(90290),l=a(77625),s=a(23254),i=a(85684),r=a(27546),o=a(12532),u=a(60045),c=a(66009),d=a(22041),v=a(3401);let p={class:"mb-16px"},g={class:"text-desc"},f={class:"h-560px"},m=(0,n.pM)({__name:"ServiceConfig",setup(e){let{t}=(0,v.s9)(),a=(0,n.KR)(""),l=(0,n.KR)(""),s=(0,n.EW)(()=>t("settings.service.editTitle",{name:a.value})),i=async()=>{let e=await (0,c.Gc)({service_type:a.value});(0,o.Gv)(e)&&(l.value=e.content)},r=async()=>{await (0,c.rF)({service_type:a.value,content:l.value})},[m,y]=(0,u.h)({onChangeState:async e=>{if(e){let{row:e}=y.getState();a.value=e.Names[0].trim(),i()}else a.value="",l.value=""},onConfirm:async()=>{await r()}});return(e,a)=>{let i=d.A;return(0,n.uX)(),(0,n.Wv)((0,n.R1)(m),{title:(0,n.R1)(s),width:800},{default:(0,n.k6)(()=>[(0,n.Lk)("div",p,[(0,n.Lk)("div",g,(0,n.v_)((0,n.R1)(t)("settings.service.tips")),1)]),(0,n.Lk)("div",f,[(0,n.bF)(i,{value:(0,n.R1)(l),"onUpdate:value":a[0]||(a[0]=e=>(0,n.i9)(l)?l.value=e:null),onSave:r},null,8,["value"])])]),_:1},8,["title"])}}});var y=a(75220);function h(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!(0,n.vv)(e)}let b=(0,n.pM)({__name:"SettingsService",setup(e){let{t}=(0,v.s9)(),a=(0,y.rd)(),d=(0,n.KR)(!1),p=(0,n.KR)([]),g=(0,n.KR)([{key:"Names",title:t("settings.service.columns.name"),render:e=>e.Names[0]},{key:"State",title:t("settings.service.columns.status"),render:e=>(0,n.bF)(s.Ay,{size:"small",bordered:!1,type:"running"===e.State?"success":"error"},{default:()=>["running"===e.State?t("settings.service.status.running"):t("settings.service.status.stopped")]})},{key:"action",title:t("common.columns.actions"),align:"right",render:e=>{let l,s;return(0,n.bF)(i.A,{inline:!0},{default:()=>{let i;return[e.Names[0].includes("rspamd")?(0,n.bF)(r.Ay,{type:"primary",text:!0,onClick:()=>{a.push("/settings/rspamd")}},{default:()=>[(0,n.eW)("GUI")]}):null,(0,n.bF)(r.Ay,{type:"primary",text:!0,disabled:!((i=e.Names[0]).includes("rspamd")||i.includes("postfix")||i.includes("dovecot")),onClick:()=>{S(e)}},h(l=t("common.actions.config"))?l:{default:()=>[l]}),(0,n.bF)(r.Ay,{type:"primary",text:!0,onClick:()=>{f(e)}},h(s=t("common.actions.restart"))?s:{default:()=>[s]})]}})}}]),f=async e=>{(0,o.lJ)({title:t("settings.service.restart.title"),content:t("settings.service.restart.confirm",{name:e.Names[0]}),confirmText:t("common.actions.confirm"),onConfirm:async()=>{await (0,c.PE)({container_id:e.Id}),_()}})},[b,x]=(0,u.h)({component:m}),S=e=>{x.setState({row:e}),x.open()},_=async()=>{try{d.value=!0;let e=await (0,c.Ug)();(0,o.cy)(e)&&(p.value=e)}finally{d.value=!1}};return _(),(e,t)=>{let a=l.A;return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(a,{loading:(0,n.R1)(d),data:(0,n.R1)(p),columns:(0,n.R1)(g)},null,8,["loading","data","columns"]),(0,n.bF)((0,n.R1)(b))])}}}),x=(0,a(64901).default)(b,[["__scopeId","data-v-3359d924"]]),S=(0,n.pM)({__name:"index",setup:e=>(e,t)=>((0,n.uX)(),(0,n.Wv)(x))})},85684(e,t,a){a.d(t,{A:()=>g});var n=a(44041),l=a(90290),s=a(49359),i=a(50922),r=a(79623),o=a(75454),u=a(69598),c=a(14957),d=a(20649);let v={name:"Flex",self:function(){return d.A}},p=Object.assign(Object.assign({},s.A.props),{align:String,justify:{type:String,default:"start"},inline:Boolean,vertical:Boolean,reverse:Boolean,size:{type:[String,Number,Array],default:"medium"},wrap:{type:Boolean,default:!0}}),g=(0,l.pM)({name:"Flex",props:p,setup(e){let{mergedClsPrefixRef:t,mergedRtlRef:a}=(0,i.Ay)(e),u=(0,s.A)("Flex","-flex",void 0,v,e,t);return{rtlEnabled:(0,r.I)("Flex",a,t),mergedClsPrefix:t,margin:(0,l.EW)(()=>{let{size:t}=e;if(Array.isArray(t))return{horizontal:t[0],vertical:t[1]};if("number"==typeof t)return{horizontal:t,vertical:t};let{self:{[(0,o.cF)("gap",t)]:a}}=u.value,{row:l,col:s}=(0,n.t8)(a);return{horizontal:(0,n.eV)(s),vertical:(0,n.eV)(l)}})}},render(){let{vertical:e,reverse:t,align:a,inline:n,justify:s,margin:i,wrap:r,mergedClsPrefix:o,rtlEnabled:d}=this,v=(0,u.B)((0,c.$)(this),!1);return v.length?(0,l.h)("div",{role:"none",class:[`${o}-flex`,d&&`${o}-flex--rtl`],style:{display:n?"inline-flex":"flex",flexDirection:e&&!t?"column":e&&t?"column-reverse":!e&&t?"row-reverse":"row",justifyContent:s,flexWrap:!r||e?"nowrap":"wrap",alignItems:a,gap:`${i.vertical}px ${i.horizontal}px`}},v):null}})}}]);