"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([["5899"],{23878(e,l,a){a.r(l),a.d(l,{default:()=>ed});var t=a(23141),i=a(90290),s=a(76628),r=a(62408),u=a(60801),o=a(68275),p=a(45449),n=a(45679),d=a(27546),c=a(46835),v=a(58653),m=a(85020),b=a(12532);let k={fetchOptions:{loading:"Loading... Please wait.",successMessage:!0}};async function f(e){let{providerList:l,currentProvider:a}=e;try{let t=await m.K.post("/askai/supplier/list");l.value=t,t.length&&(a.value=t[0],await y(a.value.supplierName,e))}catch(e){console.warn(e)}}async function y(e,l){let{modelList:a,configurationLoading:t}=l;try{t.value=!0,a.value=await m.K.post("/askai/supplier/models",{supplierName:e})}catch(e){console.warn(e)}finally{t.value=!1}}async function _(e){let{addProviderFormData:l,addProviderFormDataRef:a,addProviderRef:t}=e;try{var i;if(!await L(e))return!1;await (null==(i=a.value)?void 0:i.validate()),await m.K.post("/askai/supplier/add_supplier",l.value,k),t.value.close(),await f(e)}catch(e){console.warn(e)}}async function R(e){let{currentProvider:l,addModelFormData:a,addModelFormRef:t,addModelRef:i}=e;try{var s;await (null==(s=t.value)?void 0:s.validate()),await m.K.post("/askai/supplier/add_model",{...a.value,supplierName:l.value.supplierName},k),await y(l.value.supplierName,e),i.value.close()}catch(e){console.warn(e)}}async function g(e){let{currentProvider:l,providerList:a}=e;try{let e=await m.K.post("/askai/supplier/get_supplier_config",{supplierName:l.value.supplierName},k),t=a.value.find(e=>e.supplierName==l.value.supplierName);t&&(t.apiKey=e.apiKey,t.baseUrl=e.baseUrl)}catch(e){console.warn(e)}}async function w(e,l){let{currentProvider:a}=l;try{await m.K.post("/askai/supplier/set_supplier_status",{supplierName:a.value.supplierName,status:e},k),a.value.status=e,y(a.value.supplierName,l)}catch(l){a.value.status=!e,console.warn(l)}}async function h(e){let{currentProvider:l}=e;try{await m.K.post("/askai/supplier/testing",{supplierName:l.value.supplierName,baseUrl:l.value.baseUrl,apiKey:l.value.apiKey},k)}catch(e){console.warn(e)}}async function F(e){let{currentProvider:l}=e;try{await m.K.post("/askai/supplier/set_supplier_config",{supplierName:l.value.supplierName,baseUrl:l.value.baseUrl,apiKey:l.value.apiKey},k),w(!0,e)}catch(e){console.warn(e)}}async function K(e,l,a){let{currentProvider:t}=a;try{await m.K.post("/askai/supplier/set_model_status",{supplierName:t.value.supplierName,modelId:e.modelId,status:l},k)}catch(a){e.status=!l,console.warn(a)}}async function N(e){let{currentProvider:l}=e;(0,b.lJ)({title:"Notice",content:`Are you sure to remove the provider "${l.value.supplierName}"?`,onConfirm:async()=>{try{await m.K.post("/askai/supplier/remove_supplier",{supplierName:l.value.supplierName},k),await f(e)}catch(e){console.warn(e)}}})}async function L(e){let{addProviderFormData:l}=e;try{return await m.K.post("/askai/supplier/testing",l.value),!0}catch(e){return console.warn(e),!1}}async function U(e,l){(0,b.lJ)({title:"Notice",content:`Are you sure to remove the Model "${e.title}"?`,onConfirm:async()=>{try{await m.K.post("/askai/supplier/remove_model",{supplierName:e.supplierName,modelId:e.modelId},k),await y(e.supplierName,l)}catch(e){console.warn(e)}}})}let x={class:"flex justify-end gap-5"},A=(0,i.pM)({__name:"AddProvider",setup(e,l){let{expose:a}=l,t=(0,i.WQ)("modelStore"),{addProviderFormData:s,addProviderFormDataRef:o}=t,n=(0,i.KR)(!1),c={supplierTitle:[{required:!0,message:"supplierTitle is required",trigger:"blur"}],supplierName:[{required:!0,message:"supplierName is required",trigger:"blur"}],baseUrl:[{required:!0,message:"baseUrl is required",trigger:"blur"}],apiKey:[{required:!0,message:"apiKey is required",trigger:"blur"}]};return a({open:function(){n.value=!0},close:function(){n.value=!1}}),(e,l)=>{let a=p.A,m=u.Ay,b=r.A,k=d.Ay,f=v.A;return(0,i.uX)(),(0,i.Wv)(f,{show:(0,i.R1)(n),"onUpdate:show":l[5]||(l[5]=e=>(0,i.i9)(n)?n.value=e:null),preset:"card","close-on-esc":!1,"mask-closable":!1,draggable:"",class:"w-150",title:"Add Provider"},{footer:(0,i.k6)(()=>[(0,i.Lk)("div",x,[(0,i.bF)(k,null,{default:(0,i.k6)(()=>[...l[6]||(l[6]=[(0,i.eW)("Cancel",-1)])]),_:1}),(0,i.bF)(k,{type:"primary",onClick:l[4]||(l[4]=e=>(0,i.R1)(_)((0,i.R1)(t)))},{default:(0,i.k6)(()=>[...l[7]||(l[7]=[(0,i.eW)("Confirm",-1)])]),_:1})])]),default:(0,i.k6)(()=>[(0,i.bF)(b,{ref_key:"addProviderFormDataRef",ref:o,model:(0,i.R1)(s),rules:c},{default:(0,i.k6)(()=>[(0,i.bF)(m,{label:e.$t("settings.aiModel.supplierTitle"),path:"supplierTitle"},{default:(0,i.k6)(()=>[(0,i.bF)(a,{value:(0,i.R1)(s).supplierTitle,"onUpdate:value":l[0]||(l[0]=e=>(0,i.R1)(s).supplierTitle=e)},null,8,["value"])]),_:1},8,["label"]),(0,i.bF)(m,{label:e.$t("settings.aiModel.supplierName"),path:"supplierName"},{default:(0,i.k6)(()=>[(0,i.bF)(a,{value:(0,i.R1)(s).supplierName,"onUpdate:value":l[1]||(l[1]=e=>(0,i.R1)(s).supplierName=e)},null,8,["value"])]),_:1},8,["label"]),(0,i.bF)(m,{label:"BaseURL",path:"baseUrl"},{default:(0,i.k6)(()=>[(0,i.bF)(a,{value:(0,i.R1)(s).baseUrl,"onUpdate:value":l[2]||(l[2]=e=>(0,i.R1)(s).baseUrl=e)},null,8,["value"])]),_:1}),(0,i.bF)(m,{label:"ApiKey",path:"apiKey"},{default:(0,i.k6)(()=>[(0,i.bF)(a,{value:(0,i.R1)(s).apiKey,"onUpdate:value":l[3]||(l[3]=e=>(0,i.R1)(s).apiKey=e)},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show"])}}});var C=a(2770),M=a(95403);let I={class:"flex justify-end gap-5"},$=(0,i.pM)({__name:"AddModel",setup(e,l){let{expose:a}=l,t=(0,i.WQ)("modelStore"),{addModelFormData:s,addModelFormRef:o}=t,n=(0,i.KR)(!1),c=[{label:"llm",value:"llm"},{label:"vision",value:"vision"},{label:"tools",value:"tools"},{label:"text-to-image",value:"text-to-image"}],m=(0,i.EW)(()=>s.value.capability.includes("llm")||s.value.capability.includes("vision")||s.value.capability.includes("tools")?c.map(e=>"text-to-image"===e.value?{...e,disabled:!0}:e):s.value.capability.includes("text-to-image")?c.map(e=>"text-to-image"===e.value?{...e}:{...e,disabled:!0}):c),b={modelId:[{required:!0,message:"modelId is required",trigger:"blur"}],title:[{required:!0,message:"title is required",trigger:"blur"}],capability:[{validator:(e,l)=>!!l.length||Error("capability is required"),trigger:"blur"}],max_tokens:[{validator:(e,l)=>!!l||Error("max_tokens is required"),trigger:"blur"}]};function k(){n.value=!1,s.value.capability=["llm"],s.value.max_tokens=8192,s.value.modelId="",s.value.title=""}return a({open:function(){n.value=!0},close:k}),(e,l)=>{let a=p.A,c=u.Ay,f=M.A,y=C.A,_=r.A,g=d.Ay,w=v.A;return(0,i.uX)(),(0,i.Wv)(w,{show:(0,i.R1)(n),"onUpdate:show":l[5]||(l[5]=e=>(0,i.i9)(n)?n.value=e:null),preset:"card",draggable:"","close-on-esc":!1,"mask-closable":!1,title:"Add Model",class:"w-100"},{footer:(0,i.k6)(()=>[(0,i.Lk)("div",I,[(0,i.bF)(g,{onClick:k},{default:(0,i.k6)(()=>[...l[6]||(l[6]=[(0,i.eW)("Cancel",-1)])]),_:1}),(0,i.bF)(g,{type:"primary",onClick:l[4]||(l[4]=e=>(0,i.R1)(R)((0,i.R1)(t)))},{default:(0,i.k6)(()=>[...l[7]||(l[7]=[(0,i.eW)("Confirm",-1)])]),_:1})])]),default:(0,i.k6)(()=>[(0,i.bF)(_,{ref_key:"addModelFormRef",ref:o,model:(0,i.R1)(s),rules:b},{default:(0,i.k6)(()=>[(0,i.bF)(c,{label:e.$t("settings.aiModel.modelId"),path:"modelId"},{default:(0,i.k6)(()=>[(0,i.bF)(a,{value:(0,i.R1)(s).modelId,"onUpdate:value":l[0]||(l[0]=e=>(0,i.R1)(s).modelId=e)},null,8,["value"])]),_:1},8,["label"]),(0,i.bF)(c,{label:e.$t("settings.aiModel.modelAlias"),path:"title"},{default:(0,i.k6)(()=>[(0,i.bF)(a,{value:(0,i.R1)(s).title,"onUpdate:value":l[1]||(l[1]=e=>(0,i.R1)(s).title=e)},null,8,["value"])]),_:1},8,["label"]),(0,i.bF)(c,{label:e.$t("settings.aiModel.modelFeature"),path:"capability"},{default:(0,i.k6)(()=>[(0,i.bF)(f,{value:(0,i.R1)(s).capability,"onUpdate:value":l[2]||(l[2]=e=>(0,i.R1)(s).capability=e),options:(0,i.R1)(m),multiple:""},null,8,["value","options"])]),_:1},8,["label"]),(0,i.bF)(c,{label:e.$t("settings.aiModel.contentLength"),path:"max_tokens"},{default:(0,i.k6)(()=>[(0,i.bF)(y,{value:(0,i.R1)(s).max_tokens,"onUpdate:value":l[3]||(l[3]=e=>(0,i.R1)(s).max_tokens=e),min:1,class:"w-100%"},null,8,["value"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show"])}}}),W={class:"manager-wrapper"},q={class:"left-provider"},E={class:"provider-list"},T=["onClick"],X={class:"item-icon"},P={key:1,class:"i-ai:big-model w-6.5 h-6.5"},S={class:"tit"},Q={class:"add-privider"},j={class:"right-configuration"},D={class:"top-switch"},J={class:"switch-info"},B={class:"tit"},G={class:"center-api"},O={class:"w-100%"},z={class:"w-100%"},H={class:"text-[var(--color-text-3)] mt-5"},V={class:"bottom-model-list"},Y={class:"header-tit"},Z={class:"tit"},ee={class:"sub-tit"},el={class:"tit"},ea={class:"model-item"},et={class:"model-name"},ei={class:"operation"},es=["onClick"],er=(0,i.pM)({__name:"ModelManager",setup(e){let l=(0,i.WQ)("modelStore"),{providerList:a,modelList:t,currentProvider:v,configurationLoading:m,addProviderRef:b,addModelRef:k}=l;function _(){b.value.open()}function R(){k.value.open()}return f(l),(e,f)=>{let L=c.A,x=d.Ay,C=n.A,M=p.A,I=o.A,er=u.Ay,eu=r.A,eo=s.A;return(0,i.uX)(),(0,i.CE)(i.FK,null,[(0,i.Lk)("div",W,[(0,i.Lk)("div",q,[(0,i.Lk)("div",E,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)((0,i.R1)(a),e=>{var a;return(0,i.uX)(),(0,i.CE)("div",{key:e.supplierName,class:(0,i.C4)(["provider-item",{active:e.supplierName==(null==(a=(0,i.R1)(v))?void 0:a.supplierName)}]),onClick:a=>{v.value=e,y(e.supplierName,l)}},[(0,i.Lk)("div",X,[e.icon?((0,i.uX)(),(0,i.Wv)(L,{key:0,src:e.icon,height:"24",width:"24"},null,8,["src"])):((0,i.uX)(),(0,i.CE)("i",P))]),(0,i.Lk)("span",S,(0,i.v_)(e.supplierTitle[0].toUpperCase()+e.supplierTitle.slice(1)),1),(0,i.Lk)("span",{class:(0,i.C4)(["status",{active:e.status}])},null,2)],10,T)}),128))]),(0,i.Lk)("div",Q,[(0,i.bF)(x,{onClick:_},{icon:(0,i.k6)(()=>[...f[8]||(f[8]=[(0,i.Lk)("i",{class:"i-ic:baseline-add-circle"},null,-1)])]),default:(0,i.k6)(()=>[f[9]||(f[9]=(0,i.eW)(" Add model service provider ",-1))]),_:1})])]),(0,i.bF)(eo,{show:(0,i.R1)(m)},{default:(0,i.k6)(()=>[(0,i.Lk)("div",j,[(0,i.Lk)("div",D,[(0,i.Lk)("div",J,[(0,i.Lk)("span",B,(0,i.v_)((0,i.R1)(v).supplierName?(0,i.R1)(v).supplierName[0].toUpperCase()+(0,i.R1)(v).supplierName.slice(1):""),1),(0,i.bF)(C,{value:(0,i.R1)(v).status,"onUpdate:value":[f[0]||(f[0]=e=>(0,i.R1)(v).status=e),f[1]||(f[1]=e=>(0,i.R1)(w)(e,(0,i.R1)(l)))]},null,8,["value"])]),(0,i.Lk)("i",{class:"i-ri:delete-bin-3-line text-5.5 hover:text-red-5 cursor-pointer",onClick:f[2]||(f[2]=e=>(0,i.R1)(N)((0,i.R1)(l)))})]),(0,i.Lk)("div",G,[(0,i.bF)(eu,{class:"mt-15px"},{default:(0,i.k6)(()=>[(0,i.bF)(er,{label:e.$t("settings.aiModel.aPIKey")},{default:(0,i.k6)(()=>[(0,i.Lk)("div",O,[(0,i.bF)(I,null,{default:(0,i.k6)(()=>[(0,i.bF)(M,{value:(0,i.R1)(v).apiKey,"onUpdate:value":f[3]||(f[3]=e=>(0,i.R1)(v).apiKey=e)},null,8,["value"]),(0,i.bF)(x,{onClick:f[4]||(f[4]=e=>(0,i.R1)(h)((0,i.R1)(l)))},{default:(0,i.k6)(()=>[(0,i.eW)((0,i.v_)(e.$t("settings.aiModel.check")),1)]),_:1})]),_:1}),(0,i.bF)(x,{text:"",type:"info",class:"mt-5px",onClick:f[5]||(f[5]=e=>(0,i.R1)(g)((0,i.R1)(l)))},{default:(0,i.k6)(()=>[(0,i.eW)((0,i.v_)(e.$t("settings.aiModel.getKey")),1)]),_:1})])]),_:1},8,["label"]),(0,i.bF)(er,{label:e.$t("settings.aiModel.apiPath")},{default:(0,i.k6)(()=>[(0,i.Lk)("div",z,[(0,i.bF)(M,{value:(0,i.R1)(v).baseUrl,"onUpdate:value":f[6]||(f[6]=e=>(0,i.R1)(v).baseUrl=e)},null,8,["value"]),(0,i.Lk)("span",H,(0,i.v_)(e.$t("settings.aiModel.example"))+": https://api.deepseek.com/v1",1)])]),_:1},8,["label"])]),_:1}),(0,i.bF)(x,{type:"primary",onClick:f[7]||(f[7]=e=>(0,i.R1)(F)((0,i.R1)(l)))},{default:(0,i.k6)(()=>[(0,i.eW)((0,i.v_)(e.$t("settings.aiModel.saveAPI")),1)]),_:1})]),(0,i.Lk)("div",V,[(0,i.Lk)("div",Y,[(0,i.Lk)("div",null,[(0,i.Lk)("span",Z,(0,i.v_)(e.$t("settings.aiModel.model")),1),(0,i.Lk)("span",ee,(0,i.v_)(e.$t("settings.aiModel.byDefault")),1)]),(0,i.Lk)("div",{class:"add-model",onClick:R},[f[10]||(f[10]=(0,i.Lk)("i",{class:"i-ic:baseline-control-point text-4"},null,-1)),(0,i.Lk)("span",el,(0,i.v_)(e.$t("settings.aiModel.addModel")),1)])]),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)((0,i.R1)(t),e=>((0,i.uX)(),(0,i.CE)("div",{key:e.title,class:"model-list"},[(0,i.Lk)("div",ea,[(0,i.Lk)("span",et,(0,i.v_)(e.title),1),(0,i.Lk)("div",ei,[(0,i.bF)(C,{value:e.status,"onUpdate:value":[l=>e.status=l,a=>(0,i.R1)(K)(e,a,(0,i.R1)(l))]},null,8,["value","onUpdate:value"]),(0,i.Lk)("i",{class:"i-material-symbols:delete-outline text-5",onClick:a=>(0,i.R1)(U)(e,(0,i.R1)(l))},null,8,es)])])]))),128))])])]),_:1},8,["show"])]),(0,i.bF)(A,{ref_key:"addProviderRef",ref:b},null,512),(0,i.bF)($,{ref_key:"addModelRef",ref:k},null,512)],64)}}});var eu=a(64901);let eo=(0,eu.default)(er,[["__scopeId","data-v-c0b51a02"]]),ep={class:"max-w-4xl mx-auto px-4 py-8"},en=(0,i.pM)({__name:"index",setup(e){let l,a,s,r,u,o,p,n,d=(l=(0,i.KR)([]),a=(0,i.KR)([]),s=(0,i.KR)(),r=(0,i.KR)({supplierTitle:"",supplierName:"",baseUrl:"",baseUrlExample:"",isUseUrlExample:!1,apiKey:"",home:"",help:"",status:!1,icon:"",sort:0}),u=(0,i.KR)(!1),o=(0,i.KR)({supplierTitle:"",supplierName:"",baseUrl:"",apiKey:""}),p=(0,i.KR)(),n=(0,i.KR)({title:"",modelId:"",max_tokens:8192,capability:["llm"]}),{providerList:l,modelList:a,addProviderRef:s,currentProvider:r,configurationLoading:u,addProviderFormData:o,addProviderFormDataRef:p,addModelFormData:n,addModelFormRef:(0,i.KR)(),addModelRef:(0,i.KR)()});return(0,i.Gt)("modelStore",d),(e,l)=>{let a=t.Ay;return(0,i.uX)(),(0,i.CE)("div",ep,[(0,i.bF)(a,{class:"mb-5"},{default:(0,i.k6)(()=>[...l[0]||(l[0]=[(0,i.Lk)("div",{class:"page-tit",style:{margin:"0"}},[(0,i.Lk)("div",{class:"left-tit"},[(0,i.Lk)("div",{class:"back-tool"},[(0,i.Lk)("i",{class:"i-ri:apps-fill text-6"})]),(0,i.Lk)("span",{class:"tit-content"}," AI Model ")])],-1)])]),_:1}),(0,i.bF)(a,null,{default:(0,i.k6)(()=>[(0,i.bF)(eo)]),_:1})])}}}),ed=(0,eu.default)(en,[["__scopeId","data-v-81fc0b63"]])}}]);