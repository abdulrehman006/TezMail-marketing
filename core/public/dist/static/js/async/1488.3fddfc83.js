"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([["1488"],{12433(e,t,r){r.d(t,{A:()=>i});var l=r(90290);let i=(0,l.pM)({name:"Add",render:()=>(0,l.h)("svg",{width:"512",height:"512",viewBox:"0 0 512 512",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,l.h)("path",{d:"M256 112V400M400 256H112",stroke:"currentColor","stroke-width":"32","stroke-linecap":"round","stroke-linejoin":"round"}))})},1107(e,t,r){r.d(t,{A:()=>el});var l=r(29726),i=r(5562),n=r(90290),o=r(49359),a=r(50922),s=r(79623),u=r(83370),d=r(4019),c=r(11601),h=r(16680),p=r(947),f=r(90178),g=r(48271),v=r(58454),m=r(75454);let y=(0,m.c)([(0,m.cB)("upload","width: 100%;",[(0,m.cM)("dragger-inside",[(0,m.cB)("upload-trigger",`
 display: block;
 `)]),(0,m.cM)("drag-over",[(0,m.cB)("upload-dragger",`
 border: var(--n-dragger-border-hover);
 `)])]),(0,m.cB)("upload-dragger",`
 cursor: pointer;
 box-sizing: border-box;
 width: 100%;
 text-align: center;
 border-radius: var(--n-border-radius);
 padding: 24px;
 opacity: 1;
 transition:
 opacity .3s var(--n-bezier),
 border-color .3s var(--n-bezier),
 background-color .3s var(--n-bezier);
 background-color: var(--n-dragger-color);
 border: var(--n-dragger-border);
 `,[(0,m.c)("&:hover",`
 border: var(--n-dragger-border-hover);
 `),(0,m.cM)("disabled",`
 cursor: not-allowed;
 `)]),(0,m.cB)("upload-trigger",`
 display: inline-block;
 box-sizing: border-box;
 opacity: 1;
 transition: opacity .3s var(--n-bezier);
 `,[(0,m.c)("+",[(0,m.cB)("upload-file-list","margin-top: 8px;")]),(0,m.cM)("disabled",`
 opacity: var(--n-item-disabled-opacity);
 cursor: not-allowed;
 `),(0,m.cM)("image-card",`
 width: 96px;
 height: 96px;
 `,[(0,m.cB)("base-icon",`
 font-size: 24px;
 `),(0,m.cB)("upload-dragger",`
 padding: 0;
 height: 100%;
 width: 100%;
 display: flex;
 align-items: center;
 justify-content: center;
 `)])]),(0,m.cB)("upload-file-list",`
 line-height: var(--n-line-height);
 opacity: 1;
 transition: opacity .3s var(--n-bezier);
 `,[(0,m.c)("a, img","outline: none;"),(0,m.cM)("disabled",`
 opacity: var(--n-item-disabled-opacity);
 cursor: not-allowed;
 `,[(0,m.cB)("upload-file","cursor: not-allowed;")]),(0,m.cM)("grid",`
 display: grid;
 grid-template-columns: repeat(auto-fill, 96px);
 grid-gap: 8px;
 margin-top: 0;
 `),(0,m.cB)("upload-file",`
 display: block;
 box-sizing: border-box;
 cursor: default;
 padding: 0px 12px 0 6px;
 transition: background-color .3s var(--n-bezier);
 border-radius: var(--n-border-radius);
 `,[(0,g._)(),(0,m.cB)("progress",[(0,g._)({foldPadding:!0})]),(0,m.c)("&:hover",`
 background-color: var(--n-item-color-hover);
 `,[(0,m.cB)("upload-file-info",[(0,m.cE)("action",`
 opacity: 1;
 `)])]),(0,m.cM)("image-type",`
 border-radius: var(--n-border-radius);
 text-decoration: underline;
 text-decoration-color: #0000;
 `,[(0,m.cB)("upload-file-info",`
 padding-top: 0px;
 padding-bottom: 0px;
 width: 100%;
 height: 100%;
 display: flex;
 justify-content: space-between;
 align-items: center;
 padding: 6px 0;
 `,[(0,m.cB)("progress",`
 padding: 2px 0;
 margin-bottom: 0;
 `),(0,m.cE)("name",`
 padding: 0 8px;
 `),(0,m.cE)("thumbnail",`
 width: 32px;
 height: 32px;
 font-size: 28px;
 display: flex;
 justify-content: center;
 align-items: center;
 `,[(0,m.c)("img",`
 width: 100%;
 `)])])]),(0,m.cM)("text-type",[(0,m.cB)("progress",`
 box-sizing: border-box;
 padding-bottom: 6px;
 margin-bottom: 6px;
 `)]),(0,m.cM)("image-card-type",`
 position: relative;
 width: 96px;
 height: 96px;
 border: var(--n-item-border-image-card);
 border-radius: var(--n-border-radius);
 padding: 0;
 display: flex;
 align-items: center;
 justify-content: center;
 transition: border-color .3s var(--n-bezier), background-color .3s var(--n-bezier);
 border-radius: var(--n-border-radius);
 overflow: hidden;
 `,[(0,m.cB)("progress",`
 position: absolute;
 left: 8px;
 bottom: 8px;
 right: 8px;
 width: unset;
 `),(0,m.cB)("upload-file-info",`
 padding: 0;
 width: 100%;
 height: 100%;
 `,[(0,m.cE)("thumbnail",`
 width: 100%;
 height: 100%;
 display: flex;
 flex-direction: column;
 align-items: center;
 justify-content: center;
 font-size: 36px;
 `,[(0,m.c)("img",`
 width: 100%;
 `)])]),(0,m.c)("&::before",`
 position: absolute;
 z-index: 1;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 border-radius: inherit;
 opacity: 0;
 transition: opacity .2s var(--n-bezier);
 content: "";
 `),(0,m.c)("&:hover",[(0,m.c)("&::before","opacity: 1;"),(0,m.cB)("upload-file-info",[(0,m.cE)("thumbnail","opacity: .12;")])])]),(0,m.cM)("error-status",[(0,m.c)("&:hover",`
 background-color: var(--n-item-color-hover-error);
 `),(0,m.cB)("upload-file-info",[(0,m.cE)("name","color: var(--n-item-text-color-error);"),(0,m.cE)("thumbnail","color: var(--n-item-text-color-error);")]),(0,m.cM)("image-card-type",`
 border: var(--n-item-border-image-card-error);
 `)]),(0,m.cM)("with-url",`
 cursor: pointer;
 `,[(0,m.cB)("upload-file-info",[(0,m.cE)("name",`
 color: var(--n-item-text-color-success);
 text-decoration-color: var(--n-item-text-color-success);
 `,[(0,m.c)("a",`
 text-decoration: underline;
 `)])])]),(0,m.cB)("upload-file-info",`
 position: relative;
 padding-top: 6px;
 padding-bottom: 6px;
 display: flex;
 flex-wrap: nowrap;
 `,[(0,m.cE)("thumbnail",`
 font-size: 18px;
 opacity: 1;
 transition: opacity .2s var(--n-bezier);
 color: var(--n-item-icon-color);
 `,[(0,m.cB)("base-icon",`
 margin-right: 2px;
 vertical-align: middle;
 transition: color .3s var(--n-bezier);
 `)]),(0,m.cE)("action",`
 padding-top: inherit;
 padding-bottom: inherit;
 position: absolute;
 right: 0;
 top: 0;
 bottom: 0;
 width: 80px;
 display: flex;
 align-items: center;
 transition: opacity .2s var(--n-bezier);
 justify-content: flex-end;
 opacity: 0;
 `,[(0,m.cB)("button",[(0,m.c)("&:not(:last-child)",{marginRight:"4px"}),(0,m.cB)("base-icon",[(0,m.c)("svg",[(0,v.N)()])])]),(0,m.cM)("image-type",`
 position: relative;
 max-width: 80px;
 width: auto;
 `),(0,m.cM)("image-card-type",`
 z-index: 2;
 position: absolute;
 width: 100%;
 height: 100%;
 left: 0;
 right: 0;
 bottom: 0;
 top: 0;
 display: flex;
 justify-content: center;
 align-items: center;
 `)]),(0,m.cE)("name",`
 color: var(--n-item-text-color);
 flex: 1;
 display: flex;
 justify-content: center;
 text-overflow: ellipsis;
 overflow: hidden;
 flex-direction: column;
 text-decoration-color: #0000;
 font-size: var(--n-font-size);
 transition:
 color .3s var(--n-bezier),
 text-decoration-color .3s var(--n-bezier); 
 `,[(0,m.c)("a",`
 color: inherit;
 text-decoration: underline;
 `)])])])]),(0,m.cB)("upload-file-input",`
 display: none;
 width: 0;
 height: 0;
 opacity: 0;
 `)]);var b=r(9682),w=r(54254),x=r(18393),R=r(29440),B=r(98250),k=r(39819),C=r(18408);let P=(0,C.l)("attach",()=>(0,n.h)("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},(0,n.h)("g",{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},(0,n.h)("g",{fill:"currentColor","fill-rule":"nonzero"},(0,n.h)("path",{d:"M3.25735931,8.70710678 L7.85355339,4.1109127 C8.82986412,3.13460197 10.4127766,3.13460197 11.3890873,4.1109127 C12.365398,5.08722343 12.365398,6.67013588 11.3890873,7.64644661 L6.08578644,12.9497475 C5.69526215,13.3402718 5.06209717,13.3402718 4.67157288,12.9497475 C4.28104858,12.5592232 4.28104858,11.9260582 4.67157288,11.5355339 L9.97487373,6.23223305 C10.1701359,6.0369709 10.1701359,5.72038841 9.97487373,5.52512627 C9.77961159,5.32986412 9.4630291,5.32986412 9.26776695,5.52512627 L3.96446609,10.8284271 C3.18341751,11.6094757 3.18341751,12.8758057 3.96446609,13.6568542 C4.74551468,14.4379028 6.01184464,14.4379028 6.79289322,13.6568542 L12.0961941,8.35355339 C13.4630291,6.98671837 13.4630291,4.77064094 12.0961941,3.40380592 C10.7293591,2.0369709 8.51328163,2.0369709 7.14644661,3.40380592 L2.55025253,8 C2.35499039,8.19526215 2.35499039,8.51184464 2.55025253,8.70710678 C2.74551468,8.90236893 3.06209717,8.90236893 3.25735931,8.70710678 Z"})))));var A=r(79131);let T=(0,C.l)("trash",()=>(0,n.h)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},(0,n.h)("path",{d:"M432,144,403.33,419.74A32,32,0,0,1,371.55,448H140.46a32,32,0,0,1-31.78-28.26L80,144",style:"fill: none; stroke: currentcolor; stroke-linecap: round; stroke-linejoin: round; stroke-width: 32px;"}),(0,n.h)("rect",{x:"32",y:"64",width:"448",height:"80",rx:"16",ry:"16",style:"fill: none; stroke: currentcolor; stroke-linecap: round; stroke-linejoin: round; stroke-width: 32px;"}),(0,n.h)("line",{x1:"312",y1:"240",x2:"200",y2:"352",style:"fill: none; stroke: currentcolor; stroke-linecap: round; stroke-linejoin: round; stroke-width: 32px;"}),(0,n.h)("line",{x1:"312",y1:"352",x2:"200",y2:"240",style:"fill: none; stroke: currentcolor; stroke-linecap: round; stroke-linejoin: round; stroke-width: 32px;"}))),L=(0,C.l)("cancel",()=>(0,n.h)("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},(0,n.h)("g",{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},(0,n.h)("g",{fill:"currentColor","fill-rule":"nonzero"},(0,n.h)("path",{d:"M2.58859116,2.7156945 L2.64644661,2.64644661 C2.82001296,2.47288026 3.08943736,2.45359511 3.2843055,2.58859116 L3.35355339,2.64644661 L8,7.293 L12.6464466,2.64644661 C12.8417088,2.45118446 13.1582912,2.45118446 13.3535534,2.64644661 C13.5488155,2.84170876 13.5488155,3.15829124 13.3535534,3.35355339 L8.707,8 L13.3535534,12.6464466 C13.5271197,12.820013 13.5464049,13.0894374 13.4114088,13.2843055 L13.3535534,13.3535534 C13.179987,13.5271197 12.9105626,13.5464049 12.7156945,13.4114088 L12.6464466,13.3535534 L8,8.707 L3.35355339,13.3535534 C3.15829124,13.5488155 2.84170876,13.5488155 2.64644661,13.3535534 C2.45118446,13.1582912 2.45118446,12.8417088 2.64644661,12.6464466 L7.293,8 L2.64644661,3.35355339 C2.47288026,3.17998704 2.45359511,2.91056264 2.58859116,2.7156945 L2.64644661,2.64644661 L2.58859116,2.7156945 Z"}))))),E=(0,C.l)("retry",()=>(0,n.h)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},(0,n.h)("path",{d:"M320,146s24.36-12-64-12A160,160,0,1,0,416,294",style:"fill: none; stroke: currentcolor; stroke-linecap: round; stroke-miterlimit: 10; stroke-width: 32px;"}),(0,n.h)("polyline",{points:"256 58 336 138 256 218",style:"fill: none; stroke: currentcolor; stroke-linecap: round; stroke-linejoin: round; stroke-width: 32px;"})));var O=r(7012),j=r(5516),U=r(27546),D=r(46835);function W(){return(0,n.h)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28"},(0,n.h)("g",{fill:"none"},(0,n.h)("path",{d:"M21.75 3A3.25 3.25 0 0 1 25 6.25v15.5A3.25 3.25 0 0 1 21.75 25H6.25A3.25 3.25 0 0 1 3 21.75V6.25A3.25 3.25 0 0 1 6.25 3h15.5zm.583 20.4l-7.807-7.68a.75.75 0 0 0-.968-.07l-.084.07l-7.808 7.68c.183.065.38.1.584.1h15.5c.204 0 .4-.035.583-.1l-7.807-7.68l7.807 7.68zM21.75 4.5H6.25A1.75 1.75 0 0 0 4.5 6.25v15.5c0 .208.036.408.103.593l7.82-7.692a2.25 2.25 0 0 1 3.026-.117l.129.117l7.82 7.692c.066-.185.102-.385.102-.593V6.25a1.75 1.75 0 0 0-1.75-1.75zm-3.25 3a2.5 2.5 0 1 1 0 5a2.5 2.5 0 0 1 0-5zm0 1.5a1 1 0 1 0 0 2a1 1 0 0 0 0-2z",fill:"currentColor"})))}function F(){return(0,n.h)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28"},(0,n.h)("g",{fill:"none"},(0,n.h)("path",{d:"M6.4 2A2.4 2.4 0 0 0 4 4.4v19.2A2.4 2.4 0 0 0 6.4 26h15.2a2.4 2.4 0 0 0 2.4-2.4V11.578c0-.729-.29-1.428-.805-1.944l-6.931-6.931A2.4 2.4 0 0 0 14.567 2H6.4zm-.9 2.4a.9.9 0 0 1 .9-.9H14V10a2 2 0 0 0 2 2h6.5v11.6a.9.9 0 0 1-.9.9H6.4a.9.9 0 0 1-.9-.9V4.4zm16.44 6.1H16a.5.5 0 0 1-.5-.5V4.06l6.44 6.44z",fill:"currentColor"})))}var z=r(98314);let M=(0,n.pM)({name:"UploadProgress",props:{show:Boolean,percentage:{type:Number,required:!0},status:{type:String,required:!0}},setup:()=>({mergedTheme:(0,n.WQ)(f.u).mergedThemeRef}),render(){return(0,n.h)(w.A,null,{default:()=>this.show?(0,n.h)(z.A,{type:"line",showIndicator:!1,percentage:this.percentage,status:this.status,height:2,theme:this.mergedTheme.peers.Progress,themeOverrides:this.mergedTheme.peerOverrides.Progress}):null})}});var $=r(91900),S=function(e,t,r,l){return new(r||(r=Promise))(function(i,n){function o(e){try{s(l.next(e))}catch(e){n(e)}}function a(e){try{s(l.throw(e))}catch(e){n(e)}}function s(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(o,a)}s((l=l.apply(e,t||[])).next())})};function _(e){return e.includes("image/")}function H(e=""){let t=e.split("/"),r=t[t.length-1].split(/#|\?/)[0];return(/\.[^./\\]*$/.exec(r)||[""])[0]}let q=/(webp|svg|png|gif|jpg|jpeg|jfif|bmp|dpg|ico)$/i,I=e=>{if(e.type)return _(e.type);let t=H(e.name||"");if(q.test(t))return!0;let r=e.thumbnailUrl||e.url||"",l=H(r);return!!(/^data:image\//.test(r)||q.test(l))},V=$.B&&window.FileReader&&window.File;function X(e){let{id:t,name:r,percentage:l,status:i,url:n,file:o,thumbnailUrl:a,type:s,fullPath:u,batchId:d}=e;return{id:t,name:r,percentage:null!=l?l:null,status:i,url:null!=n?n:null,file:null!=o?o:null,thumbnailUrl:null!=a?a:null,type:null!=s?s:null,fullPath:null!=u?u:null,batchId:null!=d?d:null}}var G=function(e,t,r,l){return new(r||(r=Promise))(function(i,n){function o(e){try{s(l.next(e))}catch(e){n(e)}}function a(e){try{s(l.throw(e))}catch(e){n(e)}}function s(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(o,a)}s((l=l.apply(e,t||[])).next())})};let K={paddingMedium:"0 3px",heightMedium:"24px",iconSizeMedium:"18px"},N=(0,n.pM)({name:"UploadFile",props:{clsPrefix:{type:String,required:!0},file:{type:Object,required:!0},listType:{type:String,required:!0},index:{type:Number,required:!0}},setup(e){let t=(0,n.WQ)(f.u),r=(0,n.KR)(null),l=(0,n.KR)(""),i=(0,n.EW)(()=>{let{file:t}=e;return"finished"===t.status?"success":"error"===t.status?"error":"info"}),o=(0,n.EW)(()=>{let{file:t}=e;if("error"===t.status)return"error"}),a=(0,n.EW)(()=>{let{file:t}=e;return"uploading"===t.status}),s=(0,n.EW)(()=>{if(!t.showCancelButtonRef.value)return!1;let{file:r}=e;return["uploading","pending","error"].includes(r.status)}),u=(0,n.EW)(()=>{if(!t.showRemoveButtonRef.value)return!1;let{file:r}=e;return["finished"].includes(r.status)}),d=(0,n.EW)(()=>{if(!t.showDownloadButtonRef.value)return!1;let{file:r}=e;return["finished"].includes(r.status)}),h=(0,n.EW)(()=>{if(!t.showRetryButtonRef.value)return!1;let{file:r}=e;return["error"].includes(r.status)}),p=(0,R.A)(()=>l.value||e.file.thumbnailUrl||e.file.url),g=(0,n.EW)(()=>{if(!t.showPreviewButtonRef.value)return!1;let{file:{status:r},listType:l}=e;return["finished"].includes(r)&&p.value&&"image-card"===l});function v(r){let{xhrMap:l,doChange:i,onRemoveRef:{value:n},mergedFileListRef:{value:o}}=t;Promise.resolve(!n||n({file:Object.assign({},r),fileList:o,index:e.index})).then(e=>{if(!1===e)return;let t=Object.assign({},r,{status:"removed"});l.delete(r.id),i(t,void 0,{remove:!0})})}let m=()=>G(this,void 0,void 0,function*(){let{listType:r}=e;("image"===r||"image-card"===r)&&t.shouldUseThumbnailUrlRef.value(e.file)&&(l.value=yield t.getFileThumbnailUrlResolver(e.file))});return(0,n.nT)(()=>{m()}),{mergedTheme:t.mergedThemeRef,progressStatus:i,buttonType:o,showProgress:a,disabled:t.mergedDisabledRef,showCancelButton:s,showRemoveButton:u,showDownloadButton:d,showRetryButton:h,showPreviewButton:g,mergedThumbnailUrl:p,shouldUseThumbnailUrl:t.shouldUseThumbnailUrlRef,renderIcon:t.renderIconRef,imageRef:r,handleRemoveOrCancelClick:function(r){r.preventDefault();let{file:l}=e;["finished","pending","error"].includes(l.status)?v(l):["uploading"].includes(l.status)?function(e){let{xhrMap:r}=t,l=r.get(e.id);null==l||l.abort(),v(Object.assign({},e))}(l):(0,c.R8)("upload","The button clicked type is unknown.")},handleDownloadClick:function(r){r.preventDefault(),function(e){let{onDownloadRef:{value:r},customDownloadRef:{value:l}}=t;Promise.resolve(!r||r(Object.assign({},e))).then(t=>{!1!==t&&(l?l(Object.assign({},e)):(0,j.R)(e.url,e.name))})}(e.file)},handleRetryClick:function(){return G(this,void 0,void 0,function*(){let r=t.onRetryRef.value;r&&!1===(yield r({file:e.file}))||t.submit(e.file.id)})},handlePreviewClick:function(l){let{onPreviewRef:{value:i}}=t;if(i)i(e.file,{event:l});else if("image-card"===e.listType){let{value:e}=r;if(!e)return;e.showPreview()}}}},render(){let e,{clsPrefix:t,mergedTheme:r,listType:l,file:i,renderIcon:o}=this,a="image"===l;e=a||"image-card"===l?this.shouldUseThumbnailUrl(i)&&this.mergedThumbnailUrl?(0,n.h)("a",{rel:"noopener noreferer",target:"_blank",href:i.url||void 0,class:`${t}-upload-file-info__thumbnail`,onClick:this.handlePreviewClick},"image-card"===l?(0,n.h)(D.A,{src:this.mergedThumbnailUrl||void 0,previewSrc:i.url||void 0,alt:i.name,ref:"imageRef"}):(0,n.h)("img",{src:this.mergedThumbnailUrl||void 0,alt:i.name})):(0,n.h)("span",{class:`${t}-upload-file-info__thumbnail`},o?o(i):I(i)?(0,n.h)(B.A,{clsPrefix:t},{default:W}):(0,n.h)(B.A,{clsPrefix:t},{default:F})):(0,n.h)("span",{class:`${t}-upload-file-info__thumbnail`},o?o(i):(0,n.h)(B.A,{clsPrefix:t},{default:()=>(0,n.h)(P,null)}));let s=(0,n.h)(M,{show:this.showProgress,percentage:i.percentage||0,status:this.progressStatus});return(0,n.h)("div",{class:[`${t}-upload-file`,`${t}-upload-file--${this.progressStatus}-status`,i.url&&"error"!==i.status&&"image-card"!==l&&`${t}-upload-file--with-url`,`${t}-upload-file--${l}-type`]},(0,n.h)("div",{class:`${t}-upload-file-info`},e,(0,n.h)("div",{class:`${t}-upload-file-info__name`},("text"===l||"image"===l)&&(i.url&&"error"!==i.status?(0,n.h)("a",{rel:"noopener noreferer",target:"_blank",href:i.url||void 0,onClick:this.handlePreviewClick},i.name):(0,n.h)("span",{onClick:this.handlePreviewClick},i.name)),a&&s),(0,n.h)("div",{class:[`${t}-upload-file-info__action`,`${t}-upload-file-info__action--${l}-type`]},this.showPreviewButton?(0,n.h)(U.Ay,{key:"preview",quaternary:!0,type:this.buttonType,onClick:this.handlePreviewClick,theme:r.peers.Button,themeOverrides:r.peerOverrides.Button,builtinThemeOverrides:K},{icon:()=>(0,n.h)(B.A,{clsPrefix:t},{default:()=>(0,n.h)(A.A,null)})}):null,(this.showRemoveButton||this.showCancelButton)&&!this.disabled&&(0,n.h)(U.Ay,{key:"cancelOrTrash",theme:r.peers.Button,themeOverrides:r.peerOverrides.Button,quaternary:!0,builtinThemeOverrides:K,type:this.buttonType,onClick:this.handleRemoveOrCancelClick},{icon:()=>(0,n.h)(k.A,null,{default:()=>this.showRemoveButton?(0,n.h)(B.A,{clsPrefix:t,key:"trash"},{default:()=>(0,n.h)(T,null)}):(0,n.h)(B.A,{clsPrefix:t,key:"cancel"},{default:()=>(0,n.h)(L,null)})})}),this.showRetryButton&&!this.disabled&&(0,n.h)(U.Ay,{key:"retry",quaternary:!0,type:this.buttonType,onClick:this.handleRetryClick,theme:r.peers.Button,themeOverrides:r.peerOverrides.Button,builtinThemeOverrides:K},{icon:()=>(0,n.h)(B.A,{clsPrefix:t},{default:()=>(0,n.h)(E,null)})}),this.showDownloadButton?(0,n.h)(U.Ay,{key:"download",quaternary:!0,type:this.buttonType,onClick:this.handleDownloadClick,theme:r.peers.Button,themeOverrides:r.peerOverrides.Button,builtinThemeOverrides:K},{icon:()=>(0,n.h)(B.A,{clsPrefix:t},{default:()=>(0,n.h)(O.A,null)})}):null)),!a&&s)}});var Q=r(12433),Z=r(49521);let Y=(0,n.pM)({name:"UploadTrigger",props:{abstract:Boolean},slots:Object,setup(e,{slots:t}){let r=(0,n.WQ)(f.u,null);r||(0,c.$8)("upload-trigger","`n-upload-trigger` must be placed inside `n-upload`.");let{mergedClsPrefixRef:l,mergedDisabledRef:i,maxReachedRef:o,listTypeRef:a,dragOverRef:s,openOpenFileDialog:u,draggerInsideRef:d,handleFileAddition:h,mergedDirectoryDndRef:p,triggerClassRef:g,triggerStyleRef:v}=r,m=(0,n.EW)(()=>"image-card"===a.value);function y(){i.value||o.value||u()}function w(e){e.preventDefault(),s.value=!0}function x(e){e.preventDefault(),s.value=!0}function R(e){e.preventDefault(),s.value=!1}function k(e){var t;if(e.preventDefault(),!d.value||i.value||o.value){s.value=!1;return}let r=null==(t=e.dataTransfer)?void 0:t.items;(null==r?void 0:r.length)?(function(e,t){return S(this,void 0,void 0,function*(){let r=[];return yield function e(l){return S(this,void 0,void 0,function*(){for(let i of l)if(i){if(t&&i.isDirectory){let t,r=i.createReader(),l=[];try{do t=yield new Promise((e,t)=>{r.readEntries(e,t)}),l=l.concat(t);while(t.length>0)}catch(e){(0,c.z3)("upload","error happens when handling directory upload",e)}yield e(l)}else if(i.isFile)try{let e=yield new Promise((e,t)=>{i.file(e,t)});r.push({file:e,entry:i,source:"dnd"})}catch(e){(0,c.z3)("upload","error happens when handling file upload",e)}}})}(e),r})})(Array.from(r).map(e=>e.webkitGetAsEntry()),p.value).then(e=>{h(e)}).finally(()=>{s.value=!1}):s.value=!1}return()=>{var r;let{value:a}=l;return e.abstract?null==(r=t.default)?void 0:r.call(t,{handleClick:y,handleDrop:k,handleDragOver:w,handleDragEnter:x,handleDragLeave:R}):(0,n.h)("div",{class:[`${a}-upload-trigger`,(i.value||o.value)&&`${a}-upload-trigger--disabled`,m.value&&`${a}-upload-trigger--image-card`,g.value],style:v.value,onClick:y,onDrop:k,onDragover:w,onDragenter:x,onDragleave:R},m.value?(0,n.h)(b.A,null,{default:()=>(0,Z.Nj)(t.default,()=>[(0,n.h)(B.A,{clsPrefix:a},{default:()=>(0,n.h)(Q.A,null)})])}):t)}}}),J=(0,n.pM)({name:"UploadFileList",setup(e,{slots:t}){let r=(0,n.WQ)(f.u,null);r||(0,c.$8)("upload-file-list","`n-upload-file-list` must be placed inside `n-upload`.");let{abstractRef:l,mergedClsPrefixRef:i,listTypeRef:o,mergedFileListRef:a,fileListClassRef:s,fileListStyleRef:u,cssVarsRef:d,themeClassRef:h,maxReachedRef:p,showTriggerRef:g,imageGroupPropsRef:v}=r,m=(0,n.EW)(()=>"image-card"===o.value),y=()=>a.value.map((e,t)=>(0,n.h)(N,{clsPrefix:i.value,key:e.id,file:e,index:t,listType:o.value}));return()=>{let{value:e}=i,{value:r}=l;return(0,n.h)("div",{class:[`${e}-upload-file-list`,m.value&&`${e}-upload-file-list--grid`,r?null==h?void 0:h.value:void 0,s.value],style:[r&&d?d.value:"",u.value]},m.value?(0,n.h)(x.Ay,Object.assign({},v.value),{default:y}):(0,n.h)(w.A,{group:!0},{default:y}),g.value&&!p.value&&m.value&&(0,n.h)(Y,null,t))}}});var ee=function(e,t,r,l){return new(r||(r=Promise))(function(i,n){function o(e){try{s(l.next(e))}catch(e){n(e)}}function a(e){try{s(l.throw(e))}catch(e){n(e)}}function s(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(o,a)}s((l=l.apply(e,t||[])).next())})};function et(e,t){return"function"==typeof e?e({file:t}):e||{}}let er=Object.assign(Object.assign({},o.A.props),{name:{type:String,default:"file"},accept:String,action:String,customRequest:Function,directory:Boolean,directoryDnd:{type:Boolean,default:void 0},method:{type:String,default:"POST"},multiple:Boolean,showFileList:{type:Boolean,default:!0},data:[Object,Function],headers:[Object,Function],withCredentials:Boolean,responseType:{type:String,default:""},disabled:{type:Boolean,default:void 0},onChange:Function,onRemove:Function,onFinish:Function,onError:Function,onRetry:Function,onBeforeUpload:Function,isErrorState:Function,onDownload:Function,customDownload:Function,defaultUpload:{type:Boolean,default:!0},fileList:Array,"onUpdate:fileList":[Function,Array],onUpdateFileList:[Function,Array],fileListClass:String,fileListStyle:[String,Object],defaultFileList:{type:Array,default:()=>[]},showCancelButton:{type:Boolean,default:!0},showRemoveButton:{type:Boolean,default:!0},showDownloadButton:Boolean,showRetryButton:{type:Boolean,default:!0},showPreviewButton:{type:Boolean,default:!0},listType:{type:String,default:"text"},onPreview:Function,shouldUseThumbnailUrl:{type:Function,default:e=>!!V&&I(e)},createThumbnailUrl:Function,abstract:Boolean,max:Number,showTrigger:{type:Boolean,default:!0},imageGroupProps:Object,inputProps:Object,triggerClass:String,triggerStyle:[String,Object],renderIcon:Function}),el=(0,n.pM)({name:"Upload",props:er,setup(e){e.abstract&&"image-card"===e.listType&&(0,c.$8)("upload","when the list-type is image-card, abstract is not supported.");let{mergedClsPrefixRef:t,inlineThemeDisabled:r,mergedRtlRef:g}=(0,a.Ay)(e),v=(0,o.A)("Upload","-upload",y,p.A,e,t),m=(0,s.I)("Upload",g,t),b=(0,u.A)(e),w=(0,n.KR)(e.defaultFileList),x=(0,n.lW)(e,"fileList"),R=(0,n.KR)(null),B={value:!1},k=(0,n.KR)(!1),C=new Map,P=(0,i.A)(x,w),A=(0,n.EW)(()=>P.value.map(X)),T=(0,n.EW)(()=>{let{max:t}=e;return void 0!==t&&A.value.length>=t});function L(){var e;null==(e=R.value)||e.click()}let E=(0,n.EW)(()=>e.multiple||e.directory),O=(t,r,l={append:!1,remove:!1})=>{let{append:i,remove:n}=l,o=Array.from(A.value),a=o.findIndex(e=>e.id===t.id);if(i||n||~a){i?o.push(t):n?o.splice(a,1):o.splice(a,1,t);let{onChange:l}=e;l&&l({file:t,fileList:o,event:r}),function(t){let{"onUpdate:fileList":r,onUpdateFileList:l}=e;r&&(0,h.T)(r,t),l&&(0,h.T)(l,t),w.value=t}(o)}};function j(t,r){if(!t||0===t.length)return;let{onBeforeUpload:i}=e;t=E.value?t:[t[0]];let{max:o,accept:a}=e;t=t.filter(({file:e,source:t})=>{var r,l,i;return!("dnd"===t&&(null==a?void 0:a.trim()))||(r=e.name,l=e.type,i=a,r=r.toLowerCase(),l=l.toLocaleLowerCase(),(i=i.toLocaleLowerCase()).split(",").map(e=>e.trim()).filter(Boolean).some(e=>{if(e.startsWith(".")){if(r.endsWith(e))return!0}else{if(!e.includes("/"))return!0;let[t,r]=l.split("/"),[i,n]=e.split("/");if(("*"===i||t&&i&&i===t)&&("*"===n||r&&n&&n===r))return!0}return!1}))}),o&&(t=t.slice(0,o-A.value.length));let s=(0,l.sX)();Promise.all(t.map(e=>ee(this,[e],void 0,function*({file:e,entry:t}){var r;let n={id:(0,l.sX)(),batchId:s,name:e.name,status:"pending",percentage:0,file:e,url:null,type:e.type,thumbnailUrl:null,fullPath:null!=(r=null==t?void 0:t.fullPath)?r:`/${e.webkitRelativePath||e.name}`};return i&&(yield i({file:n,fileList:A.value}))===!1?null:n}))).then(e=>ee(this,void 0,void 0,function*(){let t=Promise.resolve();e.forEach(e=>{t=t.then(n.dY).then(()=>{e&&O(e,r,{append:!0})})}),yield t})).then(()=>{e.defaultUpload&&U()})}function U(t){let{method:r,action:l,withCredentials:i,headers:n,data:o,name:a}=e,s=void 0!==t?A.value.filter(e=>e.id===t):A.value,u=void 0!==t;s.forEach(t=>{let{status:s}=t;("pending"===s||"error"===s&&u)&&(e.customRequest?function(e){let{inst:t,file:r,data:l,headers:i,withCredentials:n,action:o,customRequest:a}=e,{doChange:s}=e.inst,u=0;a({file:r,data:l,headers:i,withCredentials:n,action:o,onProgress(e){let t=Object.assign({},r,{status:"uploading"}),l=e.percent;t.percentage=l,u=l,s(t)},onFinish(){var e;let l=Object.assign({},r,{status:"finished",percentage:u});s(l=X((null==(e=t.onFinish)?void 0:e.call(t,{file:l}))||l))},onError(){var e;let l=Object.assign({},r,{status:"error",percentage:u});s(l=X((null==(e=t.onError)?void 0:e.call(t,{file:l}))||l))}})}({inst:{doChange:O,xhrMap:C,onFinish:e.onFinish,onError:e.onError},file:t,action:l,withCredentials:i,headers:n,data:o,customRequest:e.customRequest}):function(e,t,r,{method:l,action:i,withCredentials:n,responseType:o,headers:a,data:s}){let u,d,c=new XMLHttpRequest;c.responseType=o,e.xhrMap.set(r.id,c),c.withCredentials=n;let h=new FormData;if((u=et(s,r))&&Object.keys(u).forEach(e=>{h.append(e,u[e])}),null!==r.file&&h.append(t,r.file),d=function(e,t,r){let{doChange:l,xhrMap:i}=e,n=0;function o(r){var o;let a=Object.assign({},t,{status:"error",percentage:n});i.delete(t.id),l(a=X((null==(o=e.onError)?void 0:o.call(e,{file:a,event:r}))||a),r)}return{handleXHRLoad:function(a){var s;if(e.isErrorState){if(e.isErrorState(r))return void o(a)}else if(r.status<200||r.status>=300)return void o(a);let u=Object.assign({},t,{status:"finished",percentage:n});i.delete(t.id),l(u=X((null==(s=e.onFinish)?void 0:s.call(e,{file:u,event:a}))||u),a)},handleXHRError:o,handleXHRAbort(e){let r=Object.assign({},t,{status:"removed",file:null,percentage:n});i.delete(t.id),l(r,e)},handleXHRProgress(e){let r=Object.assign({},t,{status:"uploading"});if(e.lengthComputable){let t=Math.ceil(e.loaded/e.total*100);r.percentage=t,n=t}l(r,e)}}}(e,r,c),c.onabort=d.handleXHRAbort,c.onerror=d.handleXHRError,c.onload=d.handleXHRLoad,c.upload&&(c.upload.onprogress=d.handleXHRProgress),void 0!==i){let t;c.open(l.toUpperCase(),i),(t=et(a,r))&&Object.keys(t).forEach(e=>{c.setRequestHeader(e,t[e])}),c.send(h);let n=Object.assign({},r,{status:"uploading"});e.doChange(n)}}({doChange:O,xhrMap:C,onFinish:e.onFinish,onError:e.onError,isErrorState:e.isErrorState},a,t,{method:r,action:l,withCredentials:i,responseType:e.responseType,headers:n,data:o}))})}let D=(0,n.EW)(()=>{let{common:{cubicBezierEaseInOut:e},self:{draggerColor:t,draggerBorder:r,draggerBorderHover:l,itemColorHover:i,itemColorHoverError:n,itemTextColorError:o,itemTextColorSuccess:a,itemTextColor:s,itemIconColor:u,itemDisabledOpacity:d,lineHeight:c,borderRadius:h,fontSize:p,itemBorderImageCardError:f,itemBorderImageCard:g}}=v.value;return{"--n-bezier":e,"--n-border-radius":h,"--n-dragger-border":r,"--n-dragger-border-hover":l,"--n-dragger-color":t,"--n-font-size":p,"--n-item-color-hover":i,"--n-item-color-hover-error":n,"--n-item-disabled-opacity":d,"--n-item-icon-color":u,"--n-item-text-color":s,"--n-item-text-color-error":o,"--n-item-text-color-success":a,"--n-line-height":c,"--n-item-border-image-card-error":f,"--n-item-border-image-card":g}}),W=r?(0,d.R)("upload",void 0,D,e):void 0;return(0,n.Gt)(f.u,{mergedClsPrefixRef:t,mergedThemeRef:v,showCancelButtonRef:(0,n.lW)(e,"showCancelButton"),showDownloadButtonRef:(0,n.lW)(e,"showDownloadButton"),showRemoveButtonRef:(0,n.lW)(e,"showRemoveButton"),showRetryButtonRef:(0,n.lW)(e,"showRetryButton"),onRemoveRef:(0,n.lW)(e,"onRemove"),onDownloadRef:(0,n.lW)(e,"onDownload"),customDownloadRef:(0,n.lW)(e,"customDownload"),mergedFileListRef:A,triggerClassRef:(0,n.lW)(e,"triggerClass"),triggerStyleRef:(0,n.lW)(e,"triggerStyle"),shouldUseThumbnailUrlRef:(0,n.lW)(e,"shouldUseThumbnailUrl"),renderIconRef:(0,n.lW)(e,"renderIcon"),xhrMap:C,submit:U,doChange:O,showPreviewButtonRef:(0,n.lW)(e,"showPreviewButton"),onPreviewRef:(0,n.lW)(e,"onPreview"),getFileThumbnailUrlResolver:function(t){var r;if(t.thumbnailUrl)return t.thumbnailUrl;let{createThumbnailUrl:l}=e;return l?null!=(r=l(t.file,t))?r:t.url||"":t.url?t.url:t.file?function(e){return S(this,void 0,void 0,function*(){return yield new Promise(t=>{t(e.type&&_(e.type)?window.URL.createObjectURL(e):"")})})}(t.file):""},listTypeRef:(0,n.lW)(e,"listType"),dragOverRef:k,openOpenFileDialog:L,draggerInsideRef:B,handleFileAddition:j,mergedDisabledRef:b.mergedDisabledRef,maxReachedRef:T,fileListClassRef:(0,n.lW)(e,"fileListClass"),fileListStyleRef:(0,n.lW)(e,"fileListStyle"),abstractRef:(0,n.lW)(e,"abstract"),acceptRef:(0,n.lW)(e,"accept"),cssVarsRef:r?void 0:D,themeClassRef:null==W?void 0:W.themeClass,onRender:null==W?void 0:W.onRender,showTriggerRef:(0,n.lW)(e,"showTrigger"),imageGroupPropsRef:(0,n.lW)(e,"imageGroupProps"),mergedDirectoryDndRef:(0,n.EW)(()=>{var t;return null!=(t=e.directoryDnd)?t:e.directory}),onRetryRef:(0,n.lW)(e,"onRetry")}),Object.assign({mergedClsPrefix:t,draggerInsideRef:B,rtlEnabled:m,inputElRef:R,mergedTheme:v,dragOver:k,mergedMultiple:E,cssVars:r?void 0:D,themeClass:null==W?void 0:W.themeClass,onRender:null==W?void 0:W.onRender,handleFileInputChange:function(e){let t=e.target;j(t.files?Array.from(t.files).map(e=>({file:e,entry:null,source:"input"})):null,e),t.value=""}},{clear:()=>{w.value=[]},submit:U,openOpenFileDialog:L})},render(){var e,t;let{draggerInsideRef:r,mergedClsPrefix:l,$slots:i,directory:o,onRender:a}=this;if(i.default&&!this.abstract){let t=i.default()[0];(null==(e=null==t?void 0:t.type)?void 0:e[b.P])&&(r.value=!0)}let s=(0,n.h)("input",Object.assign({},this.inputProps,{ref:"inputElRef",type:"file",class:`${l}-upload-file-input`,accept:this.accept,multiple:this.mergedMultiple,onChange:this.handleFileInputChange,webkitdirectory:o||void 0,directory:o||void 0}));return this.abstract?(0,n.h)(n.FK,null,null==(t=i.default)?void 0:t.call(i),(0,n.h)(n.Im,{to:"body"},s)):(null==a||a(),(0,n.h)("div",{class:[`${l}-upload`,this.rtlEnabled&&`${l}-upload--rtl`,r.value&&`${l}-upload--dragger-inside`,this.dragOver&&`${l}-upload--drag-over`,this.themeClass],style:this.cssVars},s,this.showTrigger&&"image-card"!==this.listType&&(0,n.h)(Y,null,i),this.showFileList&&(0,n.h)(J,null,i)))}})},9682(e,t,r){r.d(t,{A:()=>a,P:()=>o});var l=r(90290),i=r(11601),n=r(90178);let o="__UPLOAD_DRAGGER__",a=(0,l.pM)({name:"UploadDragger",[o]:!0,setup(e,{slots:t}){let r=(0,l.WQ)(n.u,null);return r||(0,i.$8)("upload-dragger","`n-upload-dragger` must be placed inside `n-upload`."),()=>{let{mergedClsPrefixRef:{value:e},mergedDisabledRef:{value:i},maxReachedRef:{value:n}}=r;return(0,l.h)("div",{class:[`${e}-upload-dragger`,(i||n)&&`${e}-upload-dragger--disabled`]},t)}}})},90178(e,t,r){r.d(t,{u:()=>l});let l=(0,r(29794).D)("n-upload")}}]);