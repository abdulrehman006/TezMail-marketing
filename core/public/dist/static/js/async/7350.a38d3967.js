"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([["7350"],{28674(e,a,t){t.d(a,{DZ:()=>u,Ez:()=>o,Gt:()=>r,LN:()=>d,P5:()=>n,Se:()=>p,dz:()=>s});var l=t(85020);let{t:i}=t(46831).Ay.global,n=e=>l.K.get("/mailbox/list",{params:e}),s=e=>l.K.post("/mailbox/create",e,{fetchOptions:{loading:i("mailbox.api.loading.creating"),successMessage:!0}}),u=e=>l.K.post("/mailbox/batch_create",e,{fetchOptions:{loading:i("mailbox.api.loading.creating"),successMessage:!0}}),o=e=>l.K.post("/mailbox/update",e,{fetchOptions:{loading:i("mailbox.api.loading.updating"),successMessage:!0}}),r=e=>l.K.post("/mailbox/delete",e,{fetchOptions:{loading:i("mailbox.api.loading.deleting"),successMessage:!0}}),d=e=>l.K.post("/mailbox/export",e,{responseType:"blob",fetchOptions:{loading:i("mailbox.api.loading.exporting"),successMessage:!0}}),p=e=>l.K.post("/mailbox/import",e,{fetchOptions:{loading:i("mailbox.api.loading.importing"),successMessage:!0}})},24646(e,a,t){t.d(a,{T:()=>s});var l=t(12532),i=t(97786),n=t(46831);let s=()=>{let{t:e}=n.Ay.global,{copy:a,isSupported:t,copied:s}=(0,i.iDZ)({legacy:!0});return{copied:s,copyText:async function(i){let n=!(arguments.length>1)||void 0===arguments[1]||arguments[1];i?t.value?(await a(i),n&&l.QB.success(e("common.useCopy.success"))):l.QB.error(e("common.useCopy.failed")):l.QB.error(e("common.useCopy.noText"))}}}},80111(e,a,t){t.d(a,{u:()=>s});var l=t(22720),i=t(12532),n=t(90290);let s=e=>{let{params:a,fetchFn:t,useParams:s,loading:u=!0,immediate:o=!0,rowKey:r=e=>e.id}=e,d=(0,n.KR)(u),p=(0,n.KR)([]),c=(0,n.KR)(0),v=(0,n.KR)(a),m=(0,n.KR)([]),f=(0,l.Q0)(async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&(v.value.page=1),d.value=!0;try{let e=s?s(v.value):v.value,a=await t(e);(0,i.Gv)(a)&&(p.value=(0,i.cy)(a.list)?a.list:[],c.value=(0,i.Et)(a.total)?a.total:0)}finally{m.value=[],d.value=!1}},300),_=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return f(e)},b=e=>{v.value.page=e},h=e=>{v.value.page_size=e};return(0,n.sV)(()=>{o&&_()}),{tableData:p,tableTotal:c,tableKeys:m,tableParams:v,fetchTable:_,resetTable:()=>_(!0),tableProps:(0,n.EW)(()=>({rowKey:r,data:p.value,loading:d.value,checkedRowKeys:m.value,onUpdateCheckedRowKeys:e=>{m.value=e}})),batchProps:(0,n.EW)(()=>({rowKey:r,data:p.value,checkedRowKeys:m.value,onUpdateCheckedRowKeys:e=>{m.value=e}})),pageProps:(0,n.EW)(()=>({page:v.value.page,pageSize:v.value.page_size,itemCount:c.value,onUpdatePage:b,onUpdatePageSize:h}))}}},32966(e,a,t){t.d(a,{A:()=>s});var l=t(27546),i=t(90290);let n={class:"mr-4px"},s=(0,i.pM)({__name:"index",props:{href:{type:String,default:""},text:{type:String,default:""}},setup(e){let a=()=>{window.open(e.href)};return(t,s)=>{let u=l.Ay;return(0,i.uX)(),(0,i.Wv)(u,{text:"",onClick:a},{default:(0,i.k6)(()=>[(0,i.Lk)("span",n,(0,i.v_)(e.text||t.$t("common.actions.help")),1),s[0]||(s[0]=(0,i.Lk)("i",{class:"i-custom:help text-primary"},null,-1))]),_:1})}}})},74596(e,a,t){t.r(a),t.d(a,{default:()=>eF});var l=t(63919),i=t(23618),n=t(77625),s=t(32966),u=t(23141),o=t(45449),r=t(95403),d=t(51625),p=t(90290),c=t(12268),v=t(6463),m=t(16172),f=t(12532),_=t(3401);let b={class:"date-filters"},h={class:"w-120px"},k={class:"w-240px"},g=(0,p.pM)({__name:"index",props:(0,p.zz)({defaultType:{type:String,default:"today"}},{value:{},valueModifiers:{}}),emits:(0,p.zz)(["change"],["update:value"]),setup(e,a){let{emit:t}=a,l=(0,p.fn)(e,"value"),{t:i}=(0,_.s9)(),n=(0,p.KR)(e.defaultType),s=[{label:i("common.time.today"),value:"today"},{label:i("common.time.yesterday"),value:"yesterday"},{label:i("common.time.last7days"),value:"last7days"},{label:i("common.time.custom"),value:"custom"}],u=e=>{switch(e){case"today":l.value=(0,f.JZ)();break;case"yesterday":l.value=(0,f.JZ)((0,m.f)(new Date,-1));break;case"last7days":let a,i;a=new Date,i=(0,c.D)(a),l.value=[(0,v.o)((0,m.f)(a,-6)).getTime(),i.getTime()]}t("change")},o=e=>{let a=new Date,t=(0,m.f)(a,-30);return(0,v.o)(t).getTime()>e||(0,c.D)(a).getTime()<e},g=e=>{n.value="custom",l.value=[(0,v.o)(e[0]).getTime(),(0,c.D)(e[1]).getTime()],t("change")};return u(e.defaultType),(e,a)=>{let t=r.A,i=d.A;return(0,p.uX)(),(0,p.CE)("div",b,[(0,p.Lk)("div",h,[(0,p.bF)(t,{value:(0,p.R1)(n),"onUpdate:value":[a[0]||(a[0]=e=>(0,p.i9)(n)?n.value=e:null),u],options:s},null,8,["value"])]),(0,p.Lk)("div",k,[(0,p.bF)(i,{value:l.value,type:"daterange","is-date-disabled":o,"onUpdate:value":g},null,8,["value"])])])}}});var y=t(64901);let R=(0,y.default)(g,[["__scopeId","data-v-d1ebfb31"]]);var x=t(27546),w=t(23254),F=t(85684),A=t(80111),L=t(60045),$=t(85020);let{t:K}=t(46831).Ay.global,C=e=>$.K.get("/batch_mail/api/list",{params:e});var M=t(76628);let W={class:"flex gap-16px mb-24px"},S={class:"title"},T={class:"value"},E={class:"title"},U={class:"value"},j={class:"title"},P={class:"value"},O={class:"title"},z={class:"value"},X=(0,p.pM)({__name:"Overview",props:{time:{type:Object,default:()=>[0,0]}},setup(e,a){let{expose:t}=a,l=(0,p.KR)({total_send:0,avg_delivery_rate:0,avg_open_rate:0,avg_click_rate:0,avg_bounce_rate:0,avg_unsub_rate:0,total_unsubscribe:0}),i=(0,p.KR)(!1),n=async()=>{try{let a;i.value=!0;let t=await (a={start_time:Math.floor(e.time[0]/1e3),end_time:Math.floor(e.time[1]/1e3)},$.K.get("/batch_mail/api/overview_stats",{params:a}));(0,f.Gv)(t)&&(l.value=t)}finally{i.value=!1}};return t({getStats:n}),(0,p.sV)(()=>{n()}),(e,a)=>{let t=u.Ay,n=M.A;return(0,p.uX)(),(0,p.Wv)(n,{show:(0,p.R1)(i)},{default:(0,p.k6)(()=>[(0,p.Lk)("div",W,[(0,p.bF)(t,{class:"flex-1"},{default:(0,p.k6)(()=>[(0,p.Lk)("div",S,[a[0]||(a[0]=(0,p.Lk)("i",{class:"i-fa:paper-plane"},null,-1)),(0,p.Lk)("span",null,(0,p.v_)(e.$t("api.overview.totalSend")),1)]),(0,p.Lk)("div",T,(0,p.v_)((0,p.R1)(l).total_send),1)]),_:1}),(0,p.bF)(t,{class:"flex-1"},{default:(0,p.k6)(()=>[(0,p.Lk)("div",E,[a[1]||(a[1]=(0,p.Lk)("i",{class:"i-fa:envelope-open"},null,-1)),(0,p.Lk)("span",null,(0,p.v_)(e.$t("api.overview.avgOpenRate")),1)]),(0,p.Lk)("div",U,(0,p.v_)((0,p.R1)(l).avg_open_rate)+"%",1)]),_:1}),(0,p.bF)(t,{class:"flex-1"},{default:(0,p.k6)(()=>[(0,p.Lk)("div",j,[a[2]||(a[2]=(0,p.Lk)("i",{class:"i-fa:mouse-pointer"},null,-1)),(0,p.Lk)("span",null,(0,p.v_)(e.$t("api.overview.avgClickRate")),1)]),(0,p.Lk)("div",P,(0,p.v_)((0,p.R1)(l).avg_click_rate)+"%",1)]),_:1}),(0,p.bF)(t,{class:"flex-1"},{default:(0,p.k6)(()=>[(0,p.Lk)("div",O,[a[3]||(a[3]=(0,p.Lk)("i",{class:"i-fa:ban"},null,-1)),(0,p.Lk)("span",null,(0,p.v_)(e.$t("api.overview.avgBounceRate")),1)]),(0,p.Lk)("div",z,(0,p.v_)((0,p.R1)(l).avg_bounce_rate)+"%",1)]),_:1})])]),_:1},8,["show"])}}}),D=(0,y.default)(X,[["__scopeId","data-v-a4cff407"]]);var N=t(62606),q=t(24646);let G={class:"flex"},I={class:"w-0 flex-1 flex items-center"},B={class:"min-w-0"},H=(0,p.pM)({__name:"ApiKey",props:{value:{default:""}},setup(e){let{copyText:a}=(0,q.T)(),t=async()=>{a(`${e.value}`)};return(a,l)=>{let i=N.Ay;return(0,p.uX)(),(0,p.CE)("div",G,[(0,p.Lk)("div",I,[(0,p.Lk)("div",B,[(0,p.bF)(i,{class:"max-w-full",tooltip:{contentStyle:{maxWidth:"300px"}}},{default:(0,p.k6)(()=>[(0,p.eW)((0,p.v_)(e.value),1)]),_:1})]),(0,p.Lk)("div",{class:"ml-6px text-15px cursor-pointer",title:"Copy",onClick:t},[...l[0]||(l[0]=[(0,p.Lk)("i",{class:"i-mdi-content-copy"},null,-1)])])])])}}});var Q=t(13665),V=t(45679),Y=t(60801),Z=t(44301),J=t(75133),ee=t(11128),ea=t(26562),et=t(50272);let el={class:"flex-1"},ei=(0,p.pM)({__name:"ApiForm",setup(e){let{t:a}=(0,_.s9)(),t=(0,p.KR)(!1),l=(0,p.EW)(()=>t.value?a("api.form.title.edit"):a("api.form.title.add")),i=(0,p.rk)("formRef"),n=(0,p.Kh)({id:0,api_name:"",template_id:null,template_content:"",subject:"",domain:null,addresser:null,full_name:"",unsubscribe:1,active:1,ip_whitelist:""}),s={api_name:{required:!0,message:a("api.form.validation.apiNameRequired")},addresser:{required:!0,message:a("api.form.validation.addresserRequired")},full_name:{required:!0,message:a("market.task.edit.displayNamePlaceholder")},subject:{required:!0,message:a("market.task.edit.subjectPlaceholder")},template_id:{required:!0,message:a("api.form.validation.templateRequired")}},[u,r]=(0,L.h)({component:et.A}),d=e=>{r.setState({html:e}),r.open()},c=async()=>{let e=await (0,Z.tY)({id:`${n.template_id}`});(0,f.Gv)(e)&&(2==e.add_type&&e.chat_id?window.open(`/template/ai-template/${e.chat_id}`):(m.setState({isEdit:!0,row:e}),m.open()))},[v,m]=(0,L.h)({component:J.A,state:{isEdit:!0,refresh:async()=>{let e=await (0,Z.tY)({id:`${n.template_id}`});(0,f.Gv)(e)&&(n.template_content=e.html_content)},preview:e=>{d(e)}}}),[b,h]=(0,L.h)({onChangeState:e=>{if(e){let e=h.getState(),{row:a}=e;t.value=e.isEdit,a&&(n.id=a.id,n.api_name=a.api_name,n.template_id=a.template_id,n.domain=a.addresser.split("@")[1],n.subject=a.subject,n.addresser=a.addresser,n.full_name=a.full_name,n.unsubscribe=a.unsubscribe,n.active=a.active,n.ip_whitelist=a.ip_whitelist.join(","))}else n.id=0,n.api_name="",n.template_id=null,n.template_content="",n.subject="",n.addresser=null,n.full_name="",n.unsubscribe=1,n.active=1},onConfirm:async()=>{var e;await (null==(e=i.value)?void 0:e.validate());let a={api_name:n.api_name,template_id:n.template_id||0,subject:n.subject,addresser:n.addresser||"",full_name:n.full_name,unsubscribe:n.unsubscribe,active:n.active,ip_whitelist:n.ip_whitelist.split(",")};if(t.value){let e;await (e={...a,id:n.id},$.K.post("/batch_mail/api/update",e,{fetchOptions:{loading:K("api.loading.updating"),successMessage:!0}}))}else await $.K.post("/batch_mail/api/create",a,{fetchOptions:{loading:K("api.loading.creating"),successMessage:!0}});h.getState().refresh()}});return(e,a)=>{let t=o.A,r=Y.Ay,m=x.Ay,f=V.A,_=Q.A;return(0,p.uX)(),(0,p.Wv)((0,p.R1)(b),{title:(0,p.R1)(l),width:"520"},{default:(0,p.k6)(()=>[(0,p.bF)(_,{ref_key:"formRef",ref:i,model:(0,p.R1)(n),rules:s,class:"pt-12px"},{default:(0,p.k6)(()=>[(0,p.bF)(r,{label:e.$t("api.form.apiName"),path:"api_name"},{default:(0,p.k6)(()=>[(0,p.bF)(t,{value:(0,p.R1)(n).api_name,"onUpdate:value":a[0]||(a[0]=e=>(0,p.R1)(n).api_name=e),placeholder:e.$t("api.form.apiNamePlaceholder")},null,8,["value","placeholder"])]),_:1},8,["label"]),(0,p.bF)(r,{label:e.$t("market.task.edit.from"),path:"addresser"},{default:(0,p.k6)(()=>[(0,p.bF)(ee.A,{value:(0,p.R1)(n).addresser,"onUpdate:value":a[1]||(a[1]=e=>(0,p.R1)(n).addresser=e),domain:(0,p.R1)(n).domain,"onUpdate:domain":a[2]||(a[2]=e=>(0,p.R1)(n).domain=e),name:(0,p.R1)(n).full_name,"onUpdate:name":a[3]||(a[3]=e=>(0,p.R1)(n).full_name=e)},null,8,["value","domain","name"])]),_:1},8,["label"]),(0,p.bF)(r,{label:e.$t("market.task.edit.displayName"),path:"full_name"},{default:(0,p.k6)(()=>[(0,p.bF)(t,{value:(0,p.R1)(n).full_name,"onUpdate:value":a[4]||(a[4]=e=>(0,p.R1)(n).full_name=e),placeholder:e.$t("market.task.edit.displayNamePlaceholder")},null,8,["value","placeholder"])]),_:1},8,["label"]),(0,p.bF)(r,{label:e.$t("market.task.edit.subject"),path:"subject"},{default:(0,p.k6)(()=>[(0,p.bF)(t,{value:(0,p.R1)(n).subject,"onUpdate:value":a[5]||(a[5]=e=>(0,p.R1)(n).subject=e),placeholder:e.$t("market.task.edit.subjectPlaceholder")},null,8,["value","placeholder"])]),_:1},8,["label"]),(0,p.bF)(r,{label:e.$t("market.task.edit.template"),path:"template_id"},{default:(0,p.k6)(()=>[(0,p.Lk)("div",el,[(0,p.bF)(ea.A,{value:(0,p.R1)(n).template_id,"onUpdate:value":a[6]||(a[6]=e=>(0,p.R1)(n).template_id=e),content:(0,p.R1)(n).template_content,"onUpdate:content":a[7]||(a[7]=e=>(0,p.R1)(n).template_content=e)},null,8,["value","content"])]),(0,p.bF)(m,{text:"",type:"primary",class:"ml-12px",onClick:c},{default:(0,p.k6)(()=>[(0,p.eW)((0,p.v_)(e.$t("common.actions.edit")),1)]),_:1}),(0,p.bF)(m,{text:"",type:"primary",class:"ml-12px",onClick:a[8]||(a[8]=e=>d((0,p.R1)(n).template_content))},{default:(0,p.k6)(()=>[(0,p.eW)((0,p.v_)(e.$t("common.actions.preview")),1)]),_:1})]),_:1},8,["label"]),(0,p.bF)(r,{label:e.$t("market.task.edit.unsubscribeLink")},{default:(0,p.k6)(()=>[(0,p.bF)(f,{value:(0,p.R1)(n).unsubscribe,"onUpdate:value":a[9]||(a[9]=e=>(0,p.R1)(n).unsubscribe=e),"checked-value":1,"unchecked-value":0},null,8,["value"])]),_:1},8,["label"]),(0,p.bF)(r,{label:e.$t("api.form.status")},{default:(0,p.k6)(()=>[(0,p.bF)(f,{value:(0,p.R1)(n).active,"onUpdate:value":a[10]||(a[10]=e=>(0,p.R1)(n).active=e),"checked-value":1,"unchecked-value":0},null,8,["value"])]),_:1},8,["label"]),(0,p.bF)(r,{label:e.$t("api.form.ipWhitelist")},{default:(0,p.k6)(()=>[(0,p.bF)(t,{value:(0,p.R1)(n).ip_whitelist,"onUpdate:value":a[11]||(a[11]=e=>(0,p.R1)(n).ip_whitelist=e),placeholder:e.$t("api.form.ipWhitelistPlaceholder")},null,8,["value","placeholder"])]),_:1},8,["label"]),(0,p.bF)((0,p.R1)(v)),(0,p.bF)((0,p.R1)(u))]),_:1},8,["model"])]),_:1},8,["title"])}}});var en=t(60023),es=t(19878);t(77353),t(62200);let eu={class:"flex items-center gap-16px w-full"},eo=["innerHTML"],er=(0,p.pM)({__name:"index",props:{code:{type:String,default:""},language:{type:String,default:"shell"}},setup(e){let a=(0,p.EW)(()=>`\`\`\`${e.language}
${e.code}
\`\`\``),t=(0,p.EW)(()=>en.xI.parse(a.value)),{copyText:l}=(0,q.T)(),i=()=>{l(e.code)};return en.xI.use({extensions:[{name:"highlight",level:"block",start(e){var a;return null==(a=e.match(/^```/))?void 0:a.index},tokenizer(e){let a=/^```([^\n]*?)\n([\s\S]*?)\n```/.exec(e);if(a)return{type:"highlight",raw:a[0],lang:a[1].trim(),code:a[2]}},renderer(e){let{lang:a,code:t}=e;if(a&&es.A.getLanguage(a)){let e=es.A.highlight(t,{language:a}).value;return`<pre><code class="hljs language-${a}">${e}</code></pre>`}return`<pre><code>${t}</code></pre>`}}]}),(e,a)=>{let l=x.Ay;return(0,p.uX)(),(0,p.CE)("div",eu,[(0,p.Lk)("div",{class:"markdown-body flex-1 w-0",innerHTML:(0,p.R1)(t)},null,8,eo),(0,p.bF)(l,{onClick:i},{default:(0,p.k6)(()=>[(0,p.eW)((0,p.v_)(e.$t("common.actions.copy")),1)]),_:1})])}}}),ed={class:"flex-1 mr-10px"},ep=(0,p.pM)({__name:"ApiTest",setup(e){let{t:a}=(0,_.s9)(),t=(0,p.KR)(""),l=(0,p.EW)(()=>t.value.replaceAll("$email",i.recipient)),i=(0,p.Kh)({recipient:""}),n={recipient:{required:!0,message:a("market.task.edit.testEmailPlaceholder")}},[s,u]=(0,L.h)({onChangeState:e=>{if(e){let{row:e}=u.getState();e&&(t.value=`curl -k -X POST '${e.server_addresser}' \\
-H 'X-API-Key: ${e.api_key}' \\
-H 'Content-Type: application/json' \\
-d '{
	"recipient": "$email"
}'`)}else i.recipient=""}});return(e,a)=>{let t=o.A,u=Y.Ay,r=Q.A;return(0,p.uX)(),(0,p.Wv)((0,p.R1)(s),{title:"Test API",width:"720",footer:!1},{default:(0,p.k6)(()=>[(0,p.bF)(r,{ref:"formRef",model:(0,p.R1)(i),rules:n,class:"pt-12px"},{default:(0,p.k6)(()=>[(0,p.bF)(u,{label:e.$t("market.task.edit.testEmail"),path:"recipient"},{default:(0,p.k6)(()=>[(0,p.Lk)("div",ed,[(0,p.bF)(t,{value:(0,p.R1)(i).recipient,"onUpdate:value":a[0]||(a[0]=e=>(0,p.R1)(i).recipient=e),placeholder:e.$t("market.task.edit.testEmailPlaceholder")},null,8,["value","placeholder"])])]),_:1},8,["label"]),(0,p.bF)(u,{label:"Command"},{default:(0,p.k6)(()=>[(0,p.bF)(er,{code:(0,p.R1)(l),language:"bash"},null,8,["code"])]),_:1})]),_:1},8,["model"])]),_:1})}}}),ec={class:"p-24px"},ev={class:"bt-title"},em={class:"flex flex-wrap items-center gap-16px"},ef={class:"flex items-center whitespace-pre"},e_={class:"text-default"},eb={class:"flex items-center whitespace-pre"},eh={class:"text-default"},ek={class:"w-120px"},eg={class:"flex items-center whitespace-pre"},ey={class:"text-default"},eR={class:"w-200px"},ex={class:"flex gap-8px"};function ew(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!(0,p.vv)(e)}let eF=(0,p.pM)({__name:"index",setup(e){let{t:a}=(0,_.s9)(),t=(0,p.rk)("overviewRef"),d=[{label:a("api.statusOptions.all"),value:-1},{label:a("api.statusOptions.active"),value:1},{label:a("api.statusOptions.inactive"),value:0}],c=(0,p.KR)([{key:"api_name",title:a("api.columns.apiName"),maxWidth:120,render:e=>(0,p.bF)(x.Ay,{type:"primary",text:!0,onClick:()=>{W(e)}},{default:()=>[e.api_name]})},{key:"api_key",title:a("api.columns.apiKey"),width:"28%",maxWidth:160,render:e=>(0,p.bF)(H,{class:"w-94%",value:e.api_key},null)},{key:"send_count",title:a("api.columns.sendCount"),width:"9%",maxWidth:100},{key:"open_rate",title:a("api.columns.openRate"),width:"9%",maxWidth:100,render:e=>`${e.open_rate}%`},{key:"click_rate",title:a("api.columns.clickRate"),width:"9%",maxWidth:100,render:e=>`${e.click_rate}%`},{key:"bounce_rate",title:a("api.columns.bounceRate"),width:"9%",maxWidth:100,render:e=>`${e.bounce_rate}%`},{key:"active",title:a("api.columns.status"),width:"8%",maxWidth:80,render:e=>(0,p.bF)(w.Ay,{size:"small",type:e.active?"primary":"warning",bordered:!1},{default:()=>[e.active?a("api.statusLabels.active"):a("api.statusLabels.inactive")]})},{title:a("common.columns.actions"),key:"actions",align:"right",width:160,render:e=>{let t,l,i;return(0,p.bF)(F.A,{inline:!0},{default:()=>[(0,p.bF)(x.Ay,{type:"primary",text:!0,onClick:()=>{E(e)}},ew(t=a("common.actions.test"))?t:{default:()=>[t]}),(0,p.bF)(x.Ay,{type:"primary",text:!0,onClick:()=>{W(e)}},ew(l=a("common.actions.edit"))?l:{default:()=>[l]}),(0,p.bF)(x.Ay,{type:"error",text:!0,onClick:()=>{U(e)}},ew(i=a("common.actions.delete"))?i:{default:()=>[i]})]})}}]),{tableParams:v,tableProps:m,pageProps:b,fetchTable:h}=(0,A.u)({params:{page:1,page_size:10,keyword:"",active:-1,time_range:[0,0]},immediate:!1,fetchFn:C,useParams:e=>({page:e.page,page_size:e.page_size,keyword:e.keyword,active:e.active,start_time:Math.floor(e.time_range[0]/1e3),end_time:Math.floor(e.time_range[1]/1e3)})}),k=async()=>{var e;null==(e=t.value)||e.getStats(),h()},[g,y]=(0,L.h)({component:ei,state:{isEdit:!1,refresh:h}}),M=()=>{y.setState({row:null,isEdit:!1}),y.open()},W=e=>{y.setState({row:e,isEdit:!0}),y.open()},[S,T]=(0,L.h)({component:ep,state:{row:null}}),E=e=>{T.setState({row:e}),T.open()},U=e=>{(0,f.lJ)({title:a("api.confirmDelete.title",{apiName:e.api_name}),content:a("api.confirmDelete.content"),onConfirm:async()=>{let a;await (a={id:e.id},$.K.post("/batch_mail/api/delete",a,{fetchOptions:{loading:K("api.loading.deleting"),successMessage:!0}})),h()}})};return(0,p.sV)(()=>{h()}),(e,a)=>{let f=r.A,_=o.A,y=u.Ay,w=s.A,F=n.A,A=i.A,L=l.A;return(0,p.uX)(),(0,p.CE)("div",ec,[(0,p.Lk)("div",ev,(0,p.v_)(e.$t("api.title")),1),(0,p.bF)(y,{class:"mb-24px","content-style":{padding:"16px 24px"}},{default:(0,p.k6)(()=>[(0,p.Lk)("div",em,[(0,p.Lk)("div",ef,[(0,p.Lk)("span",e_,(0,p.v_)(e.$t("api.timeRange")),1),(0,p.bF)(R,{value:(0,p.R1)(v).time_range,"onUpdate:value":a[0]||(a[0]=e=>(0,p.R1)(v).time_range=e),"default-type":"last7days",onChange:k},null,8,["value"])]),(0,p.Lk)("div",eb,[(0,p.Lk)("span",eh,(0,p.v_)(e.$t("api.status")),1),(0,p.Lk)("div",ek,[(0,p.bF)(f,{value:(0,p.R1)(v).active,"onUpdate:value":[a[1]||(a[1]=e=>(0,p.R1)(v).active=e),a[2]||(a[2]=()=>(0,p.R1)(h)(!0))],options:d},null,8,["value"])])]),(0,p.Lk)("div",eg,[(0,p.Lk)("span",ey,(0,p.v_)(e.$t("api.search")),1),(0,p.Lk)("div",eR,[(0,p.bF)(_,{value:(0,p.R1)(v).keyword,"onUpdate:value":a[3]||(a[3]=e=>(0,p.R1)(v).keyword=e),placeholder:e.$t("api.searchPlaceholder"),onKeyup:a[4]||(a[4]=(0,p.jR)(()=>(0,p.R1)(h)(!0),["enter"]))},null,8,["value","placeholder"])])]),(0,p.Lk)("div",ex,[(0,p.bF)((0,p.R1)(x.Ay),{type:"primary",ghost:"",onClick:a[5]||(a[5]=()=>(0,p.R1)(h)(!0))},{default:(0,p.k6)(()=>[(0,p.eW)((0,p.v_)(e.$t("common.actions.refresh")),1)]),_:1}),(0,p.bF)((0,p.R1)(x.Ay),{type:"primary",ghost:"",onClick:k},{default:(0,p.k6)(()=>[(0,p.eW)((0,p.v_)(e.$t("api.refreshData")),1)]),_:1})])])]),_:1}),(0,p.bF)(D,{ref_key:"overviewRef",ref:t,time:(0,p.R1)(v).time_range},null,8,["time"]),(0,p.bF)(L,null,{toolsLeft:(0,p.k6)(()=>[(0,p.bF)((0,p.R1)(x.Ay),{type:"primary",onClick:M},{default:(0,p.k6)(()=>[(0,p.eW)((0,p.v_)(e.$t("api.createNew")),1)]),_:1}),(0,p.bF)(w,{href:"https://www.billionmail.com/start/api_mail_guide.html",text:e.$t("common.actions.help")},null,8,["text"])]),table:(0,p.k6)(()=>[(0,p.bF)(F,(0,p.v6)((0,p.R1)(m),{columns:(0,p.R1)(c)}),null,16,["columns"])]),pageRight:(0,p.k6)(()=>[(0,p.bF)(A,(0,p.v6)((0,p.R1)(b),{onRefresh:(0,p.R1)(h)}),null,16,["onRefresh"])]),modal:(0,p.k6)(()=>[(0,p.bF)((0,p.R1)(g)),(0,p.bF)((0,p.R1)(S))]),_:1})])}}})},11128(e,a,t){t.d(a,{A:()=>d});var l=t(95403),i=t(90290),n=t(12532),s=t(22392),u=t(28674);let o={class:"flex-1"},r={class:"flex-1 ml-10px"},d=(0,i.pM)({__name:"FromSelect",props:{value:{},valueModifiers:{},name:{},nameModifiers:{},domain:{},domainModifiers:{}},emits:["update:value","update:name","update:domain"],setup(e){let a=(0,i.fn)(e,"value"),t=(0,i.fn)(e,"name"),d=(0,i.KR)(!1),p=(0,i.fn)(e,"domain"),c=(0,i.KR)([]),v=(0,i.KR)([]),m=(0,i.EW)(()=>v.value.filter(e=>e.domain===p.value).map(e=>({label:e.username,value:e.username,data:e}))),f=async()=>{await (0,i.dY)(),m.value.length>0?(a.value=m.value[0].value,_(a.value,m.value[0])):(a.value=null,t.value="")},_=(e,a)=>{let{data:l}=a;(0,n.Gv)(l)&&(t.value=l.full_name)},b=async()=>{let e=await (0,s.aV)();if((0,n.cy)(e)&&(c.value=e.map(e=>({label:e.domain,value:e.domain})),!p.value&&e.length>0)){let a=e.filter(e=>e.default);a.length>0?p.value=a[0].domain:p.value=e[0].domain}},h=async()=>{let e=await (0,u.P5)({page:1,page_size:1e3,domain:""});(0,n.Gv)(e)&&(v.value=e.list)};return(async()=>{try{d.value=!0,await h(),await b(),await (0,i.dY)(),null===a.value?f():a.value&&(p.value=a.value.split("@")[1])}finally{d.value=!1}})(),(e,t)=>{let n=l.A;return(0,i.uX)(),(0,i.CE)(i.FK,null,[(0,i.Lk)("div",o,[(0,i.bF)(n,{value:p.value,"onUpdate:value":[t[0]||(t[0]=e=>p.value=e),f],loading:(0,i.R1)(d),options:(0,i.R1)(c)},null,8,["value","loading","options"])]),(0,i.Lk)("div",r,[(0,i.bF)(n,{value:a.value,"onUpdate:value":[t[1]||(t[1]=e=>a.value=e),_],loading:(0,i.R1)(d),options:(0,i.R1)(m),filterable:!0},null,8,["value","loading","options"])])],64)}}})},26562(e,a,t){t.d(a,{A:()=>u});var l=t(95403),i=t(90290),n=t(12532),s=t(44301);let u=(0,i.pM)({__name:"TemplateSelect",props:{value:{},valueModifiers:{},content:{},contentModifiers:{}},emits:(0,i.zz)(["listReady"],["update:value","update:content"]),setup(e,a){let{emit:t}=a,u=(0,i.fn)(e,"value"),o=(0,i.fn)(e,"content"),r=(0,i.KR)(!1),d=(0,i.KR)([]),p=(e,a)=>{let{data:t}=a;(0,n.Gv)(t)&&(o.value=t.html_content)};return(async()=>{try{r.value=!0;let e=await (0,s.UT)();if((0,n.cy)(e)){if(d.value=e.map(e=>({label:e.temp_name,value:e.id,data:e})),null===u.value)u.value=e[0].id,o.value=e[0].html_content;else{let a=e.find(e=>e.id===u.value);a&&(o.value=a.html_content)}t("listReady",e)}}finally{r.value=!1}})(),(e,a)=>{let t=l.A;return(0,i.uX)(),(0,i.Wv)(t,{value:u.value,"onUpdate:value":[a[0]||(a[0]=e=>u.value=e),p],loading:(0,i.R1)(r),filterable:!0,options:(0,i.R1)(d)},null,8,["value","loading","options"])}}})},50272(e,a,t){t.d(a,{A:()=>s});var l=t(45935),i=t(90290),n=t(60045);let s=(0,i.pM)({__name:"TemplatePreview",setup(e){let a=(0,i.KR)(""),[t,s]=(0,n.h)({onChangeState:e=>{e&&(a.value=s.getState().html||"")}});return(e,n)=>{let s=l.A;return(0,i.uX)(),(0,i.Wv)((0,i.R1)(t),{title:e.$t("market.template.preview.title"),width:"820",footer:!1},{default:(0,i.k6)(()=>[(0,i.bF)(s,{height:580,value:(0,i.R1)(a)},null,8,["value"])]),_:1},8,["title"])}}})}}]);