"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([["4291"],{3733(e,t,a){a.d(t,{GV:()=>c,JT:()=>v,Ni:()=>p,d2:()=>u,e:()=>g,oq:()=>o,q3:()=>i,qD:()=>d,vW:()=>r,wj:()=>n});var l=a(85020);let{t:s}=a(46831).Ru.global,o=e=>l.K.get("/contact/group/list",{params:e}),u=()=>l.K.get("/contact/group/all"),i=e=>l.K.get("/contact/group/info",{params:e}),n=e=>l.K.post("/contact/group/create",e,{fetchOptions:{loading:s("contacts.group.loading.createGroup"),successMessage:!0}}),r=e=>l.K.post("/contact/group/update",e,{fetchOptions:{loading:s("contacts.group.loading.updateGroup"),successMessage:!0}}),p=e=>l.K.post("/contact/group/delete",e,{fetchOptions:{loading:s("contacts.group.loading.deleteGroup"),successMessage:!0}}),c=e=>l.K.post("/contact/group/tag_contact_count",e),d=e=>l.K.post("/contact/group/export",e,{responseType:"blob",fetchOptions:{loading:s("contacts.group.loading.exportGroup"),successMessage:!0}}),g=e=>l.K.post("/contact/group/update",e,{fetchOptions:{loading:s("contacts.group.loading.saveSettings"),successMessage:!0}}),v=e=>l.K.post("/contact/group/update_unsubscribe",e,{fetchOptions:{loading:s("contacts.group.loading.saveSettings"),successMessage:!0}})},80111(e,t,a){a.d(t,{u:()=>u});var l=a(22720),s=a(12532),o=a(90290);let u=e=>{let{params:t,fetchFn:a,useParams:u,loading:i=!0,immediate:n=!0,rowKey:r=e=>e.id}=e,p=(0,o.KR)(i),c=(0,o.KR)([]),d=(0,o.KR)(0),g=(0,o.KR)(t),v=(0,o.KR)([]),f=(0,l.Q0)(async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&(g.value.page=1),p.value=!0;try{let e=u?u(g.value):g.value,t=await a(e);(0,s.Gv)(t)&&(c.value=(0,s.cy)(t.list)?t.list:[],d.value=(0,s.Et)(t.total)?t.total:0)}finally{v.value=[],p.value=!1}},300),m=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return f(e)},h=e=>{g.value.page=e},k=e=>{g.value.page_size=e};return(0,o.sV)(()=>{n&&m()}),{tableData:c,tableTotal:d,tableKeys:v,tableParams:g,fetchTable:m,resetTable:()=>m(!0),tableProps:(0,o.EW)(()=>({rowKey:r,data:c.value,loading:p.value,checkedRowKeys:v.value,onUpdateCheckedRowKeys:e=>{v.value=e}})),batchProps:(0,o.EW)(()=>({rowKey:r,data:c.value,checkedRowKeys:v.value,onUpdateCheckedRowKeys:e=>{v.value=e}})),pageProps:(0,o.EW)(()=>({page:g.value.page,pageSize:g.value.page_size,itemCount:d.value,onUpdatePage:h,onUpdatePageSize:k}))}}},63114(e,t,a){a.d(t,{Gw:()=>r,Hh:()=>p,Tn:()=>o,VZ:()=>i,_R:()=>n,cl:()=>u});var l=a(85020);let{t:s}=a(46831).Ru.global,o=e=>l.K.get("/tags/list",{params:e}),u=e=>l.K.get("/tags/all",{params:e}),i=e=>l.K.post("/tags/create",e,{fetchOptions:{loading:s("contacts.tags.loading.creating"),successMessage:!0}}),n=e=>l.K.post("/tags/delete",e,{fetchOptions:{loading:s("contacts.tags.loading.deleting"),successMessage:!0}}),r=e=>l.K.post("/tags/update",e,{fetchOptions:{loading:s("contacts.tags.loading.updating"),successMessage:!0}}),p=e=>l.K.post("/tags/batch_contacts",e,{fetchOptions:{loading:s("contacts.tags.loading.bulkSetting"),successMessage:!0}})},90216(e,t,a){a.d(t,{A:()=>o});var l=a(45449),s=a(90290);let o=(0,s.pM)({__name:"index",props:(0,s.zz)({width:{default:240},prefix:{type:Boolean,default:!1}},{value:{default:""},valueModifiers:{}}),emits:(0,s.zz)(["search"],["update:value"]),setup(e,t){let{expose:a,emit:o}=t,u=(0,s.KR)(null),i=(0,s.fn)(e,"value"),n=()=>{o("search",i.value)};return a({focus:()=>{var e;null==(e=u.value)||e.focus()}}),(t,a)=>{let o=l.A;return(0,s.uX)(),(0,s.Wv)(o,(0,s.v6)({ref_key:"inputRef",ref:u,value:i.value,"onUpdate:value":a[0]||(a[0]=e=>i.value=e)},t.$attrs,{class:"bt-search",style:{width:`${e.width}px`},onKeyup:(0,s.jR)(n,["enter"])}),(0,s.eX)({_:2},[e.prefix?{name:"prefix",fn:(0,s.k6)(()=>[(0,s.Lk)("div",{class:"flex items-center cursor-pointer",onClick:n},[...a[1]||(a[1]=[(0,s.Lk)("i",{class:"i-mdi-search text-16px"},null,-1)])])]),key:"0"}:void 0,e.prefix?void 0:{name:"suffix",fn:(0,s.k6)(()=>[(0,s.Lk)("div",{class:"flex items-center cursor-pointer",onClick:n},[...a[2]||(a[2]=[(0,s.Lk)("i",{class:"i-mdi-search text-16px"},null,-1)])])]),key:"1"}]),1040,["value","style"])}}})},28391(e,t,a){a.d(t,{A:()=>i});var l=a(23995),s=a(27546),o=a(90290);let u={class:"leading-22px text-13px text-desc text-center"},i=(0,o.pM)({__name:"index",setup(e){let t=()=>{window.open("https://github.com/aaPanel/BillionMail/issues")},a=()=>{window.open("https://github.com/aaPanel/BillionMail")};return(e,i)=>{let n=s.Ay,r=(0,o.g2)("i18n-t"),p=l.A;return(0,o.uX)(),(0,o.Wv)(p,null,{default:(0,o.k6)(()=>[(0,o.Lk)("div",u,[(0,o.bF)(r,{tag:"span",scope:"global",keypath:"components.tableHelp.text1"},{issues:(0,o.k6)(()=>[(0,o.bF)(n,{class:"text-13px",type:"primary",text:"",onClick:t},{default:(0,o.k6)(()=>[...i[0]||(i[0]=[(0,o.Lk)("span",null,"Issues",-1),(0,o.Lk)("i",{class:"i-mdi:arrow-right ml-1px"},null,-1)])]),_:1})]),star:(0,o.k6)(()=>[(0,o.bF)(n,{class:"text-13px",type:"primary",text:"",onClick:a},{default:(0,o.k6)(()=>[...i[1]||(i[1]=[(0,o.eW)(" Star ",-1),(0,o.Lk)("i",{class:"i-mdi:arrow-right ml-1px"},null,-1)])]),_:1})]),_:1}),i[2]||(i[2]=(0,o.Lk)("br",null,null,-1)),(0,o.Lk)("span",null,(0,o.v_)(e.$t("components.tableHelp.text2")),1)])]),_:1})}}})},63919(e,t,a){a.d(t,{A:()=>o});var l=a(85684),s=a(90290);let o=(0,s.pM)({__name:"index",setup(e){let t=!!(0,s.Ht)().toolsLeft,a=!!(0,s.Ht)().toolsRight,o=!!(0,s.Ht)().pageLeft||!!(0,s.Ht)().pageRight;return(e,u)=>{let i=l.A;return(0,s.uX)(),(0,s.CE)("div",null,[t||a?((0,s.uX)(),(0,s.Wv)(i,{key:0,class:"items-center mb-12px",justify:"space-between"},{default:(0,s.k6)(()=>[(0,s.bF)(i,{class:"items-center",size:12},{default:(0,s.k6)(()=>[(0,s.RG)(e.$slots,"toolsLeft")]),_:3}),(0,s.bF)(i,{class:"items-center",size:12},{default:(0,s.k6)(()=>[(0,s.RG)(e.$slots,"toolsRight")]),_:3})]),_:3})):(0,s.Q3)("",!0),(0,s.RG)(e.$slots,"table"),(0,s.R1)(o)?((0,s.uX)(),(0,s.Wv)(i,{key:1,class:"items-center mt-12px",justify:"space-between"},{default:(0,s.k6)(()=>[(0,s.Lk)("div",null,[(0,s.RG)(e.$slots,"pageLeft")]),(0,s.bF)(i,null,{default:(0,s.k6)(()=>[(0,s.RG)(e.$slots,"pageRight")]),_:3})]),_:3})):(0,s.Q3)("",!0),(0,s.RG)(e.$slots,"modal")])}}})},23618(e,t,a){a.d(t,{A:()=>i});var l=a(24259),s=a(90290),o=a(12532);let u={class:"ml-8px text-14px"},i=(0,s.pM)({__name:"index",props:(0,s.zz)({storeKey:{default:""},pageSizes:{default:()=>[10,20,50,100]},showTotal:{type:Boolean,default:!0},showSizePicker:{type:Boolean,default:!0},showQuickJumper:{type:Boolean,default:!0},onUpdatePage:{}},{page:{},pageModifiers:{},pageSize:{},pageSizeModifiers:{}}),emits:(0,s.zz)(["refresh"],["update:page","update:pageSize"]),setup(e,t){let{emit:a}=t,i=(0,s.EW)(()=>{let{storeKey:t}=e;return t?`${t}-page`:""}),n=(0,s.fn)(e,"page"),r=(0,s.fn)(e,"pageSize"),p=t=>{var l;null==(l=e.onUpdatePage)||l.call(e,t),a("refresh")},c=t=>{var l;n.value=1,null==(l=e.onUpdatePage)||l.call(e,1),d(t),a("refresh")},d=e=>{i.value&&(0,o.ZB)(i.value,String(e))};if(i.value){let e=(0,o.Lg)(i.value);e&&(r.value=(0,o.WZ)(e))}return(t,a)=>{let o=l.A;return(0,s.uX)(),(0,s.Wv)(o,(0,s.v6)(t.$attrs,{page:n.value,"onUpdate:page":[a[0]||(a[0]=e=>n.value=e),p],"page-size":r.value,"onUpdate:pageSize":[a[1]||(a[1]=e=>r.value=e),c],"show-size-picker":e.showSizePicker,"show-quick-jumper":e.showQuickJumper,"page-sizes":e.pageSizes,"display-order":["pages","size-picker","quick-jumper"]}),(0,s.eX)({_:2},[e.showTotal?{name:"suffix",fn:(0,s.k6)(e=>{let{itemCount:t}=e;return[(0,s.Lk)("span",u," Total "+(0,s.v_)(t),1)]}),key:"0"}:void 0]),1040,["page","page-size","show-size-picker","show-quick-jumper","page-sizes"])}}})},2429(e,t,a){a.d(t,{A:()=>n});var l=a(95403),s=a(90290),o=a(12532),u=a(3733),i=a(3401);let n=(0,s.pM)({__name:"GroupSelect",props:(0,s.zz)({all:{type:Boolean,default:!1}},{value:{},valueModifiers:{}}),emits:["update:value"],setup(e){let t=(0,s.fn)(e,"value"),{t:a}=(0,i.s9)(),n=(0,s.KR)([]),r=(0,s.KR)(!1);return(async()=>{try{r.value=!0;let l=await (0,u.d2)();(0,o.Gv)(l)&&(n.value=l.list.map(e=>({label:e.name,value:e.id})),(null===t.value||void 0===t.value)&&l.list.length>0&&(t.value=l.list[0].id),e.all&&n.value.unshift({label:a("common.all.text"),value:0}))}finally{r.value=!1}})(),(e,a)=>{let o=l.A;return(0,s.uX)(),(0,s.Wv)(o,{value:t.value,"onUpdate:value":a[0]||(a[0]=e=>t.value=e),loading:(0,s.R1)(r),options:(0,s.R1)(n)},null,8,["value","loading","options"])}}})},34020(e,t,a){a.d(t,{A:()=>c});var l=a(13665),s=a(60801),o=a(45449),u=a(90290),i=a(60045),n=a(63114),r=a(2429),p=a(3401);let c=(0,u.pM)({__name:"TagForm",setup(e){let{t}=(0,p.s9)(),a=(0,u.KR)(!1),c=(0,u.EW)(()=>a.value?t("contacts.tags.form.title.edit"):t("contacts.tags.form.title.create")),d=(0,u.rk)("formRef"),g=(0,u.KR)(0),v=(0,u.Kh)({name:"",group_id:null}),f=(0,u.EW)(()=>({name:{required:!0,trigger:["blur","input"],validator:()=>!!v.name||Error(t("contacts.tags.form.validation.nameRequired"))},group_id:{required:!0,trigger:["change"],validator:()=>!!v.group_id||Error(t("contacts.tags.form.validation.groupRequired"))}})),[m,h]=(0,i.h)({onChangeState:e=>{if(e){let e=h.getState();a.value=e.isEdit,e.isEdit&&e.row?(g.value=e.row.id,v.name=e.row.name,v.group_id=e.row.group_id):v.group_id=e.groupId||null}else g.value=0,v.name="",v.group_id=null},onConfirm:async()=>{var e;await (null==(e=d.value)?void 0:e.validate()),a.value?await (0,n.Gw)({id:g.value,name:v.name}):await (0,n.VZ)({name:v.name,group_id:v.group_id?v.group_id:0});let{refresh:t}=h.getState();t()}});return(e,i)=>{let n=o.A,p=s.Ay,g=l.A;return(0,u.uX)(),(0,u.Wv)((0,u.R1)(m),{title:(0,u.R1)(c),width:440},{default:(0,u.k6)(()=>[(0,u.bF)(g,{ref_key:"formRef",ref:d,class:"pt-16px",model:(0,u.R1)(v),rules:(0,u.R1)(f)},{default:(0,u.k6)(()=>[(0,u.bF)(p,{label:(0,u.R1)(t)("contacts.tags.form.fields.name"),path:"name"},{default:(0,u.k6)(()=>[(0,u.bF)(n,{value:(0,u.R1)(v).name,"onUpdate:value":i[0]||(i[0]=e=>(0,u.R1)(v).name=e)},null,8,["value"])]),_:1},8,["label"]),(0,u.bF)(p,{label:(0,u.R1)(t)("contacts.tags.form.fields.group"),path:"group_id"},{default:(0,u.k6)(()=>[(0,u.bF)(r.A,{value:(0,u.R1)(v).group_id,"onUpdate:value":i[1]||(i[1]=e=>(0,u.R1)(v).group_id=e),disabled:(0,u.R1)(a)},null,8,["value","disabled"])]),_:1},8,["label"])]),_:1},8,["model","rules"])]),_:1},8,["title"])}}})}}]);