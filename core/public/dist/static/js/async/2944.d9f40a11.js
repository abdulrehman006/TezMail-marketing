"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([["2944"],{16634:function(e,t,a){a.d(t,{Ao:()=>o,mL:()=>r,uL:()=>n});var i=a(34541),l=a(42205);let n={fetchOptions:{loading:"Loading... Please wait.",successMessage:!0}};async function o(e){let{legal_company_name:t,web_site:a,company_profile:n,email:o,phone:r,support_url:u,hasGotCompanyProfile:s}=(0,l.J)();if(!s.value)try{let l=await i.e.post("/askai/project/get_company_profile",{domain:e});t.value=l.legal_company_name,a.value=l.web_site,n.value=l.company_profile,o.value=l.email,r.value=l.phone,u.value=l.support_url,s.value=!0}catch(e){console.warn(e)}}async function r(e){let{legal_company_name:t,web_site:a,company_profile:o,email:r,phone:u,support_url:s}=(0,l.J)();try{await i.e.post("/askai/project/modify_company_profile",{domain:e,legal_company_name:t.value,web_site:a.value,company_profile:o.value,email:r.value,phone:u.value,support_url:s.value},n)}catch(e){console.warn(e)}}},54686:function(e,t,a){a.d(t,{L7:()=>y,M7:()=>d,Rw:()=>_,VP:()=>h,Vq:()=>w,Xe:()=>v,gK:()=>p,ke:()=>f,lQ:()=>m});var i=a(34541),l=a(16634),n=a(42205),o=a(68271),r=a(39432),u=a(31708),s=a(76882);async function m(e){let{domainTit:t,domainIp:a,hostname:l,quota:r,unit:u,mailboxes:s,catch_email:m,hasGotDomainConfiguration:d,urls:p}=(0,n.J)();if(!d.value)try{let n=await i.e.get("/domains/list",{params:{keyword:e,page:1,page_size:1}});if((0,o.Kn)(n)){var v;let{list:i}=n,f=(0,o.UO)(i[0].quota,!0,2).split(" ");t.value=i[0].domain,a.value=(null==(v=i[0].multi_ip_domains)?void 0:v.outbound_ip)||"",l.value=i[0].a_record,r.value=f[0],u.value=f[1],s.value=i[0].mailboxes,m.value=i[0].email,p.value=i[0].urls&&i[0].urls.length>0&&""!=i[0].urls[0]?i[0].urls:[`https://${e}`],await c(e),d.value=!0}}catch(e){console.warn(e)}}async function c(e){let{brandInfo:t,createdBrandInfo:a}=(0,n.J)();try{let l=await i.e.post("/askai/project/get_project_status",{domain:e});t.value=l.status,a.value=l.create_status}catch(e){console.warn(e)}}async function d(){let{domainTit:e,domainIp:t}=(0,n.J)();if(""==t.value)return void o.v0.error(s.ZP.global.t("domain.edit.domainConfiguration.validation.setDedicatedIpFirst"));try{await i.e.post("/multi_ip_domain/test",{domain:e.value,outbound_ip:t.value},{fetchOptions:{loading:s.ZP.global.t("domain.edit.domainConfiguration.api.testingConnection"),successMessage:!0}})}catch(e){console.warn(e)}}async function p(){let{domainTit:e,domainIp:t,hostname:a,quota:o,unit:r,urls:u,mailboxes:s,catch_email:m}=(0,n.J)(),c=function(e,t){switch(t){case"KB":return 1024*e;case"MB":return 1024*e*1024;case"GB":return 1024*e*1048576;case"TB":return 1024*e*0x40000000;default:return e}}(Number(o.value),r.value);try{await i.e.post("/domains/update",{domain:e.value,mailboxes:s.value,mailboxQuota:c,quota:c,rateLimit:1,active:1,email:m.value,urls:u.value,outbound_ip:t.value,hostname:a.value},l.uL)}catch(e){console.warn(e)}}async function v(){let{waitAndCheckDomainStatusRef:e,domainTit:t,urls:a,hasGotDomainConfiguration:i}=(0,n.J)(),l=(0,u.s6)();if(i.value=!1,0==a.value.length||""==a.value[0])o.v0.error(s.ZP.global.t("domain.edit.domainConfiguration.fillDomain"));else if((0,o.CB)(a.value[0]))try{await (0,r.rU)({domain:t.value,urls:a.value}),l.domainSource=t.value,e.value.open(t.value,()=>{f(t.value,1),m(t.value)})}catch(e){console.warn(e)}else o.v0.error(s.ZP.global.t("domain.edit.domainConfiguration.fillValidDomain"))}async function f(e,t){try{await i.e.post("/domains/update",{domain:e,hasbrandinfo:t})}catch(e){console.warn(e)}}function y(e){let{urls:t}=(0,n.J)(),a=t.value[0].match(/http:\/\/?/g),i=t.value[0].match(/https:\/\/?/g);a&&(t.value[0]=a[0]+e),i&&(t.value[0]=i[0]+e),a||i||(t.value[0]="https://"+e)}function _(e){let{urls:t}=(0,n.J)();t.value.splice(e,1)}function h(){let{hasGotAisettings:e,hasGotCompanyProfile:t,hasGotDomainConfiguration:a,hasGotFootersettings:i,hasGotProjectDetail:l,hasGotSitemap:o,hasGotStyling:r}=(0,n.J)();e.value=!1,t.value=!1,a.value=!1,i.value=!1,l.value=!1,o.value=!1,r.value=!1}async function w(e){let{brandInfo:t,domainTit:a}=(0,n.J)();try{await i.e.post("/askai/project/set_project_status",{domain:a.value,status:e},l.uL),await i.e.post("/domains/update",{domain:a.value,active:1,hasbrandinfo:Number(e)})}catch(a){t.value=!e,console.warn(a)}}},42205:function(e,t,a){a.d(t,{J:()=>o});var i=a(30989),l=a(58786);let n=(0,i.Q_)("editDomainStore",()=>{let e=(0,l.iH)(!1),t=(0,l.iH)(""),a=(0,l.iH)(""),i=(0,l.iH)(""),n=(0,l.iH)("0"),o=(0,l.iH)("B"),r=(0,l.iH)(0),u=(0,l.iH)(""),s=(0,l.iH)(["https://"]),m=(0,l.iH)(!1),c=(0,l.iH)(),d=(0,l.iH)(!1),p=(0,l.iH)(!1),v=(0,l.iH)(""),f=(0,l.iH)(""),y=(0,l.iH)(""),_=(0,l.iH)(""),h=(0,l.iH)(""),w=(0,l.iH)(""),g=(0,l.iH)(""),H=(0,l.iH)([]),k=(0,l.iH)({title:"",content:"",kid:"",update_time:0}),x=(0,l.iH)(""),S=(0,l.iH)(""),Z=(0,l.iH)(!1),b=(0,l.iH)(!1),U=(0,l.iH)(""),W=(0,l.iH)(!1),C=(0,l.iH)(""),P=(0,l.iH)(!1),j=(0,l.iH)(""),J=(0,l.iH)(""),z=(0,l.iH)(""),E=(0,l.iH)(""),L=(0,l.iH)(""),T=(0,l.iH)(""),B=(0,l.iH)(!1),D=(0,l.iH)(""),M=(0,l.iH)(""),R=(0,l.iH)(""),A=(0,l.iH)(""),O=(0,l.iH)(""),Q=(0,l.iH)(""),V=(0,l.iH)(""),G=(0,l.iH)(""),K=(0,l.iH)(!1),$=(0,l.iH)([{title:"",uri_path:""}]),q=(0,l.iH)(!1),I=(0,l.iH)(""),N=(0,l.iH)("");return{hasGotDomainConfiguration:e,domainTit:t,domainIp:a,hostname:i,quota:n,unit:o,mailboxes:r,catch_email:u,urls:s,brandInfo:m,waitAndCheckDomainStatusRef:c,createdBrandInfo:d,hasGotProjectDetail:p,domain:v,description:f,favicon:y,industry:_,primary_logo:h,project_name:w,secondary_logo:g,knowledge_base:H,activeKnowledge:k,knowledgeTitle:x,knowledgeContent:S,knowledgeModalShow:Z,isEditKnowledge:b,knowledge_base_content:U,knowledgeBasePreview:W,knowledgeBasePreviewTit:C,hasGotCompanyProfile:P,legal_company_name:j,web_site:J,company_profile:z,email:E,phone:L,support_url:T,hasGotStyling:B,accent_color:D,text_color:M,page_background:R,container_background:A,link_social_color:O,link_footer_color:Q,heading_font:V,body_font:G,hasGotSitemap:K,sitemap:$,hasGotFootersettings:q,copyright_text:I,disclaimer:N,hasGotAisettings:(0,l.iH)(!1),prompt:(0,l.iH)("")}});function o(){let e=n();return{...(0,i.Jk)(e)}}},86559:function(e,t,a){a.d(t,{Z:()=>n});var i=a(73084),l=a(58786);let n=(0,l.aZ)({__name:"index",props:(0,l.Vf)({width:{default:240},prefix:{type:Boolean,default:!1}},{value:{default:""},valueModifiers:{}}),emits:(0,l.Vf)(["search"],["update:value"]),setup(e,t){let{expose:a,emit:n}=t,o=(0,l.iH)(null),r=(0,l.tT)(e,"value"),u=()=>{n("search",r.value)};return a({focus:()=>{var e;null==(e=o.value)||e.focus()}}),(e,t)=>{let a=i.Z;return(0,l.wg)(),(0,l.j4)(a,(0,l.dG)({ref_key:"inputRef",ref:o,value:r.value,"onUpdate:value":t[0]||(t[0]=e=>r.value=e)},e.$attrs,{class:"bt-search",style:{width:`${e.width}px`},onKeyup:(0,l.D2)(u,["enter"])}),(0,l.Nv)({_:2},[e.prefix?{name:"prefix",fn:(0,l.w5)(()=>[(0,l._)("div",{class:"flex items-center cursor-pointer",onClick:u},t[1]||(t[1]=[(0,l._)("i",{class:"i-mdi-search text-16px"},null,-1)]))]),key:"0"}:void 0,e.prefix?void 0:{name:"suffix",fn:(0,l.w5)(()=>[(0,l._)("div",{class:"flex items-center cursor-pointer",onClick:u},t[2]||(t[2]=[(0,l._)("i",{class:"i-mdi-search text-16px"},null,-1)]))]),key:"1"}]),1040,["value","style"])}}})},64994:function(e,t,a){a.r(t),a.d(t,{default:()=>U});var i=a(39244),l=a(25170),n=a(60424),o=a(66760),r=a(86559),u=a(15496),s=a(73084),m=a(58786),c=a(53903),d=a(93953),p=a(51169),v=a(67512),f=a(68271),y=a(31651),_=a(54078),h=a(53472);let w=(0,m.aZ)({__name:"TemplatePreview",setup(e){let t=(0,m.iH)(""),[a,i]=(0,p.d)({onChangeState:e=>{e&&(t.value=i.getState().html||"")}});return(e,i)=>{let l=h.Z;return(0,m.wg)(),(0,m.j4)((0,m.SU)(a),{title:e.$t("market.template.preview.title"),width:"820",footer:!1},{default:(0,m.w5)(()=>[(0,m.Wm)(l,{height:580,value:(0,m.SU)(t)},null,8,["value"])]),_:1},8,["title"])}}});var g=a(86720),H=a(65965),k=a(52495);let x={class:"p-24px"},S={class:"bt-title"};function Z(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!(0,m.lA)(e)}let b=(0,m.aZ)({__name:"index",setup(e){let t=(0,H.tv)(),{t:a}=(0,k.QT)(),h=(0,m.iH)(),{tableParams:b,tableList:U,loading:W,tableTotal:C,getTableData:P}=(0,v.Z)({loading:!0,immediate:!1,params:{page:1,page_size:10,keyword:""},fetchFn:y.A8});(async()=>{await P(),U.value.forEach(e=>{e.isEdit=!1,e.edit_name=""})})();let j=(0,m.iH)([{key:"temp_name",title:a("market.template.columns.name"),minWidth:120,ellipsis:{tooltip:!0},render:e=>{if(!e.isEdit)return(0,m.Wm)("div",{class:"flex justify-start gap-1.25 items-center"},[(0,m.Wm)(u.ZP,{type:"primary",text:!0,onClick:()=>{B(e)}},{default:()=>[e.temp_name]}),(0,m.Wm)("i",{class:"i-ci:edit-pencil-line-01 text-14px cursor-pointer",onClick:()=>{e.isEdit=!0,e.edit_name=e.temp_name}},null)]);{let t,i;return(0,m.Wm)("div",{class:"flex justify-start gap-1.25 items-center"},[(0,m.Wm)(s.Z,{class:"edit-domain-input",value:e.edit_name,"onUpdate:value":t=>e.edit_name=t},null),(0,m.Wm)(u.ZP,{text:!0,type:"info",class:"text-12px",onClick:()=>T(e)},Z(t=a("market.template.edit.confirm"))?t:{default:()=>[t]}),(0,m.Wm)(u.ZP,{text:!0,type:"default",onClick:()=>{e.isEdit=!1,e.edit_name=""}},Z(i=a("market.template.edit.cancel"))?i:{default:()=>[i]})])}}},{key:"add_type",title:a("market.template.columns.type"),minWidth:140,render:e=>{if(1===e.add_type){let e;return(0,m.Wm)(c.ZP,{size:"small",bordered:!1,type:"primary"},Z(e=a("market.template.types.drag"))?e:{default:()=>[e]})}if(0===e.add_type){let e;return(0,m.Wm)(c.ZP,{size:"small",bordered:!1,type:"info"},Z(e=a("market.template.types.html"))?e:{default:()=>[e]})}if(2==e.add_type){let e;return(0,m.Wm)(c.ZP,{size:"small",bordered:!1,type:"success"},Z(e=a("market.template.types.ai"))?e:{default:()=>[e]})}}},{key:"create_time",title:a("market.template.columns.createdAt"),minWidth:140,render:e=>(0,f.mr)(e.create_time)},{title:a("common.columns.actions"),key:"actions",align:"right",width:240,render:e=>{let t,i,l,n;return(0,m.Wm)(d.Z,{inline:!0},{default:()=>[(0,m.Wm)(u.ZP,{type:"primary",text:!0,onClick:()=>{R(e.html_content)}},Z(t=a("common.actions.preview"))?t:{default:()=>[t]}),(0,m.Wm)(u.ZP,{type:"primary",text:!0,onClick:()=>{B(e)}},Z(i=a("common.actions.edit"))?i:{default:()=>[i]}),(0,m.Wm)(u.ZP,{type:"primary",text:!0,disabled:2==e.add_type,onClick:()=>{A(e)}},Z(l=a("market.template.actions.duplicate"))?l:{default:()=>[l]}),(0,m.Wm)(u.ZP,{type:"error",text:!0,onClick:()=>{O(e)}},Z(n=a("common.actions.delete"))?n:{default:()=>[n]})]})}}]),[J,z]=(0,p.d)({component:_.Z,state:{isEdit:!1,refresh:P,preview:e=>{R(e)}}}),E=()=>{h.value.open()},L=e=>{"Drag"==e?z.setState({isEdit:!1,type:1,row:null}):"HTML"==e&&z.setState({isEdit:!1,type:0,row:null}),z.open()},T=async e=>{e.temp_name=e.edit_name,await (0,y.QB)(e),e.isEdit=!1},B=e=>{2==e.add_type&&e.chat_id?t.push({name:"ai-template",params:{chatId:e.chat_id}}):(z.setState({isEdit:!0,row:e}),z.open())},[D,M]=(0,p.d)({component:w}),R=e=>{M.setState({html:e}),M.open()},A=async e=>{await (0,y.ef)({id:e.id}),P()},O=e=>{(0,f.iG)({title:a("market.template.delete.title"),content:a("market.template.delete.confirm",{name:e.temp_name}),confirmText:a("common.actions.delete"),confirmType:"error",onConfirm:async()=>{await (0,y.Xc)({id:e.id}),P()}})};return(e,t)=>{let s=r.Z,c=o.Z,d=n.Z,p=l.Z,v=i.Z;return(0,m.wg)(),(0,m.iD)(m.HY,null,[(0,m._)("div",x,[(0,m._)("div",S,(0,m.zw)((0,m.SU)(a)("template.template")),1),(0,m.Wm)(v,null,{toolsLeft:(0,m.w5)(()=>[(0,m.Wm)((0,m.SU)(u.ZP),{type:"primary",onClick:E},{default:(0,m.w5)(()=>[(0,m.Uk)((0,m.zw)((0,m.SU)(a)("market.template.actions.add")),1)]),_:1})]),toolsRight:(0,m.w5)(()=>[(0,m.Wm)(s,{value:(0,m.SU)(b).keyword,"onUpdate:value":t[0]||(t[0]=e=>(0,m.SU)(b).keyword=e),width:240,placeholder:(0,m.SU)(a)("market.template.search.namePlaceholder"),onSearch:t[1]||(t[1]=()=>(0,m.SU)(P)(!0))},null,8,["value","placeholder"])]),table:(0,m.w5)(()=>[(0,m.Wm)(d,{loading:(0,m.SU)(W),columns:(0,m.SU)(j),data:(0,m.SU)(U)},{empty:(0,m.w5)(()=>[(0,m.Wm)(c)]),_:1},8,["loading","columns","data"])]),pageRight:(0,m.w5)(()=>[(0,m.Wm)(p,{page:(0,m.SU)(b).page,"onUpdate:page":t[2]||(t[2]=e=>(0,m.SU)(b).page=e),"page-size":(0,m.SU)(b).page_size,"onUpdate:pageSize":t[3]||(t[3]=e=>(0,m.SU)(b).page_size=e),"item-count":(0,m.SU)(C),onRefresh:(0,m.SU)(P)},null,8,["page","page-size","item-count","onRefresh"])]),modal:(0,m.w5)(()=>[(0,m.Wm)((0,m.SU)(J)),(0,m.Wm)((0,m.SU)(D))]),_:1})]),(0,m.Wm)(g.Z,{ref_key:"createTemplateModalRef",ref:h,onConfirmType:L},null,512)],64)}}}),U=(0,a(41748).default)(b,[["__scopeId","data-v-0e970b7e"]])}}]);