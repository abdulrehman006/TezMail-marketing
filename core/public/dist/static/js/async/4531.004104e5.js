"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([["4531"],{6943(e,t,a){a.d(t,{i:()=>o});var l=a(21879),i=a(12532),n=a(90290);let o=e=>{let{fetchFn:t,params:a,loading:o=!1,immediate:r=!1}=e,s=(0,n.KR)(o),u=(0,n.KR)([]),p=(0,n.KR)(0),c=(0,n.KR)(a),d=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(e&&(a.page=1),t){s.value=!0;try{let e=await t(c.value);(0,i.Gv)(e)&&(u.value=(0,i.cy)(e.list)?e.list:[],p.value=(0,l.A)(e.total)?e.total:0)}finally{s.value=!1}}};return r&&d(),{loading:s,tableList:u,tableTotal:p,tableParams:c,getTableData:d}}},84336(e,t,a){a.d(t,{IU:()=>o,UT:()=>r,oX:()=>n});var l=a(85020),i=a(38879);let n={fetchOptions:{loading:"Loading... Please wait.",successMessage:!0}};async function o(e){let{legal_company_name:t,web_site:a,company_profile:n,email:o,phone:r,support_url:s,hasGotCompanyProfile:u}=(0,i.s)();if(!u.value)try{let i=await l.K.post("/askai/project/get_company_profile",{domain:e});t.value=i.legal_company_name,a.value=i.web_site,n.value=i.company_profile,o.value=i.email,r.value=i.phone,s.value=i.support_url,u.value=!0}catch(e){console.warn(e)}}async function r(e){let{legal_company_name:t,web_site:a,company_profile:o,email:r,phone:s,support_url:u}=(0,i.s)();try{await l.K.post("/askai/project/modify_company_profile",{domain:e,legal_company_name:t.value,web_site:a.value,company_profile:o.value,email:r.value,phone:s.value,support_url:u.value},n)}catch(e){console.warn(e)}}},23196(e,t,a){a.d(t,{As:()=>h,C7:()=>p,R9:()=>_,SI:()=>y,TP:()=>f,Uc:()=>v,al:()=>R,rN:()=>d,yu:()=>m});var l=a(85020),i=a(84336),n=a(38879),o=a(12532),r=a(22392),s=a(40528),u=a(46831);async function p(e){let{domainTit:t,domainIp:a,hostname:i,quota:r,unit:s,mailboxes:u,catch_email:p,hasGotDomainConfiguration:d,urls:m}=(0,n.s)();if(!d.value)try{let n=await l.K.get("/domains/list",{params:{keyword:e,page:1,page_size:1}});if((0,o.Gv)(n)){var v;let{list:l}=n,f=(0,o.JB)(l[0].quota,!0,2).split(" ");t.value=l[0].domain,a.value=(null==(v=l[0].multi_ip_domains)?void 0:v.outbound_ip)||"",i.value=l[0].a_record,r.value=f[0],s.value=f[1],u.value=l[0].mailboxes,p.value=l[0].email,m.value=l[0].urls&&l[0].urls.length>0&&""!=l[0].urls[0]?l[0].urls:[`https://${e}`],await c(e),d.value=!0}}catch(e){console.warn(e)}}async function c(e){let{brandInfo:t,createdBrandInfo:a}=(0,n.s)();try{let i=await l.K.post("/askai/project/get_project_status",{domain:e});t.value=i.status,a.value=i.create_status}catch(e){console.warn(e)}}async function d(){let{domainTit:e,domainIp:t}=(0,n.s)();if(""==t.value)return void o.QB.error(u.Ay.global.t("domain.edit.domainConfiguration.validation.setDedicatedIpFirst"));try{await l.K.post("/multi_ip_domain/test",{domain:e.value,outbound_ip:t.value},{fetchOptions:{loading:u.Ay.global.t("domain.edit.domainConfiguration.api.testingConnection"),successMessage:!0}})}catch(e){console.warn(e)}}async function m(){let{domainTit:e,domainIp:t,hostname:a,quota:o,unit:r,urls:s,mailboxes:u,catch_email:p}=(0,n.s)(),c=function(e,t){switch(t){case"KB":return 1024*e;case"MB":return 1024*e*1024;case"GB":return 1024*e*1048576;case"TB":return 1024*e*0x40000000;default:return e}}(Number(o.value),r.value);try{await l.K.post("/domains/update",{domain:e.value,mailboxes:u.value,mailboxQuota:c,quota:c,rateLimit:1,active:1,email:p.value,urls:s.value,outbound_ip:t.value,hostname:a.value},i.oX)}catch(e){console.warn(e)}}async function v(){let{waitAndCheckDomainStatusRef:e,domainTit:t,urls:a,hasGotDomainConfiguration:l}=(0,n.s)(),i=(0,s.on)();if(l.value=!1,0==a.value.length||""==a.value[0])o.QB.error(u.Ay.global.t("domain.edit.domainConfiguration.fillDomain"));else if((0,o.gU)(a.value[0]))try{await (0,r.nz)({domain:t.value,urls:a.value}),i.domainSource=t.value,e.value.open(t.value,()=>{f(t.value,1),p(t.value)})}catch(e){console.warn(e)}else o.QB.error(u.Ay.global.t("domain.edit.domainConfiguration.fillValidDomain"))}async function f(e,t){try{await l.K.post("/domains/update",{domain:e,hasbrandinfo:t})}catch(e){console.warn(e)}}function y(e){let{urls:t}=(0,n.s)(),a=t.value[0].match(/http:\/\/?/g),l=t.value[0].match(/https:\/\/?/g);a&&(t.value[0]=a[0]+e),l&&(t.value[0]=l[0]+e),a||l||(t.value[0]="https://"+e)}function R(e){let{urls:t}=(0,n.s)();t.value.splice(e,1)}function _(){let{hasGotAisettings:e,hasGotCompanyProfile:t,hasGotDomainConfiguration:a,hasGotFootersettings:l,hasGotProjectDetail:i,hasGotSitemap:o,hasGotStyling:r}=(0,n.s)();e.value=!1,t.value=!1,a.value=!1,l.value=!1,i.value=!1,o.value=!1,r.value=!1}async function h(e){let{brandInfo:t,domainTit:a}=(0,n.s)();try{await l.K.post("/askai/project/set_project_status",{domain:a.value,status:e},i.oX),await l.K.post("/domains/update",{domain:a.value,active:1,hasbrandinfo:Number(e)})}catch(a){t.value=!e,console.warn(a)}}},38879(e,t,a){a.d(t,{s:()=>o});var l=a(10810),i=a(90290);let n=(0,l.nY)("editDomainStore",()=>{let e=(0,i.KR)(!1),t=(0,i.KR)(""),a=(0,i.KR)(""),l=(0,i.KR)(""),n=(0,i.KR)("0"),o=(0,i.KR)("B"),r=(0,i.KR)(0),s=(0,i.KR)(""),u=(0,i.KR)(["https://"]),p=(0,i.KR)(!1),c=(0,i.KR)(),d=(0,i.KR)(!1),m=(0,i.KR)(!1),v=(0,i.KR)(""),f=(0,i.KR)(""),y=(0,i.KR)(""),R=(0,i.KR)(""),_=(0,i.KR)(""),h=(0,i.KR)(""),k=(0,i.KR)(""),K=(0,i.KR)([]),g=(0,i.KR)({title:"",content:"",kid:"",update_time:0}),b=(0,i.KR)(""),w=(0,i.KR)(""),x=(0,i.KR)(!1),A=(0,i.KR)(!1),F=(0,i.KR)(""),C=(0,i.KR)(!1),L=(0,i.KR)(""),z=(0,i.KR)(!1),S=(0,i.KR)(""),j=(0,i.KR)(""),B=(0,i.KR)(""),M=(0,i.KR)(""),E=(0,i.KR)(""),U=(0,i.KR)(""),T=(0,i.KR)(!1),I=(0,i.KR)(""),W=(0,i.KR)(""),X=(0,i.KR)(""),P=(0,i.KR)(""),D=(0,i.KR)(""),$=(0,i.KR)(""),G=(0,i.KR)(""),O=(0,i.KR)(""),Q=(0,i.KR)(!1),H=(0,i.KR)([{title:"",uri_path:""}]),N=(0,i.KR)(!1),q=(0,i.KR)(""),J=(0,i.KR)("");return{hasGotDomainConfiguration:e,domainTit:t,domainIp:a,hostname:l,quota:n,unit:o,mailboxes:r,catch_email:s,urls:u,brandInfo:p,waitAndCheckDomainStatusRef:c,createdBrandInfo:d,hasGotProjectDetail:m,domain:v,description:f,favicon:y,industry:R,primary_logo:_,project_name:h,secondary_logo:k,knowledge_base:K,activeKnowledge:g,knowledgeTitle:b,knowledgeContent:w,knowledgeModalShow:x,isEditKnowledge:A,knowledge_base_content:F,knowledgeBasePreview:C,knowledgeBasePreviewTit:L,hasGotCompanyProfile:z,legal_company_name:S,web_site:j,company_profile:B,email:M,phone:E,support_url:U,hasGotStyling:T,accent_color:I,text_color:W,page_background:X,container_background:P,link_social_color:D,link_footer_color:$,heading_font:G,body_font:O,hasGotSitemap:Q,sitemap:H,hasGotFootersettings:N,copyright_text:q,disclaimer:J,hasGotAisettings:(0,i.KR)(!1),prompt:(0,i.KR)("")}});function o(){let e=n();return{...(0,l.bP)(e)}}},90216(e,t,a){a.d(t,{A:()=>n});var l=a(45449),i=a(90290);let n=(0,i.pM)({__name:"index",props:(0,i.zz)({width:{default:240},prefix:{type:Boolean,default:!1}},{value:{default:""},valueModifiers:{}}),emits:(0,i.zz)(["search"],["update:value"]),setup(e,t){let{expose:a,emit:n}=t,o=(0,i.KR)(null),r=(0,i.fn)(e,"value"),s=()=>{n("search",r.value)};return a({focus:()=>{var e;null==(e=o.value)||e.focus()}}),(t,a)=>{let n=l.A;return(0,i.uX)(),(0,i.Wv)(n,(0,i.v6)({ref_key:"inputRef",ref:o,value:r.value,"onUpdate:value":a[0]||(a[0]=e=>r.value=e)},t.$attrs,{class:"bt-search",style:{width:`${e.width}px`},onKeyup:(0,i.jR)(s,["enter"])}),(0,i.eX)({_:2},[e.prefix?{name:"prefix",fn:(0,i.k6)(()=>[(0,i.Lk)("div",{class:"flex items-center cursor-pointer",onClick:s},[...a[1]||(a[1]=[(0,i.Lk)("i",{class:"i-mdi-search text-16px"},null,-1)])])]),key:"0"}:void 0,e.prefix?void 0:{name:"suffix",fn:(0,i.k6)(()=>[(0,i.Lk)("div",{class:"flex items-center cursor-pointer",onClick:s},[...a[2]||(a[2]=[(0,i.Lk)("i",{class:"i-mdi-search text-16px"},null,-1)])])]),key:"1"}]),1040,["value","style"])}}})},28391(e,t,a){a.d(t,{A:()=>r});var l=a(23995),i=a(27546),n=a(90290);let o={class:"leading-22px text-13px text-desc text-center"},r=(0,n.pM)({__name:"index",setup(e){let t=()=>{window.open("https://github.com/aaPanel/BillionMail/issues")},a=()=>{window.open("https://github.com/aaPanel/BillionMail")};return(e,r)=>{let s=i.Ay,u=(0,n.g2)("i18n-t"),p=l.A;return(0,n.uX)(),(0,n.Wv)(p,null,{default:(0,n.k6)(()=>[(0,n.Lk)("div",o,[(0,n.bF)(u,{tag:"span",scope:"global",keypath:"components.tableHelp.text1"},{issues:(0,n.k6)(()=>[(0,n.bF)(s,{class:"text-13px",type:"primary",text:"",onClick:t},{default:(0,n.k6)(()=>[...r[0]||(r[0]=[(0,n.Lk)("span",null,"Issues",-1),(0,n.Lk)("i",{class:"i-mdi:arrow-right ml-1px"},null,-1)])]),_:1})]),star:(0,n.k6)(()=>[(0,n.bF)(s,{class:"text-13px",type:"primary",text:"",onClick:a},{default:(0,n.k6)(()=>[...r[1]||(r[1]=[(0,n.eW)(" Star ",-1),(0,n.Lk)("i",{class:"i-mdi:arrow-right ml-1px"},null,-1)])]),_:1})]),_:1}),r[2]||(r[2]=(0,n.Lk)("br",null,null,-1)),(0,n.Lk)("span",null,(0,n.v_)(e.$t("components.tableHelp.text2")),1)])]),_:1})}}})},60845(e,t,a){a.r(t),a.d(t,{default:()=>F});var l=a(63919),i=a(23618),n=a(77625),o=a(28391),r=a(90216),s=a(27546),u=a(45449),p=a(90290),c=a(23254),d=a(85684),m=a(60045),v=a(6943),f=a(12532),y=a(44301),R=a(75133),_=a(45935);let h=(0,p.pM)({__name:"TemplatePreview",setup(e){let t=(0,p.KR)(""),[a,l]=(0,m.h)({onChangeState:e=>{e&&(t.value=l.getState().html||"")}});return(e,l)=>{let i=_.A;return(0,p.uX)(),(0,p.Wv)((0,p.R1)(a),{title:e.$t("market.template.preview.title"),width:"820",footer:!1},{default:(0,p.k6)(()=>[(0,p.bF)(i,{height:580,value:(0,p.R1)(t)},null,8,["value"])]),_:1},8,["title"])}}});var k=a(57105),K=a(75220),g=a(3401);let b={class:"p-24px"},w={class:"bt-title"};function x(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!(0,p.vv)(e)}let A=(0,p.pM)({__name:"index",setup(e){let t=(0,K.rd)(),{t:a}=(0,g.s9)(),_=(0,p.KR)(),{tableParams:A,tableList:F,loading:C,tableTotal:L,getTableData:z}=(0,v.i)({loading:!0,immediate:!1,params:{page:1,page_size:10,keyword:""},fetchFn:y.n5});(async()=>{await z(),F.value.forEach(e=>{e.isEdit=!1,e.edit_name=""})})();let S=(0,p.KR)([{key:"temp_name",title:a("market.template.columns.name"),minWidth:120,ellipsis:{tooltip:!0},render:e=>{if(!e.isEdit)return(0,p.bF)("div",{class:"flex justify-start gap-1.25 items-center"},[(0,p.bF)(s.Ay,{type:"primary",text:!0,onClick:()=>{T(e)}},{default:()=>[e.temp_name]}),(0,p.bF)("i",{class:"i-ci:edit-pencil-line-01 text-14px cursor-pointer",onClick:()=>{e.isEdit=!0,e.edit_name=e.temp_name}},null)]);{let t,l;return(0,p.bF)("div",{class:"flex justify-start gap-1.25 items-center"},[(0,p.bF)(u.A,{class:"edit-domain-input",value:e.edit_name,"onUpdate:value":t=>e.edit_name=t},null),(0,p.bF)(s.Ay,{text:!0,type:"info",class:"text-12px",onClick:()=>U(e)},x(t=a("market.template.edit.confirm"))?t:{default:()=>[t]}),(0,p.bF)(s.Ay,{text:!0,type:"default",onClick:()=>{e.isEdit=!1,e.edit_name=""}},x(l=a("market.template.edit.cancel"))?l:{default:()=>[l]})])}}},{key:"add_type",title:a("market.template.columns.type"),minWidth:140,render:e=>{if(1===e.add_type){let e;return(0,p.bF)(c.Ay,{size:"small",bordered:!1,type:"primary"},x(e=a("market.template.types.drag"))?e:{default:()=>[e]})}if(0===e.add_type){let e;return(0,p.bF)(c.Ay,{size:"small",bordered:!1,type:"info"},x(e=a("market.template.types.html"))?e:{default:()=>[e]})}if(2==e.add_type){let e;return(0,p.bF)(c.Ay,{size:"small",bordered:!1,type:"success"},x(e=a("market.template.types.ai"))?e:{default:()=>[e]})}}},{key:"create_time",title:a("market.template.columns.createdAt"),minWidth:140,render:e=>(0,f.fU)(e.create_time)},{title:a("common.columns.actions"),key:"actions",align:"right",width:240,render:e=>{let t,l,i,n;return(0,p.bF)(d.A,{inline:!0},{default:()=>[(0,p.bF)(s.Ay,{type:"primary",text:!0,onClick:()=>{X(e.html_content)}},x(t=a("common.actions.preview"))?t:{default:()=>[t]}),(0,p.bF)(s.Ay,{type:"primary",text:!0,onClick:()=>{T(e)}},x(l=a("common.actions.edit"))?l:{default:()=>[l]}),(0,p.bF)(s.Ay,{type:"primary",text:!0,disabled:2==e.add_type,onClick:()=>{P(e)}},x(i=a("market.template.actions.duplicate"))?i:{default:()=>[i]}),(0,p.bF)(s.Ay,{type:"error",text:!0,onClick:()=>{D(e)}},x(n=a("common.actions.delete"))?n:{default:()=>[n]})]})}}]),[j,B]=(0,m.h)({component:R.A,state:{isEdit:!1,refresh:z,preview:e=>{X(e)}}}),M=()=>{_.value.open()},E=e=>{"Drag"==e?B.setState({isEdit:!1,type:1,row:null}):"HTML"==e&&B.setState({isEdit:!1,type:0,row:null}),B.open()},U=async e=>{e.temp_name=e.edit_name,await (0,y.ub)(e),e.isEdit=!1},T=e=>{2==e.add_type&&e.chat_id?t.push({name:"ai-template",params:{chatId:e.chat_id}}):(B.setState({isEdit:!0,row:e}),B.open())},[I,W]=(0,m.h)({component:h}),X=e=>{W.setState({html:e}),W.open()},P=async e=>{await (0,y.CI)({id:e.id}),z()},D=e=>{(0,f.lJ)({title:a("market.template.delete.title"),content:a("market.template.delete.confirm",{name:e.temp_name}),confirmText:a("common.actions.delete"),confirmType:"error",onConfirm:async()=>{await (0,y.I7)({id:e.id}),z()}})};return(e,t)=>{let u=r.A,c=o.A,d=n.A,m=i.A,v=l.A;return(0,p.uX)(),(0,p.CE)(p.FK,null,[(0,p.Lk)("div",b,[(0,p.Lk)("div",w,(0,p.v_)((0,p.R1)(a)("template.template")),1),(0,p.bF)(v,null,{toolsLeft:(0,p.k6)(()=>[(0,p.bF)((0,p.R1)(s.Ay),{type:"primary",onClick:M},{default:(0,p.k6)(()=>[(0,p.eW)((0,p.v_)((0,p.R1)(a)("market.template.actions.add")),1)]),_:1})]),toolsRight:(0,p.k6)(()=>[(0,p.bF)(u,{value:(0,p.R1)(A).keyword,"onUpdate:value":t[0]||(t[0]=e=>(0,p.R1)(A).keyword=e),width:240,placeholder:(0,p.R1)(a)("market.template.search.namePlaceholder"),onSearch:t[1]||(t[1]=()=>(0,p.R1)(z)(!0))},null,8,["value","placeholder"])]),table:(0,p.k6)(()=>[(0,p.bF)(d,{loading:(0,p.R1)(C),columns:(0,p.R1)(S),data:(0,p.R1)(F)},{empty:(0,p.k6)(()=>[(0,p.bF)(c)]),_:1},8,["loading","columns","data"])]),pageRight:(0,p.k6)(()=>[(0,p.bF)(m,{page:(0,p.R1)(A).page,"onUpdate:page":t[2]||(t[2]=e=>(0,p.R1)(A).page=e),"page-size":(0,p.R1)(A).page_size,"onUpdate:pageSize":t[3]||(t[3]=e=>(0,p.R1)(A).page_size=e),"item-count":(0,p.R1)(L),onRefresh:(0,p.R1)(z)},null,8,["page","page-size","item-count","onRefresh"])]),modal:(0,p.k6)(()=>[(0,p.bF)((0,p.R1)(j)),(0,p.bF)((0,p.R1)(I))]),_:1})]),(0,p.bF)(k.A,{ref_key:"createTemplateModalRef",ref:_,onConfirmType:E},null,512)],64)}}}),F=(0,a(64901).default)(A,[["__scopeId","data-v-3be4c0d1"]])}}]);