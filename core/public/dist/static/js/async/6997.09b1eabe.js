"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([["6997"],{77380(e,l,a){a.d(l,{A:()=>s});var t=a(90290),u=a(28848),n=a.n(u);a(78160),a(15420);let i={class:"code-lines-container"},r=["innerHTML"],o=["innerHTML"],v=(0,t.pM)({__name:"index",props:{code:{},language:{default:"log"},showLineNumbers:{type:Boolean,default:!0},copyable:{type:Boolean,default:!0},height:{default:"100%"},highlightedLines:{default:()=>[]},wordWrap:{type:Boolean,default:!0},trimWhitespace:{type:Boolean,default:!0},enableVirtualScroll:{type:Boolean,default:!0},itemHeight:{default:22},overscan:{default:5},virtualScrollThreshold:{default:200},scrollToBottom:{type:Boolean,default:!1}},setup(e,l){let{expose:a}=l,u=(0,t.KR)(null),v=(0,t.KR)(null),s=(0,t.KR)(null),h=(0,t.KR)(null),g=(0,t.KR)(null),c=(0,t.KR)(0),d=(0,t.KR)(0),m=(0,t.KR)(!1),f=(0,t.KR)(null),p=(0,t.KR)(new Map),y=(0,t.KR)(new Map),b=(0,t.KR)(e.itemHeight),w=(0,t.EW)(()=>{let l=e.code;return e.trimWhitespace&&(l=l.trim()),l}),T=(0,t.EW)(()=>w.value.split("\n")),R=(0,t.EW)(()=>!1!==e.enableVirtualScroll&&T.value.length>e.virtualScrollThreshold),L=()=>{if(null!==f.value)return f.value;if(R.value&&g.value){let e=document.createElement("div");e.style.cssText=`
			position: absolute;
			visibility: hidden;
			height: auto;
			width: auto;
			white-space: nowrap;
			font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
			font-size: 14px;
			line-height: 1.5;
			padding: 0;
			margin: 0;
		`,e.textContent="Ag",document.body.appendChild(e);let l=e.offsetHeight;if(document.body.removeChild(e),l>0)return f.value=l,b.value=l,l}if(u.value){let e=parseFloat(getComputedStyle(u.value).lineHeight);if(!isNaN(e)&&e>0)return f.value=e,b.value=e,e}return f.value=e.itemHeight,b.value=e.itemHeight,e.itemHeight},E=(0,t.KR)(null),C=(0,t.KR)(0),W=(0,t.EW)(()=>{if(C.value,!e.wordWrap)return T.value.map((e,l)=>({lineNumber:l+1,isOriginalLine:!0}));let l=[];return T.value.forEach((a,t)=>{let n=(l=>{if(!e.wordWrap||!u.value)return 1;let a=`${l}_${u.value.clientWidth}`;if(p.value.has(a))return p.value.get(a);let t=u.value.clientWidth-32;if(t<=0)return p.value.set(a,1),1;let n=Math.floor(t/8),i=Math.max(1,Math.ceil(l.length/n));return p.value.set(a,i),i})(a);l.push({lineNumber:t+1,isOriginalLine:!0});for(let e=1;e<n;e++)l.push({lineNumber:t+1,isOriginalLine:!1})}),l}),k=(0,t.EW)(()=>W.value),x=(0,t.EW)(()=>{if(R.value)return w.value;let l=`${w.value}_${e.language}`;if(y.value.has(l))return y.value.get(l);try{let a=n().highlight(w.value,n().languages[e.language]||n().languages.log,e.language);return y.value.set(l,a),a}catch(e){return console.warn("代码高亮失败:",e),y.value.set(l,w.value),w.value}}),H=(0,t.EW)(()=>R.value?T.value.length*b.value:0),M=(0,t.EW)(()=>R.value?Math.max(0,Math.floor(c.value/b.value)-e.overscan):0),N=(0,t.EW)(()=>{if(!R.value)return 0;let l=Math.ceil(d.value/b.value),a=M.value+l+2*e.overscan;return Math.min(T.value.length-1,a)}),K=(0,t.EW)(()=>R.value?M.value*b.value:0),_=(0,t.EW)(()=>R.value?(N.value-M.value+1)*b.value:0),B=(0,t.EW)(()=>M.value),$=(0,t.EW)(()=>{if(!R.value)return[];let e=M.value,l=N.value+1,a=[];for(let t=e;t<l&&t<T.value.length;t++)a.push({lineNumber:t+1,isOriginalLine:!0,originalIndex:t});return a}),X=(0,t.EW)(()=>{if(!R.value)return[];let e=M.value,l=N.value+1;return T.value.slice(e,l)}),O=null,F=null,S=()=>{g.value&&(m.value=!0,O&&cancelAnimationFrame(O),F&&clearTimeout(F),O=requestAnimationFrame(()=>{if(!g.value)return;let e=g.value.scrollTop;Math.abs(e-c.value)>.5&&(c.value=e),!R.value&&s.value&&(s.value.scrollTop=e)}),F=setTimeout(()=>{m.value=!1,R.value&&V()},150))},I=()=>{if(!g.value)return;let e=g.value.clientHeight;Math.abs(e-d.value)>1&&(d.value=e,f.value=null,(0,t.dY)(()=>{L(),R.value&&S()}))},A=()=>{g.value&&(0,t.dY)(()=>{if(R.value){let e=Math.max(0,H.value-d.value+20);g.value.scrollTop=e,c.value=e}else g.value.scrollTop=g.value.scrollHeight})},Y=()=>{p.value.clear(),y.value.clear(),f.value=null},z=(e,l)=>{let a;return function(){for(var t=arguments.length,u=Array(t),n=0;n<t;n++)u[n]=arguments[n];clearTimeout(a),a=setTimeout(()=>{clearTimeout(a),e(...u)},l)}},V=()=>{R.value&&g.value&&!m.value&&(0,t.dY)(()=>{I(),L(),m.value||S()})},q=()=>{e.scrollToBottom&&A()};(0,t.sV)(()=>{(0,t.dY)(()=>{I(),L(),window.addEventListener("resize",z(I,100)),g.value&&ResizeObserver&&(E.value=new ResizeObserver(z(()=>{Y(),I(),C.value++},100)),E.value.observe(g.value)),setTimeout(()=>{q()},200)})}),(0,t.wB)(()=>[w.value,e.language,R.value],()=>{y.value.clear(),(0,t.dY)(()=>{R.value&&setTimeout(()=>{V()},50),e.scrollToBottom&&setTimeout(()=>{q()},100)})},{deep:!0}),(0,t.wB)(()=>e.wordWrap,()=>{p.value.clear(),C.value++,R.value&&setTimeout(()=>{V()},50)}),(0,t.wB)(()=>e.itemHeight,()=>{f.value=null,b.value=e.itemHeight,R.value&&setTimeout(()=>{V()},50)}),(0,t.hi)(()=>{E.value&&E.value.disconnect(),window.removeEventListener("resize",I),O&&cancelAnimationFrame(O),F&&clearTimeout(F),Y()}),a({scrollToBottom:A,scrollToLine:e=>{!g.value||e<1||e>T.value.length||(0,t.dY)(()=>{if(R.value){let l=(e-1)*b.value;g.value.scrollTop=l,c.value=l}else{let l=g.value.querySelector(`.line-number:nth-child(${e})`);l&&l.scrollIntoView({behavior:"smooth",block:"center"})}})},clearCaches:Y,calibrateVirtualScroll:V});let Q=(0,t.EW)(()=>{let e=T.value.length.toString().length;return`${1.5+.6*e+1.5}em`});return(l,a)=>((0,t.uX)(),(0,t.CE)("div",{ref_key:"codeContainer",ref:g,class:(0,t.C4)(["code-container",{"with-line-numbers":e.showLineNumbers,"word-wrap":e.wordWrap}]),style:(0,t.Tr)({height:e.height}),onScroll:S},[(0,t.R1)(R)?((0,t.uX)(),(0,t.CE)("div",{key:0,class:"virtual-scroll-container",style:(0,t.Tr)({height:(0,t.R1)(H)+"px",minHeight:"100%"})},[e.showLineNumbers?((0,t.uX)(),(0,t.CE)("div",{key:0,ref_key:"lineNumbersContainer",ref:s,class:"line-numbers-container virtual",style:(0,t.Tr)({width:(0,t.R1)(Q),transform:`translate3d(0, ${(0,t.R1)(K)}px, 0)`,height:(0,t.R1)(_)+"px"})},[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)((0,t.R1)($),(l,a)=>((0,t.uX)(),(0,t.CE)("div",{key:l.originalIndex,class:(0,t.C4)(["line-number",{highlighted:e.highlightedLines.includes(l.lineNumber),"original-line":l.isOriginalLine}]),style:(0,t.Tr)({height:(0,t.R1)(b)+"px",lineHeight:(0,t.R1)(b)+"px"})},(0,t.v_)(l.isOriginalLine?l.lineNumber:""),7))),128))],4)):(0,t.Q3)("",!0),(0,t.Lk)("div",{ref_key:"codeContent",ref:h,class:"code-content virtual",style:(0,t.Tr)({marginLeft:e.showLineNumbers?(0,t.R1)(Q):"0",transform:`translate3d(0, ${(0,t.R1)(K)}px, 0)`,height:(0,t.R1)(_)+"px"})},[(0,t.Lk)("div",i,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)((0,t.R1)(X),(l,a)=>((0,t.uX)(),(0,t.CE)("div",{key:(0,t.R1)(B)+a,class:(0,t.C4)(["code-line",{"highlighted-line":e.highlightedLines.includes((0,t.R1)(B)+a+1)}]),style:(0,t.Tr)({height:(0,t.R1)(b)+"px",lineHeight:(0,t.R1)(b)+"px"}),innerHTML:(l=>{let a=`line_${l}_${e.language}`;if(y.value.has(a))return y.value.get(a);try{let t=n().highlight(l,n().languages[e.language]||n().languages.log,e.language);return y.value.set(a,t),t}catch(e){return console.warn("代码高亮失败:",e),y.value.set(a,l),l}})(l)},null,14,r))),128))])],4)],4)):((0,t.uX)(),(0,t.CE)(t.FK,{key:1},[e.showLineNumbers?((0,t.uX)(),(0,t.CE)("div",{key:0,ref_key:"lineNumbersContainer",ref:s,class:"line-numbers-container non-virtual",style:(0,t.Tr)({width:(0,t.R1)(Q)})},[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)((0,t.R1)(W),(l,a)=>{var u;return(0,t.uX)(),(0,t.CE)("div",{key:`line-${a}`,class:(0,t.C4)(["line-number",{highlighted:e.highlightedLines.includes((null==(u=k.value[a])?void 0:u.lineNumber)||1),"original-line":l.isOriginalLine}]),style:(0,t.Tr)({minHeight:Math.max(L(),18)+"px"})},(0,t.v_)(l.isOriginalLine?l.lineNumber:""),7)}),128))],4)):(0,t.Q3)("",!0),(0,t.Lk)("div",{ref_key:"codeContent",ref:h,class:"code-content non-virtual",style:(0,t.Tr)({marginLeft:e.showLineNumbers?(0,t.R1)(Q):"0"})},[(0,t.Lk)("pre",{ref_key:"codePre",ref:u,class:(0,t.C4)(["code-pre",[`language-${e.language}`,{"word-wrap":e.wordWrap}]])},[a[0]||(a[0]=(0,t.eW)("					",-1)),(0,t.Lk)("code",{ref_key:"codeElement",ref:v,class:(0,t.C4)(`language-${e.language}`),innerHTML:(0,t.R1)(x)},null,10,o),a[1]||(a[1]=(0,t.eW)("\n				",-1))],2)],4)],64))],38))}}),s=(0,a(64901).default)(v,[["__scopeId","data-v-9c7d8240"]])}}]);