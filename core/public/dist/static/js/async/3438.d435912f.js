"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([["3438"],{60045(e,a,t){t.d(a,{h:()=>o});var l=t(90290),i=t(98179);let s=Symbol("MODAL_INJECT"),o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{state:a={},component:t,onCancel:o,onConfirm:n}=e,d=(0,l.Kh)({});return t?[(0,l.pM)({setup(i,o){let{attrs:n,slots:u}=o;return(0,l.Gt)(s,{state:a,options:e,extendApi:e=>{Object.setPrototypeOf(d,e)},setState:e=>{Object.assign(a,e)}}),()=>(0,l.h)(t,{...i,...n},u)}}),d]:[(0,l.pM)({setup(a,t){let{attrs:u,slots:r}=t,c=(0,l.WQ)(s),v=(0,l.KR)(!1);return d.open=()=>{var a;v.value=!0,null==(a=e.onChangeState)||a.call(e,v.value)},d.close=()=>{v.value=!1},d.setState=a=>{var t;null==c||c.setState(a),null==(t=e.onChangeState)||t.call(e,v.value)},d.getState=()=>(null==c?void 0:c.state)??{},null==c||c.extendApi(d),()=>(0,l.bF)(i.A,(0,l.v6)({show:v.value},a,u,{onCancel:o,onConfirm:n,"onUpdate:show":e=>{v.value=e??!1}}),r)}}),d]}},22392(e,a,t){t.d(a,{$5:()=>d,Es:()=>h,KY:()=>g,Kr:()=>r,PV:()=>m,TA:()=>s,aV:()=>o,lZ:()=>p,nz:()=>f,p9:()=>c,pC:()=>y,rN:()=>_,tP:()=>n,xZ:()=>v,yT:()=>b,yu:()=>u});var l=t(85020);let{t:i}=t(46831).Ay.global,s=e=>l.K.get("/domains/list",{params:e}),o=()=>l.K.get("/domains/all"),n=()=>l.K.post("/multi_ip_domain/apply"),d=e=>l.K.post("/domains/create",e,{fetchOptions:{loading:i("domain.api.loading.creating"),successMessage:!0}}),u=e=>l.K.post("/domains/update",e,{fetchOptions:{loading:i("domain.api.loading.updating"),successMessage:!0}}),r=e=>l.K.post("/domains/delete",e,{fetchOptions:{loading:i("domain.api.loading.deleting"),successMessage:!0}}),c=e=>l.K.post("/domains/set_ssl",e,{fetchOptions:{loading:i("domain.api.loading.settingSSL"),successMessage:!0}}),v=e=>l.K.get("/domains/get_ssl",{params:e}),p=e=>l.K.post("/domains/fresh_dns_records",e,{fetchOptions:{loading:i("domain.api.loading.refreshingDns"),successMessage:!0}}),m=e=>l.K.post("/ssl/apply_cert",e,{fetchOptions:{loading:i("domain.api.loading.applyingCert"),successMessage:!0}}),g=e=>l.K.post("/domains/set_default_domain",e,{fetchOptions:{loading:i("domain.api.loading.settingDefault"),successMessage:!0}}),f=e=>l.K.post("/askai/project/create",e,{fetchOptions:{loading:i("domain.api.loading.settingBrandInfo"),successMessage:!0}}),_=e=>l.K.post("/multi_ip_domain/test",e,{fetchOptions:{loading:i("domain.api.loading.testingConnection"),successMessage:!0}}),y=()=>l.K.post("/askai/supplier/status"),h=e=>l.K.post("/domain_blocklist/check",e,{fetchOptions:{loading:i("domain.api.loading.detecting"),successMessage:!0}}),b=e=>l.K.get("/domain_blocklist/logs",{params:e})},95027(e,a,t){t.d(a,{A2:()=>c,CM:()=>d,HN:()=>u,IR:()=>s,Ot:()=>o,VP:()=>r,W6:()=>n,cq:()=>v,ni:()=>p});var l=t(85020);let{t:i}=t(46831).Ay.global,s=e=>l.K.get("/overview",{params:e}),o=e=>l.K.get("/overview/failed",{params:e}),n=()=>l.K.get("/postfix_queue/list"),d=e=>l.K.get("/postfix_queue/queue_info",{params:e}),u=e=>l.K.post("/postfix_queue/flush_by_id",e,{fetchOptions:{loading:i("overview.api.loading.resendQueue"),successMessage:!0}}),r=e=>l.K.post("/postfix_queue/delete_by_id",e,{fetchOptions:{loading:i("overview.api.loading.deleteQueue"),successMessage:!0}}),c=()=>l.K.get("/postfix_queue/get_config"),v=e=>l.K.post("/postfix_queue/set_all_config",e,{fetchOptions:{loading:i("overview.api.loading.setQueueConfig"),successMessage:!0}}),p=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return l.K.post("/postfix_queue/delete",e,{fetchOptions:{loading:i("overview.api.loading.clearQueue"),successMessage:!0}})}},68248(e,a,t){t.r(a),t.d(a,{default:()=>$});var l=t(23141),i=t(90290),s=t(22720),o=t(30543),n=t(12532),d=t(60045),u=t(95027),r=t(51625),c=t(5887),v=t(99076),p=t(95403),m=t(16172),g=t(6463),f=t(12268),_=t(22392),y=t(3401);let h={class:"filter-bar"},b={class:"w-260px"},w={class:"date-filters"},K={class:"w-240px"},R=(0,i.pM)({__name:"FilterBar",props:{domain:{},domainModifiers:{},dateRange:{},dateRangeModifiers:{}},emits:["update:domain","update:dateRange"],setup(e){let{t:a}=(0,y.s9)(),t=(0,i.fn)(e,"domain"),l=(0,i.fn)(e,"dateRange"),s=(0,i.KR)([{label:a("common.all.domain"),value:""}]),o=(0,i.KR)("today"),d=e=>{let a=new Date,t=(0,m.f)(a,-30);return(0,g.o)(t).getTime()>e||(0,f.D)(a).getTime()<e},u=e=>{switch(e){case"today":l.value=(0,n.JZ)();break;case"yesterday":l.value=(0,n.JZ)((0,m.f)(new Date,-1));break;case"last7days":l.value=R()}},R=()=>{let e=new Date,a=(0,f.D)(e);return[(0,g.o)((0,m.f)(e,-6)).getTime(),a.getTime()]},k=e=>{o.value="custom",l.value=[(0,g.o)(e[0]).getTime(),(0,f.D)(e[1]).getTime()]},F=async()=>{let e=await (0,_.aV)();(0,n.cy)(e)&&(s.value=e.map(e=>({label:e.domain,value:e.domain})),s.value.unshift({label:a("common.all.domain"),value:""}))};return(0,i.sV)(()=>{F()}),(e,a)=>{let n=p.A,m=v.A,g=c.A,f=r.A;return(0,i.uX)(),(0,i.CE)("div",h,[(0,i.Lk)("div",b,[(0,i.bF)(n,{value:t.value,"onUpdate:value":a[0]||(a[0]=e=>t.value=e),options:(0,i.R1)(s)},null,8,["value","options"])]),(0,i.Lk)("div",w,[(0,i.bF)(g,{value:(0,i.R1)(o),"onUpdate:value":[a[1]||(a[1]=e=>(0,i.i9)(o)?o.value=e:null),u]},{default:(0,i.k6)(()=>[(0,i.bF)(m,{value:"today"},{default:(0,i.k6)(()=>[(0,i.eW)((0,i.v_)(e.$t("common.time.today")),1)]),_:1}),(0,i.bF)(m,{value:"yesterday"},{default:(0,i.k6)(()=>[(0,i.eW)((0,i.v_)(e.$t("common.time.yesterday")),1)]),_:1}),(0,i.bF)(m,{value:"last7days"},{default:(0,i.k6)(()=>[(0,i.eW)((0,i.v_)(e.$t("common.time.last7days")),1)]),_:1})]),_:1},8,["value"]),(0,i.Lk)("div",K,[(0,i.bF)(f,{value:l.value,type:"daterange","is-date-disabled":d,"onUpdate:value":k},null,8,["value"])])])])}}});var k=t(64901);let F=(0,k.default)(R,[["__scopeId","data-v-faf00820"]]);var M=t(40047),A=t(19158),O=t(85956),C=t(27428),D=t(77625),x=t(62606);let S=(0,i.pM)({__name:"SendFailDetails",setup(e){let{t:a}=(0,y.s9)(),t=(0,i.KR)(!1),l=(0,i.KR)([]),s=(0,i.KR)([{key:"recipient",title:a("overview.sendFailDetails.columns.recipient"),width:160,render:e=>(0,i.bF)(x.Ay,{class:e.tooltip?"":"break-all!","line-clamp":e.tooltip?999:1,tooltip:!1},{default:()=>[e.recipient]})},{key:"dsn",title:a("overview.sendFailDetails.columns.dsn"),width:60},{key:"delay",title:a("overview.sendFailDetails.columns.delay"),width:70},{key:"delays",title:a("overview.sendFailDetails.columns.delays"),width:150},{key:"status",title:a("overview.sendFailDetails.columns.status"),width:100,ellipsis:{tooltip:!0},render:e=>e.status},{key:"relay",title:a("overview.sendFailDetails.columns.relay"),width:200,render:e=>(0,i.bF)(x.Ay,{class:e.tooltip?"":"break-all!","line-clamp":e.tooltip?9999:1,tooltip:!1},{default:()=>[e.relay]})},{key:"description",title:a("overview.sendFailDetails.columns.details"),render:e=>(0,i.bF)(x.Ay,{class:e.tooltip?"":"break-all!","line-clamp":e.tooltip?9999:1,tooltip:!1},{default:()=>[e.description]})}]),o=e=>({onMousemove:()=>{e.tooltip=!0},onMouseleave:()=>{e.tooltip=!1}}),r=async(e,a,i)=>{try{t.value=!0;let s=await (0,u.Ot)({domain:e,start_time:a/1e3,end_time:i/1e3});l.value=(0,n.cy)(s)?s:[]}finally{t.value=!1}},[c,v]=(0,d.h)({onChangeState:e=>{if(e){let e=v.getState();r(e.domain,e.startTime,e.endTime)}else l.value=[]}});return(e,n)=>{let d=D.A;return(0,i.uX)(),(0,i.Wv)((0,i.R1)(c),{title:(0,i.R1)(a)("overview.sendFailDetails.title"),width:1e3,footer:!1},{default:(0,i.k6)(()=>[(0,i.bF)(d,{loading:(0,i.R1)(t),"max-height":600,data:(0,i.R1)(l),columns:(0,i.R1)(s),"row-props":o},null,8,["loading","data","columns"])]),_:1},8,["title"])}}});var T=t(75220);let q={class:"email-analytics-container"},L={class:"bt-title"},U={class:"metrics-cards"},I={class:"detail-row"},Q={class:"rate-charts-card"},W=(0,i.pM)({__name:"index",setup(e){let{t:a}=(0,y.s9)(),t=(0,o.B)(),r=(0,i.KR)(""),c=(0,i.KR)((0,n.JZ)()),v=(0,i.KR)([]),p=(0,i.Kh)({delivery_rate:{label:a("overview.delivered"),value:0,unit:"%"},open_rate:{label:a("overview.opened"),value:0,unit:"%"},click_rate:{label:a("overview.clicked"),value:0,unit:"%"},bounce_rate:{label:a("overview.bounced"),value:0,unit:"%"}}),m=(0,i.KR)(0),g=(0,i.KR)({column_type:"hourly",dashboard:{delivered:0,delivery_rate:0,failed:0,failure_rate:0,sends:0},data:[]}),f=(0,i.KR)({column_type:"hourly",data:[]}),_=(0,i.KR)({column_type:"hourly",data:[]}),h=(0,i.KR)({column_type:"hourly",data:[]}),b=(0,T.rd)(),w=()=>{b.push("/settings/send-queue")},[K,R]=(0,d.h)({component:S}),k=()=>{R.setState({domain:r.value,startTime:c.value[0],endTime:c.value[1]}),R.open()},D=(0,s.Q0)(x,300);async function x(){let e=await (0,u.IR)({domain:r.value,start_time:Math.floor(c.value[0]/1e3),end_time:Math.floor(c.value[1]/1e3)});if((0,n.Gv)(e)){var a;Object.entries(a=e.dashboard).forEach(e=>{let[a,t]=e;a in p&&(p[a].value=t)}),m.value=a.delayed_queue,v.value=(0,n.cy)(e.mail_providers)?e.mail_providers:[],g.value=e.send_mail_chart,f.value=e.bounce_rate_chart,_.value=e.click_rate_chart,h.value=e.open_rate_chart}}return(0,i.sV)(()=>{x()}),(e,s)=>{let o=l.Ay;return(0,i.uX)(),(0,i.CE)("div",q,[(0,i.Lk)("div",L,(0,i.v_)((0,i.R1)(a)("layout.menu.overview")),1),(0,i.bF)(F,{domain:(0,i.R1)(r),"onUpdate:domain":[s[0]||(s[0]=e=>(0,i.i9)(r)?r.value=e:null),(0,i.R1)(D)],"date-range":(0,i.R1)(c),"onUpdate:dateRange":[s[1]||(s[1]=e=>(0,i.i9)(c)?c.value=e:null),(0,i.R1)(D)]},null,8,["domain","date-range","onUpdate:domain","onUpdate:dateRange"]),(0,i.Lk)("div",U,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)((0,i.R1)(p),(e,a)=>((0,i.uX)(),(0,i.Wv)(M.A,{key:a,title:e.label,value:e.value,unit:e.unit},null,8,["title","value","unit"]))),128)),(0,i.bF)(M.A,{class:"cursor-pointer",title:e.$t("overview.delayedQueue"),value:(0,i.R1)(m),"text-color":(0,i.R1)(m)>0?(0,i.R1)(t).warningColor:"",onClick:w},null,8,["title","value","text-color"])]),(0,i.Lk)("div",I,[(0,i.bF)(o,{class:"provider-table-card",title:e.$t("overview.mailProviders")},{default:(0,i.k6)(()=>[(0,i.bF)(A.A,{value:(0,i.R1)(v),"onUpdate:value":s[2]||(s[2]=e=>(0,i.i9)(v)?v.value=e:null)},null,8,["value"])]),_:1},8,["title"]),(0,i.bF)(o,{class:"send-today-card",title:e.$t("overview.sendStats")},{default:(0,i.k6)(()=>[(0,i.bF)(O.A,{data:(0,i.R1)(g),onShowFail:k},null,8,["data"])]),_:1},8,["title"])]),(0,i.Lk)("div",Q,[(0,i.bF)(C.A,{bounce:(0,i.R1)(f),click:(0,i.R1)(_),open:(0,i.R1)(h)},null,8,["bounce","click","open"])]),(0,i.bF)((0,i.R1)(K))])}}}),$=(0,k.default)(W,[["__scopeId","data-v-8770e7f0"]])}}]);