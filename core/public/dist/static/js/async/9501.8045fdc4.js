"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([["9501"],{95027(e,t,l){l.d(t,{A2:()=>c,CM:()=>r,HN:()=>s,IR:()=>u,Ot:()=>n,VP:()=>d,W6:()=>o,cq:()=>v,ni:()=>f});var a=l(85020);let{t:i}=l(46831).Ay.global,u=e=>a.K.get("/overview",{params:e}),n=e=>a.K.get("/overview/failed",{params:e}),o=()=>a.K.get("/postfix_queue/list"),r=e=>a.K.get("/postfix_queue/queue_info",{params:e}),s=e=>a.K.post("/postfix_queue/flush_by_id",e,{fetchOptions:{loading:i("overview.api.loading.resendQueue"),successMessage:!0}}),d=e=>a.K.post("/postfix_queue/delete_by_id",e,{fetchOptions:{loading:i("overview.api.loading.deleteQueue"),successMessage:!0}}),c=()=>a.K.get("/postfix_queue/get_config"),v=e=>a.K.post("/postfix_queue/set_all_config",e,{fetchOptions:{loading:i("overview.api.loading.setQueueConfig"),successMessage:!0}}),f=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a.K.post("/postfix_queue/delete",e,{fetchOptions:{loading:i("overview.api.loading.clearQueue"),successMessage:!0}})}},80111(e,t,l){l.d(t,{u:()=>n});var a=l(22720),i=l(12532),u=l(90290);let n=e=>{let{params:t,fetchFn:l,useParams:n,loading:o=!0,immediate:r=!0,rowKey:s=e=>e.id}=e,d=(0,u.KR)(o),c=(0,u.KR)([]),v=(0,u.KR)(0),f=(0,u.KR)(t),p=(0,u.KR)([]),m=(0,a.Q0)(async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&(f.value.page=1),d.value=!0;try{let e=n?n(f.value):f.value,t=await l(e);(0,i.Gv)(t)&&(c.value=(0,i.cy)(t.list)?t.list:[],v.value=(0,i.Et)(t.total)?t.total:0)}finally{p.value=[],d.value=!1}},300),b=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return m(e)},_=e=>{f.value.page=e},g=e=>{f.value.page_size=e};return(0,u.sV)(()=>{r&&b()}),{tableData:c,tableTotal:v,tableKeys:p,tableParams:f,fetchTable:b,resetTable:()=>b(!0),tableProps:(0,u.EW)(()=>({rowKey:s,data:c.value,loading:d.value,checkedRowKeys:p.value,onUpdateCheckedRowKeys:e=>{p.value=e}})),batchProps:(0,u.EW)(()=>({rowKey:s,data:c.value,checkedRowKeys:p.value,onUpdateCheckedRowKeys:e=>{p.value=e}})),pageProps:(0,u.EW)(()=>({page:f.value.page,pageSize:f.value.page_size,itemCount:v.value,onUpdatePage:_,onUpdatePageSize:g}))}}},91756(e,t,l){l.d(t,{A:()=>r});var a=l(27546),i=l(29207),u=l(90290);let n={class:"flex gap-10px"},o={class:"flex-center w-40px"},r=(0,u.pM)({__name:"index",props:{data:{type:Array,default:()=>[]},rowKey:{type:Function,required:!0},options:{type:Array,default:()=>[]},checkedRowKeys:{type:Array,default:()=>[]}},emits:["updateCheckedRowKeys","select"],setup(e,t){let{emit:l}=t,r=(0,u.EW)({get:()=>e.checkedRowKeys.length>0&&e.checkedRowKeys.length===e.data.length,set(t){l("updateCheckedRowKeys",t?e.data.map(t=>e.rowKey(t)):[])}}),s=(0,u.EW)(()=>0===e.data.length),d=(0,u.EW)(()=>e.checkedRowKeys.length>0&&e.checkedRowKeys.length<e.data.length),c=(0,u.EW)(()=>0===e.checkedRowKeys.length);return(t,v)=>{let f=i.A,p=a.Ay;return(0,u.uX)(),(0,u.CE)("div",n,[(0,u.Lk)("div",o,[(0,u.bF)(f,{checked:(0,u.R1)(r),"onUpdate:checked":v[0]||(v[0]=e=>(0,u.i9)(r)?r.value=e:null),disabled:(0,u.R1)(s),indeterminate:(0,u.R1)(d)},null,8,["checked","disabled","indeterminate"])]),((0,u.uX)(!0),(0,u.CE)(u.FK,null,(0,u.pI)(e.options,t=>((0,u.uX)(),(0,u.Wv)(p,{key:t.value,disabled:(0,u.R1)(c)||t.disabled,onClick:a=>{l("select",t.value,e.checkedRowKeys)}},{default:(0,u.k6)(()=>[(0,u.eW)((0,u.v_)(t.label),1)]),_:2},1032,["disabled","onClick"]))),128))])}}})},63919(e,t,l){l.d(t,{A:()=>u});var a=l(85684),i=l(90290);let u=(0,i.pM)({__name:"index",setup(e){let t=!!(0,i.Ht)().toolsLeft,l=!!(0,i.Ht)().toolsRight,u=!!(0,i.Ht)().pageLeft||!!(0,i.Ht)().pageRight;return(e,n)=>{let o=a.A;return(0,i.uX)(),(0,i.CE)("div",null,[t||l?((0,i.uX)(),(0,i.Wv)(o,{key:0,class:"items-center mb-12px",justify:"space-between"},{default:(0,i.k6)(()=>[(0,i.bF)(o,{class:"items-center",size:12},{default:(0,i.k6)(()=>[(0,i.RG)(e.$slots,"toolsLeft")]),_:3}),(0,i.bF)(o,{class:"items-center",size:12},{default:(0,i.k6)(()=>[(0,i.RG)(e.$slots,"toolsRight")]),_:3})]),_:3})):(0,i.Q3)("",!0),(0,i.RG)(e.$slots,"table"),(0,i.R1)(u)?((0,i.uX)(),(0,i.Wv)(o,{key:1,class:"items-center mt-12px",justify:"space-between"},{default:(0,i.k6)(()=>[(0,i.Lk)("div",null,[(0,i.RG)(e.$slots,"pageLeft")]),(0,i.bF)(o,null,{default:(0,i.k6)(()=>[(0,i.RG)(e.$slots,"pageRight")]),_:3})]),_:3})):(0,i.Q3)("",!0),(0,i.RG)(e.$slots,"modal")])}}})},13665(e,t,l){l.d(t,{A:()=>u});var a=l(62408),i=l(90290);let u=(0,i.pM)({__name:"index",props:{model:{},rules:{},labelWidth:{},labelPlacement:{default:"top"}},setup(e,t){let{expose:l}=t,u=(0,i.KR)(null);return l({validate:()=>{var e;return null==(e=u.value)?void 0:e.validate()},restoreValidation:()=>{var e;return null==(e=u.value)?void 0:e.restoreValidation()}}),(t,l)=>{let n=a.A;return(0,i.uX)(),(0,i.Wv)(n,(0,i.v6)(t.$attrs,{ref_key:"formRef",ref:u,model:e.model,rules:e.rules,"label-width":e.labelWidth,"label-placement":e.labelPlacement}),{default:(0,i.k6)(()=>[(0,i.RG)(t.$slots,"default")]),_:3},16,["model","rules","label-width","label-placement"])}}})},87085(e,t,l){l.r(t),l.d(t,{default:()=>k});var a=l(63919),i=l(91756),u=l(77625),n=l(90290),o=l(27546),r=l(85684),s=l(12532),d=l(80111),c=l(95027),v=l(98179),f=l(13665),p=l(60801),m=l(45449);let b=(0,n.pM)({__name:"param-config",setup(e,t){let{expose:l}=t,a=(0,n.KR)(!1),i=(0,n.Kh)({bounce_queue_lifetime:"",maximal_queue_lifetime:"",minimal_backoff_time:"",maximal_backoff_time:"",queue_run_delay:"",trigger_timeout:""}),u=async()=>{let e=await (0,c.A2)();(0,s.Gv)(e)&&Object.assign(i,e)},o=async()=>{await (0,c.cq)((0,n.ux)(i))};return l({open:()=>{a.value=!0,u()}}),(e,t)=>{let l=m.A,u=p.Ay,r=f.A,s=v.A;return(0,n.uX)(),(0,n.Wv)(s,{show:(0,n.R1)(a),"onUpdate:show":t[6]||(t[6]=e=>(0,n.i9)(a)?a.value=e:null),width:520,title:e.$t("overview.sendQueue.paramConfig.title"),onConfirm:o},{default:(0,n.k6)(()=>[(0,n.bF)(r,{class:"pt-8px"},{default:(0,n.k6)(()=>[(0,n.bF)(u,{label:e.$t("overview.sendQueue.paramConfig.fields.bounceQueueLifetime")},{default:(0,n.k6)(()=>[(0,n.bF)(l,{value:(0,n.R1)(i).bounce_queue_lifetime,"onUpdate:value":t[0]||(t[0]=e=>(0,n.R1)(i).bounce_queue_lifetime=e)},null,8,["value"])]),_:1},8,["label"]),(0,n.bF)(u,{label:e.$t("overview.sendQueue.paramConfig.fields.maximalQueueLifetime")},{default:(0,n.k6)(()=>[(0,n.bF)(l,{value:(0,n.R1)(i).maximal_queue_lifetime,"onUpdate:value":t[1]||(t[1]=e=>(0,n.R1)(i).maximal_queue_lifetime=e)},null,8,["value"])]),_:1},8,["label"]),(0,n.bF)(u,{label:e.$t("overview.sendQueue.paramConfig.fields.minimalBackoffTime")},{default:(0,n.k6)(()=>[(0,n.bF)(l,{value:(0,n.R1)(i).minimal_backoff_time,"onUpdate:value":t[2]||(t[2]=e=>(0,n.R1)(i).minimal_backoff_time=e)},null,8,["value"])]),_:1},8,["label"]),(0,n.bF)(u,{label:e.$t("overview.sendQueue.paramConfig.fields.maximalBackoffTime")},{default:(0,n.k6)(()=>[(0,n.bF)(l,{value:(0,n.R1)(i).maximal_backoff_time,"onUpdate:value":t[3]||(t[3]=e=>(0,n.R1)(i).maximal_backoff_time=e)},null,8,["value"])]),_:1},8,["label"]),(0,n.bF)(u,{label:e.$t("overview.sendQueue.paramConfig.fields.queueRunDelay")},{default:(0,n.k6)(()=>[(0,n.bF)(l,{value:(0,n.R1)(i).queue_run_delay,"onUpdate:value":t[4]||(t[4]=e=>(0,n.R1)(i).queue_run_delay=e)},null,8,["value"])]),_:1},8,["label"]),(0,n.bF)(u,{label:e.$t("overview.sendQueue.paramConfig.fields.triggerTimeout")},{default:(0,n.k6)(()=>[(0,n.bF)(l,{value:(0,n.R1)(i).trigger_timeout,"onUpdate:value":t[5]||(t[5]=e=>(0,n.R1)(i).trigger_timeout=e)},null,8,["value"])]),_:1},8,["label"])]),_:1})]),_:1},8,["show","title"])}}});var _=l(76628),g=l(77380);let y=(0,n.pM)({__name:"queue-logs",setup(e,t){let{expose:l}=t,a=(0,n.KR)(!1),i=(0,n.KR)(!1),u=(0,n.KR)("");return l({open:async e=>{a.value=!0,i.value=!0,u.value="";try{let t=await (0,c.CM)({queue_id:e});(0,s.Kg)(t)&&(u.value=t)}finally{i.value=!1}}}),(e,t)=>{let l=g.A,o=_.A,r=v.A;return(0,n.uX)(),(0,n.Wv)(r,{show:(0,n.R1)(a),"onUpdate:show":t[0]||(t[0]=e=>(0,n.i9)(a)?a.value=e:null),title:e.$t("overview.sendQueue.queueLogs.title"),width:800,footer:!1},{default:(0,n.k6)(()=>[(0,n.bF)(o,{show:(0,n.R1)(i)},{default:(0,n.k6)(()=>[(0,n.bF)(l,{height:"520px",code:(0,n.R1)(u)},null,8,["code"])]),_:1},8,["show"])]),_:1},8,["show","title"])}}});var h=l(3401);function w(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!(0,n.vv)(e)}let k=(0,n.pM)({__name:"index",setup(e){let{t}=(0,h.s9)(),l=(0,n.rk)("configModalRef"),v=(0,n.rk)("logsModalRef"),f=()=>{var e;null==(e=l.value)||e.open()},p=()=>{(0,s.lJ)({title:t("overview.sendQueue.confirm.quickClear.title"),content:t("overview.sendQueue.confirm.quickClear.content"),confirmType:"error",onConfirm:async()=>{await (0,c.ni)(),g()}})},{tableProps:m,batchProps:_,fetchTable:g}=(0,d.u)({params:{},fetchFn:c.W6,rowKey:e=>e.queue_id}),k=(0,n.KR)([{width:40,type:"selection"},{key:"queue_id",title:"ID",width:"8%",minWidth:"90px",render:e=>(0,n.bF)(o.Ay,{type:"primary",text:!0,onClick:()=>{var t;null==(t=v.value)||t.open(e.queue_id)}},{default:()=>[e.queue_id]})},{key:"sender",title:t("overview.sendQueue.table.columns.sender"),width:"10%",minWidth:"120px"},{key:"recipient",title:t("overview.sendQueue.table.columns.recipient"),width:"10%",minWidth:"120px",ellipsis:{tooltip:!0}},{key:"arrival_time",title:t("overview.sendQueue.table.columns.arrivalTime"),width:"12%",minWidth:"130px",render:e=>(0,s.fU)(e.arrival_time)},{key:"message_size",title:t("overview.sendQueue.table.columns.messageSize"),width:"8%",minWidth:"80px",render:e=>(0,s.JB)(e.message_size)},{key:"delay_reason",title:t("overview.sendQueue.table.columns.delayReason"),ellipsis:{tooltip:!0}},{key:"action",title:t("overview.sendQueue.table.columns.action"),align:"right",width:120,render:e=>{let l,a;return(0,n.bF)(r.A,{inline:!0},{default:()=>[(0,n.bF)(o.Ay,{type:"primary",text:!0,onClick:()=>{R(e)}},w(l=t("overview.sendQueue.buttons.resend"))?l:{default:()=>[l]}),(0,n.bF)(o.Ay,{type:"error",text:!0,onClick:()=>{x(e)}},w(a=t("common.actions.delete"))?a:{default:()=>[a]})]})}}]),R=async e=>{(0,s.lJ)({title:t("overview.sendQueue.confirm.resend.title"),content:t("overview.sendQueue.confirm.resend.content"),onConfirm:async()=>{await (0,c.HN)({queue_ids:[e.queue_id]}),g()}})},x=async e=>{(0,s.lJ)({title:t("overview.sendQueue.confirm.delete.title"),content:t("overview.sendQueue.confirm.delete.content"),confirmType:"error",onConfirm:async()=>{await (0,c.VP)({queue_ids:[e.queue_id]}),g()}})},C=[{label:t("overview.sendQueue.buttons.batchDelete"),value:"delete"},{label:t("overview.sendQueue.buttons.batchResend"),value:"resend"}],K=(e,t)=>{switch(e){case"delete":Q(t);break;case"resend":A(t)}},Q=async e=>{(0,s.lJ)({title:t("overview.sendQueue.confirm.batchDelete.title"),content:t("overview.sendQueue.confirm.batchDelete.content",{count:e.length}),confirmType:"error",onConfirm:async()=>{await (0,c.VP)({queue_ids:e}),g()}})},A=async e=>{(0,s.lJ)({title:t("overview.sendQueue.confirm.batchResend.title"),content:t("overview.sendQueue.confirm.batchResend.content",{count:e.length}),onConfirm:async()=>{await (0,c.HN)({queue_ids:e}),g()}})};return(e,t)=>{let r=u.A,s=i.A,d=a.A;return(0,n.uX)(),(0,n.Wv)(d,null,{toolsLeft:(0,n.k6)(()=>[(0,n.bF)((0,n.R1)(o.Ay),{type:"primary",onClick:t[0]||(t[0]=e=>(0,n.R1)(g)())},{default:(0,n.k6)(()=>[(0,n.eW)((0,n.v_)(e.$t("overview.sendQueue.buttons.refresh")),1)]),_:1}),(0,n.bF)((0,n.R1)(o.Ay),{onClick:p},{default:(0,n.k6)(()=>[(0,n.eW)((0,n.v_)(e.$t("overview.sendQueue.buttons.quickClear")),1)]),_:1}),(0,n.bF)((0,n.R1)(o.Ay),{onClick:f},{default:(0,n.k6)(()=>[(0,n.eW)((0,n.v_)(e.$t("overview.sendQueue.buttons.paramConfig")),1)]),_:1})]),table:(0,n.k6)(()=>[(0,n.bF)(r,(0,n.v6)((0,n.R1)(m),{"max-height":"540px",columns:(0,n.R1)(k)}),null,16,["columns"])]),pageLeft:(0,n.k6)(()=>[(0,n.bF)(s,(0,n.v6)((0,n.R1)(_),{options:C,onSelect:K}),null,16)]),modal:(0,n.k6)(()=>[(0,n.bF)(b,{ref_key:"configModalRef",ref:l},null,512),(0,n.bF)(y,{ref_key:"logsModalRef",ref:v},null,512)]),_:1})}}})},85684(e,t,l){l.d(t,{A:()=>p});var a=l(44041),i=l(90290),u=l(49359),n=l(50922),o=l(79623),r=l(75454),s=l(69598),d=l(14957),c=l(20649);let v={name:"Flex",self:function(){return c.A}},f=Object.assign(Object.assign({},u.A.props),{align:String,justify:{type:String,default:"start"},inline:Boolean,vertical:Boolean,reverse:Boolean,size:{type:[String,Number,Array],default:"medium"},wrap:{type:Boolean,default:!0}}),p=(0,i.pM)({name:"Flex",props:f,setup(e){let{mergedClsPrefixRef:t,mergedRtlRef:l}=(0,n.Ay)(e),s=(0,u.A)("Flex","-flex",void 0,v,e,t);return{rtlEnabled:(0,o.I)("Flex",l,t),mergedClsPrefix:t,margin:(0,i.EW)(()=>{let{size:t}=e;if(Array.isArray(t))return{horizontal:t[0],vertical:t[1]};if("number"==typeof t)return{horizontal:t,vertical:t};let{self:{[(0,r.cF)("gap",t)]:l}}=s.value,{row:i,col:u}=(0,a.t8)(l);return{horizontal:(0,a.eV)(u),vertical:(0,a.eV)(i)}})}},render(){let{vertical:e,reverse:t,align:l,inline:a,justify:u,margin:n,wrap:o,mergedClsPrefix:r,rtlEnabled:c}=this,v=(0,s.B)((0,d.$)(this),!1);return v.length?(0,i.h)("div",{role:"none",class:[`${r}-flex`,c&&`${r}-flex--rtl`],style:{display:a?"inline-flex":"flex",flexDirection:e&&!t?"column":e&&t?"column-reverse":!e&&t?"row-reverse":"row",justifyContent:u,flexWrap:!o||e?"nowrap":"wrap",alignItems:l,gap:`${n.vertical}px ${n.horizontal}px`}},v):null}})}}]);