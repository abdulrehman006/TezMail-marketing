"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([["3474"],{60045(e,t,a){a.d(t,{h:()=>i});var l=a(90290),r=a(98179);let s=Symbol("MODAL_INJECT"),i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{state:t={},component:a,onCancel:i,onConfirm:n}=e,o=(0,l.Kh)({});return a?[(0,l.pM)({setup(r,i){let{attrs:n,slots:d}=i;return(0,l.Gt)(s,{state:t,options:e,extendApi:e=>{Object.setPrototypeOf(o,e)},setState:e=>{Object.assign(t,e)}}),()=>(0,l.h)(a,{...r,...n},d)}}),o]:[(0,l.pM)({setup(t,a){let{attrs:d,slots:c}=a,p=(0,l.WQ)(s),u=(0,l.KR)(!1);return o.open=()=>{var t;u.value=!0,null==(t=e.onChangeState)||t.call(e,u.value)},o.close=()=>{u.value=!1},o.setState=t=>{var a;null==p||p.setState(t),null==(a=e.onChangeState)||a.call(e,u.value)},o.getState=()=>(null==p?void 0:p.state)??{},null==p||p.extendApi(o),()=>(0,l.bF)(r.A,(0,l.v6)({show:u.value},t,d,{onCancel:i,onConfirm:n,"onUpdate:show":e=>{u.value=e??!1}}),c)}}),o]}},24270(e,t,a){a.d(t,{FI:()=>b,GA:()=>u,MX:()=>o,VP:()=>m,XZ:()=>d,lC:()=>c,oc:()=>g,p0:()=>k,pS:()=>n,u3:()=>i,vq:()=>p});var l=a(46831),r=a(85020);let{t:s}=l.Ru.global;function i(e){return r.K.get("/batch_mail/task/list",{params:e})}function n(e){return r.K.get("/batch_mail/task/stat_chart",{params:e})}function o(e){return r.K.get("/batch_mail/task/find",{params:e})}function d(e){return r.K.post("/batch_mail/task/create",e,{fetchOptions:{loading:s("market.task.loading.creating"),successMessage:!0}})}function c(e){return r.K.post("/batch_mail/task/update",e,{fetchOptions:{loading:s("market.task.loading.updating"),successMessage:!0}})}function p(e){return r.K.post("/batch_mail/task/delete",e,{fetchOptions:{loading:s("market.task.loading.deleting"),successMessage:!0}})}function u(e){return r.K.post("/batch_mail/task/pause",e,{fetchOptions:{loading:s("market.task.loading.pausing"),successMessage:!0}})}function m(e){return r.K.post("/batch_mail/task/resume",e,{fetchOptions:{loading:s("market.task.loading.resuming"),successMessage:!0}})}function b(e){return r.K.post("/batch_mail/task/send_test",e,{fetchOptions:{loading:s("market.task.loading.sendingTest"),successMessage:!0}})}function k(e){return r.K.get("/batch_mail/tracking/mail_provider",{params:e})}function g(e){return r.K.get("/batch_mail/tracking/logs",{params:e})}},6943(e,t,a){a.d(t,{i:()=>i});var l=a(21879),r=a(12532),s=a(90290);let i=e=>{let{fetchFn:t,params:a,loading:i=!1,immediate:n=!1}=e,o=(0,s.KR)(i),d=(0,s.KR)([]),c=(0,s.KR)(0),p=(0,s.KR)(a),u=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(e&&(a.page=1),t){o.value=!0;try{let e=await t(p.value);(0,r.Gv)(e)&&(d.value=(0,r.cy)(e.list)?e.list:[],c.value=(0,l.A)(e.total)?e.total:0)}finally{o.value=!1}}};return n&&u(),{loading:o,tableList:d,tableTotal:c,tableParams:p,getTableData:u}}},90216(e,t,a){a.d(t,{A:()=>s});var l=a(45449),r=a(90290);let s=(0,r.pM)({__name:"index",props:(0,r.zz)({width:{default:240},prefix:{type:Boolean,default:!1}},{value:{default:""},valueModifiers:{}}),emits:(0,r.zz)(["search"],["update:value"]),setup(e,t){let{expose:a,emit:s}=t,i=(0,r.KR)(null),n=(0,r.fn)(e,"value"),o=()=>{s("search",n.value)};return a({focus:()=>{var e;null==(e=i.value)||e.focus()}}),(t,a)=>{let s=l.A;return(0,r.uX)(),(0,r.Wv)(s,(0,r.v6)({ref_key:"inputRef",ref:i,value:n.value,"onUpdate:value":a[0]||(a[0]=e=>n.value=e)},t.$attrs,{class:"bt-search",style:{width:`${e.width}px`},onKeyup:(0,r.jR)(o,["enter"])}),(0,r.eX)({_:2},[e.prefix?{name:"prefix",fn:(0,r.k6)(()=>[(0,r.Lk)("div",{class:"flex items-center cursor-pointer",onClick:o},[...a[1]||(a[1]=[(0,r.Lk)("i",{class:"i-mdi-search text-16px"},null,-1)])])]),key:"0"}:void 0,e.prefix?void 0:{name:"suffix",fn:(0,r.k6)(()=>[(0,r.Lk)("div",{class:"flex items-center cursor-pointer",onClick:o},[...a[2]||(a[2]=[(0,r.Lk)("i",{class:"i-mdi-search text-16px"},null,-1)])])]),key:"1"}]),1040,["value","style"])}}})},28391(e,t,a){a.d(t,{A:()=>n});var l=a(23995),r=a(27546),s=a(90290);let i={class:"leading-22px text-13px text-desc text-center"},n=(0,s.pM)({__name:"index",setup(e){let t=()=>{window.open("https://github.com/aaPanel/BillionMail/issues")},a=()=>{window.open("https://github.com/aaPanel/BillionMail")};return(e,n)=>{let o=r.Ay,d=(0,s.g2)("i18n-t"),c=l.A;return(0,s.uX)(),(0,s.Wv)(c,null,{default:(0,s.k6)(()=>[(0,s.Lk)("div",i,[(0,s.bF)(d,{tag:"span",scope:"global",keypath:"components.tableHelp.text1"},{issues:(0,s.k6)(()=>[(0,s.bF)(o,{class:"text-13px",type:"primary",text:"",onClick:t},{default:(0,s.k6)(()=>[...n[0]||(n[0]=[(0,s.Lk)("span",null,"Issues",-1),(0,s.Lk)("i",{class:"i-mdi:arrow-right ml-1px"},null,-1)])]),_:1})]),star:(0,s.k6)(()=>[(0,s.bF)(o,{class:"text-13px",type:"primary",text:"",onClick:a},{default:(0,s.k6)(()=>[...n[1]||(n[1]=[(0,s.eW)(" Star ",-1),(0,s.Lk)("i",{class:"i-mdi:arrow-right ml-1px"},null,-1)])]),_:1})]),_:1}),n[2]||(n[2]=(0,s.Lk)("br",null,null,-1)),(0,s.Lk)("span",null,(0,s.v_)(e.$t("components.tableHelp.text2")),1)])]),_:1})}}})},63919(e,t,a){a.d(t,{A:()=>s});var l=a(85684),r=a(90290);let s=(0,r.pM)({__name:"index",setup(e){let t=!!(0,r.Ht)().toolsLeft,a=!!(0,r.Ht)().toolsRight,s=!!(0,r.Ht)().pageLeft||!!(0,r.Ht)().pageRight;return(e,i)=>{let n=l.A;return(0,r.uX)(),(0,r.CE)("div",null,[t||a?((0,r.uX)(),(0,r.Wv)(n,{key:0,class:"items-center mb-12px",justify:"space-between"},{default:(0,r.k6)(()=>[(0,r.bF)(n,{class:"items-center",size:12},{default:(0,r.k6)(()=>[(0,r.RG)(e.$slots,"toolsLeft")]),_:3}),(0,r.bF)(n,{class:"items-center",size:12},{default:(0,r.k6)(()=>[(0,r.RG)(e.$slots,"toolsRight")]),_:3})]),_:3})):(0,r.Q3)("",!0),(0,r.RG)(e.$slots,"table"),(0,r.R1)(s)?((0,r.uX)(),(0,r.Wv)(n,{key:1,class:"items-center mt-12px",justify:"space-between"},{default:(0,r.k6)(()=>[(0,r.Lk)("div",null,[(0,r.RG)(e.$slots,"pageLeft")]),(0,r.bF)(n,null,{default:(0,r.k6)(()=>[(0,r.RG)(e.$slots,"pageRight")]),_:3})]),_:3})):(0,r.Q3)("",!0),(0,r.RG)(e.$slots,"modal")])}}})},23618(e,t,a){a.d(t,{A:()=>n});var l=a(24259),r=a(90290),s=a(12532);let i={class:"ml-8px text-14px"},n=(0,r.pM)({__name:"index",props:(0,r.zz)({storeKey:{default:""},pageSizes:{default:()=>[10,20,50,100]},showTotal:{type:Boolean,default:!0},showSizePicker:{type:Boolean,default:!0},showQuickJumper:{type:Boolean,default:!0},onUpdatePage:{}},{page:{},pageModifiers:{},pageSize:{},pageSizeModifiers:{}}),emits:(0,r.zz)(["refresh"],["update:page","update:pageSize"]),setup(e,t){let{emit:a}=t,n=(0,r.EW)(()=>{let{storeKey:t}=e;return t?`${t}-page`:""}),o=(0,r.fn)(e,"page"),d=(0,r.fn)(e,"pageSize"),c=t=>{var l;null==(l=e.onUpdatePage)||l.call(e,t),a("refresh")},p=t=>{var l;o.value=1,null==(l=e.onUpdatePage)||l.call(e,1),u(t),a("refresh")},u=e=>{n.value&&(0,s.ZB)(n.value,String(e))};if(n.value){let e=(0,s.Lg)(n.value);e&&(d.value=(0,s.WZ)(e))}return(t,a)=>{let s=l.A;return(0,r.uX)(),(0,r.Wv)(s,(0,r.v6)(t.$attrs,{page:o.value,"onUpdate:page":[a[0]||(a[0]=e=>o.value=e),c],"page-size":d.value,"onUpdate:pageSize":[a[1]||(a[1]=e=>d.value=e),p],"show-size-picker":e.showSizePicker,"show-quick-jumper":e.showQuickJumper,"page-sizes":e.pageSizes,"display-order":["pages","size-picker","quick-jumper"]}),(0,r.eX)({_:2},[e.showTotal?{name:"suffix",fn:(0,r.k6)(e=>{let{itemCount:t}=e;return[(0,r.Lk)("span",i," Total "+(0,r.v_)(t),1)]}),key:"0"}:void 0]),1040,["page","page-size","show-size-picker","show-quick-jumper","page-sizes"])}}})},20425(e,t,a){a.r(t),a.d(t,{default:()=>E});var l=a(63919),r=a(23618),s=a(77625),i=a(28391),n=a(90216),o=a(90290),d=a(27546),c=a(23254),p=a(98314),u=a(85684),m=a(60045),b=a(6943),k=a(12532),g=a(24270),h=a(29726),f=a(18872),v=a(49359),y=a(50922),_=a(4019),w=a(75454),x=a(69598);function R(e,t="default",a=[]){let{children:l}=e;if(null!==l&&"object"==typeof l&&!Array.isArray(l)){let e=l[t];if("function"==typeof e)return e()}return a}var z=a(14957),A=a(61885);let S=(0,w.c)([(0,w.cB)("descriptions",{fontSize:"var(--n-font-size)"},[(0,w.cB)("descriptions-separator",`
 display: inline-block;
 margin: 0 8px 0 2px;
 `),(0,w.cB)("descriptions-table-wrapper",[(0,w.cB)("descriptions-table",[(0,w.cB)("descriptions-table-row",[(0,w.cB)("descriptions-table-header",{padding:"var(--n-th-padding)"}),(0,w.cB)("descriptions-table-content",{padding:"var(--n-td-padding)"})])])]),(0,w.C5)("bordered",[(0,w.cB)("descriptions-table-wrapper",[(0,w.cB)("descriptions-table",[(0,w.cB)("descriptions-table-row",[(0,w.c)("&:last-child",[(0,w.cB)("descriptions-table-content",{paddingBottom:0})])])])])]),(0,w.cM)("left-label-placement",[(0,w.cB)("descriptions-table-content",[(0,w.c)("> *",{verticalAlign:"top"})])]),(0,w.cM)("left-label-align",[(0,w.c)("th",{textAlign:"left"})]),(0,w.cM)("center-label-align",[(0,w.c)("th",{textAlign:"center"})]),(0,w.cM)("right-label-align",[(0,w.c)("th",{textAlign:"right"})]),(0,w.cM)("bordered",[(0,w.cB)("descriptions-table-wrapper",`
 border-radius: var(--n-border-radius);
 overflow: hidden;
 background: var(--n-merged-td-color);
 border: 1px solid var(--n-merged-border-color);
 `,[(0,w.cB)("descriptions-table",[(0,w.cB)("descriptions-table-row",[(0,w.c)("&:not(:last-child)",[(0,w.cB)("descriptions-table-content",{borderBottom:"1px solid var(--n-merged-border-color)"}),(0,w.cB)("descriptions-table-header",{borderBottom:"1px solid var(--n-merged-border-color)"})]),(0,w.cB)("descriptions-table-header",`
 font-weight: 400;
 background-clip: padding-box;
 background-color: var(--n-merged-th-color);
 `,[(0,w.c)("&:not(:last-child)",{borderRight:"1px solid var(--n-merged-border-color)"})]),(0,w.cB)("descriptions-table-content",[(0,w.c)("&:not(:last-child)",{borderRight:"1px solid var(--n-merged-border-color)"})])])])])]),(0,w.cB)("descriptions-header",`
 font-weight: var(--n-th-font-weight);
 font-size: 18px;
 transition: color .3s var(--n-bezier);
 line-height: var(--n-line-height);
 margin-bottom: 16px;
 color: var(--n-title-text-color);
 `),(0,w.cB)("descriptions-table-wrapper",`
 transition:
 background-color .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 `,[(0,w.cB)("descriptions-table",`
 width: 100%;
 border-collapse: separate;
 border-spacing: 0;
 box-sizing: border-box;
 `,[(0,w.cB)("descriptions-table-row",`
 box-sizing: border-box;
 transition: border-color .3s var(--n-bezier);
 `,[(0,w.cB)("descriptions-table-header",`
 font-weight: var(--n-th-font-weight);
 line-height: var(--n-line-height);
 display: table-cell;
 box-sizing: border-box;
 color: var(--n-th-text-color);
 transition:
 color .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 `),(0,w.cB)("descriptions-table-content",`
 vertical-align: top;
 line-height: var(--n-line-height);
 display: table-cell;
 box-sizing: border-box;
 color: var(--n-td-text-color);
 transition:
 color .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 `,[(0,w.cE)("content",`
 transition: color .3s var(--n-bezier);
 display: inline-block;
 color: var(--n-td-text-color);
 `)]),(0,w.cE)("label",`
 font-weight: var(--n-th-font-weight);
 transition: color .3s var(--n-bezier);
 display: inline-block;
 margin-right: 14px;
 color: var(--n-th-text-color);
 `)])])])]),(0,w.cB)("descriptions-table-wrapper",`
 --n-merged-th-color: var(--n-th-color);
 --n-merged-td-color: var(--n-td-color);
 --n-merged-border-color: var(--n-border-color);
 `),(0,w.EM)((0,w.cB)("descriptions-table-wrapper",`
 --n-merged-th-color: var(--n-th-color-modal);
 --n-merged-td-color: var(--n-td-color-modal);
 --n-merged-border-color: var(--n-border-color-modal);
 `)),(0,w.ES)((0,w.cB)("descriptions-table-wrapper",`
 --n-merged-th-color: var(--n-th-color-popover);
 --n-merged-td-color: var(--n-td-color-popover);
 --n-merged-border-color: var(--n-border-color-popover);
 `))]),F="DESCRIPTION_ITEM_FLAG",$=Object.assign(Object.assign({},v.A.props),{title:String,column:{type:Number,default:3},columns:Number,labelPlacement:{type:String,default:"top"},labelAlign:{type:String,default:"left"},separator:{type:String,default:":"},size:{type:String,default:"medium"},bordered:Boolean,labelClass:String,labelStyle:[Object,String],contentClass:String,contentStyle:[Object,String]}),B=(0,o.pM)({name:"Descriptions",props:$,slots:Object,setup(e){let{mergedClsPrefixRef:t,inlineThemeDisabled:a}=(0,y.Ay)(e),l=(0,v.A)("Descriptions","-descriptions",S,A.A,e,t),r=(0,o.EW)(()=>{let{size:t,bordered:a}=e,{common:{cubicBezierEaseInOut:r},self:{titleTextColor:s,thColor:i,thColorModal:n,thColorPopover:o,thTextColor:d,thFontWeight:c,tdTextColor:p,tdColor:u,tdColorModal:m,tdColorPopover:b,borderColor:k,borderColorModal:g,borderColorPopover:h,borderRadius:f,lineHeight:v,[(0,w.cF)("fontSize",t)]:y,[(0,w.cF)(a?"thPaddingBordered":"thPadding",t)]:_,[(0,w.cF)(a?"tdPaddingBordered":"tdPadding",t)]:x}}=l.value;return{"--n-title-text-color":s,"--n-th-padding":_,"--n-td-padding":x,"--n-font-size":y,"--n-bezier":r,"--n-th-font-weight":c,"--n-line-height":v,"--n-th-text-color":d,"--n-td-text-color":p,"--n-th-color":i,"--n-th-color-modal":n,"--n-th-color-popover":o,"--n-td-color":u,"--n-td-color-modal":m,"--n-td-color-popover":b,"--n-border-radius":f,"--n-border-color":k,"--n-border-color-modal":g,"--n-border-color-popover":h}}),s=a?(0,_.R)("descriptions",(0,o.EW)(()=>{let t="",{size:a,bordered:l}=e;return l&&(t+="a"),t+=a[0]}),r,e):void 0;return{mergedClsPrefix:t,cssVars:a?void 0:r,themeClass:null==s?void 0:s.themeClass,onRender:null==s?void 0:s.onRender,compitableColumn:(0,f.A)(e,["columns","column"]),inlineThemeDisabled:a}},render(){let e=this.$slots.default,t=e?(0,x.B)(e()):[];t.length;let{contentClass:a,labelClass:l,compitableColumn:r,labelPlacement:s,labelAlign:i,size:n,bordered:d,title:c,cssVars:p,mergedClsPrefix:u,separator:m,onRender:b}=this;null==b||b();let k=t.filter(e=>!("object"!=typeof e||!e||Array.isArray(e))&&e.type&&e.type[F]),g=k.reduce((e,t,i)=>{let n=t.props||{},c=k.length-1===i,p=["label"in n?n.label:R(t,"label")],b=[R(t)],g=n.span||1,h=e.span;e.span+=g;let f=n.labelStyle||n["label-style"]||this.labelStyle,v=n.contentStyle||n["content-style"]||this.contentStyle;if("left"===s)d?e.row.push((0,o.h)("th",{class:[`${u}-descriptions-table-header`,l],colspan:1,style:f},p),(0,o.h)("td",{class:[`${u}-descriptions-table-content`,a],colspan:c?(r-h)*2+1:2*g-1,style:v},b)):e.row.push((0,o.h)("td",{class:`${u}-descriptions-table-content`,colspan:c?(r-h)*2:2*g},(0,o.h)("span",{class:[`${u}-descriptions-table-content__label`,l],style:f},[...p,m&&(0,o.h)("span",{class:`${u}-descriptions-separator`},m)]),(0,o.h)("span",{class:[`${u}-descriptions-table-content__content`,a],style:v},b)));else{let t=c?(r-h)*2:2*g;e.row.push((0,o.h)("th",{class:[`${u}-descriptions-table-header`,l],colspan:t,style:f},p)),e.secondRow.push((0,o.h)("td",{class:[`${u}-descriptions-table-content`,a],colspan:t,style:v},b))}return(e.span>=r||c)&&(e.span=0,e.row.length&&(e.rows.push(e.row),e.row=[]),"left"!==s&&e.secondRow.length&&(e.rows.push(e.secondRow),e.secondRow=[])),e},{span:0,row:[],secondRow:[],rows:[]}).rows.map(e=>(0,o.h)("tr",{class:`${u}-descriptions-table-row`},e));return(0,o.h)("div",{style:p,class:[`${u}-descriptions`,this.themeClass,`${u}-descriptions--${s}-label-placement`,`${u}-descriptions--${i}-label-align`,`${u}-descriptions--${n}-size`,d&&`${u}-descriptions--bordered`]},c||this.$slots.header?(0,o.h)("div",{class:`${u}-descriptions-header`},c||(0,z.$)(this,"header")):null,(0,o.h)("div",{class:`${u}-descriptions-table-wrapper`},(0,o.h)("table",{class:`${u}-descriptions-table`},(0,o.h)("tbody",null,"top"===s&&(0,o.h)("tr",{class:`${u}-descriptions-table-row`,style:{visibility:"collapse"}},(0,h.ux)(2*r,(0,o.h)("td",null))),g))))}}),C=(0,o.pM)({name:"DescriptionsItem",[F]:!0,props:{label:String,span:{type:Number,default:1},labelClass:String,labelStyle:[Object,String],contentClass:String,contentStyle:[Object,String]},slots:Object,render:()=>null}),W=(0,o.pM)({__name:"TaskDetail",setup(e){let t=(0,o.KR)(null),[a,l]=(0,m.h)({onChangeState:e=>{e&&(t.value=l.getState().row)}});return(e,l)=>{let r=c.Ay,s=u.A;return(0,o.uX)(),(0,o.Wv)((0,o.R1)(a),{title:e.$t("market.task.detail.title"),width:600,footer:!1},{default:(0,o.k6)(()=>[(0,o.R1)(t)?((0,o.uX)(),(0,o.Wv)(B,{key:0,"label-placement":"left",bordered:!0,column:1,"label-style":{width:"180px"}},{default:(0,o.k6)(()=>[(0,o.bF)(C,{label:e.$t("market.task.detail.displayName")},{default:(0,o.k6)(()=>[(0,o.eW)((0,o.v_)((0,o.R1)(t).full_name),1)]),_:1},8,["label"]),(0,o.bF)(C,{label:e.$t("market.task.detail.sender")},{default:(0,o.k6)(()=>[(0,o.eW)((0,o.v_)((0,o.R1)(t).addresser),1)]),_:1},8,["label"]),(0,o.bF)(C,{label:e.$t("market.task.detail.subject")},{default:(0,o.k6)(()=>[(0,o.eW)((0,o.v_)((0,o.R1)(t).subject),1)]),_:1},8,["label"]),(0,o.bF)(C,{label:e.$t("market.task.detail.groups")},{default:(0,o.k6)(()=>[(0,o.eW)((0,o.v_)((0,o.R1)(t).group_name),1)]),_:1},8,["label"]),(0,o.bF)(C,{label:e.$t("market.task.edit.tags")},{default:(0,o.k6)(()=>[(0,o.bF)(s,null,{default:(0,o.k6)(()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)((0,o.R1)(t).tags,e=>((0,o.uX)(),(0,o.Wv)(r,{key:e.id,size:"small"},{default:(0,o.k6)(()=>[(0,o.eW)((0,o.v_)(e.name),1)]),_:2},1024))),128))]),_:1})]),_:1},8,["label"]),(0,o.bF)(C,{label:e.$t("market.task.edit.tagLogic")},{default:(0,o.k6)(()=>[(0,o.eW)((0,o.v_)((0,o.R1)(t).tag_logic),1)]),_:1},8,["label"]),(0,o.bF)(C,{label:e.$t("market.task.detail.sendTime")},{default:(0,o.k6)(()=>[(0,o.eW)((0,o.v_)((0,o.R1)(k.fU)((0,o.R1)(t).start_time)),1)]),_:1},8,["label"]),(0,o.bF)(C,{label:e.$t("market.task.detail.unsubscribeLink")},{default:(0,o.k6)(()=>[(0,o.eW)((0,o.v_)(1===(0,o.R1)(t).unsubscribe?e.$t("market.task.detail.yes"):e.$t("market.task.detail.no")),1)]),_:1},8,["label"]),(0,o.bF)(C,{label:e.$t("market.task.detail.threads")},{default:(0,o.k6)(()=>[(0,o.eW)((0,o.v_)(0===(0,o.R1)(t).threads?e.$t("market.task.detail.auto"):(0,o.R1)(t).threads),1)]),_:1},8,["label"]),(0,o.bF)(C,{label:e.$t("market.task.detail.remark")},{default:(0,o.k6)(()=>[(0,o.eW)((0,o.v_)((0,o.R1)(t).remark||"--"),1)]),_:1},8,["label"])]),_:1})):(0,o.Q3)("",!0)]),_:1},8,["title"])}}});var j=a(62606);let M=(0,o.pM)({__name:"TaskStatusDetails",setup(e){let t=(0,o.KR)(""),{loading:a,tableParams:i,tableList:n,tableTotal:d,getTableData:c}=(0,b.i)({loading:!0,immediate:!1,params:{page:1,page_size:10,task_id:0,status:0,domain:""},fetchFn:g.oc}),p=(0,o.KR)([{key:"recipient",title:"Recipient",width:160,render:e=>(0,o.bF)(j.Ay,{class:e.tooltip?"":"break-all!","line-clamp":e.tooltip?999:1,tooltip:!1},{default:()=>[e.recipient]})},{key:"dsn",title:"Dsn",width:60},{key:"delay",title:"Delay",width:70},{key:"delays",title:"Delays",width:150},{key:"relay",title:"Relay",width:200,render:e=>(0,o.bF)(j.Ay,{class:e.tooltip?"":"break-all!","line-clamp":e.tooltip?9999:1,tooltip:!1},{default:()=>[e.relay]})},{key:"description",title:"Details",render:e=>(0,o.bF)(j.Ay,{class:e.tooltip?"":"break-all!","line-clamp":e.tooltip?9999:1,tooltip:!1},{default:()=>[e.description]})}]),u=e=>({onMousemove:()=>{e.tooltip=!0},onMouseleave:()=>{e.tooltip=!1}}),[k,h]=(0,m.h)({onChangeState:e=>{if(e){let{status:e,taskId:a,row:l}=h.getState();l&&(t.value=`Failure Details [${l.domain}]`,i.value.page=1,i.value.status=e,i.value.task_id=a,i.value.domain=l.domain,c())}else n.value=[]}});return(e,m)=>{let b=s.A,g=r.A,h=l.A;return(0,o.uX)(),(0,o.Wv)((0,o.R1)(k),{title:(0,o.R1)(t),width:1e3,footer:!1},{default:(0,o.k6)(()=>[(0,o.bF)(h,null,{table:(0,o.k6)(()=>[(0,o.bF)(b,{bordered:!1,loading:(0,o.R1)(a),columns:(0,o.R1)(p),data:(0,o.R1)(n),"row-props":u},null,8,["loading","columns","data"])]),pageRight:(0,o.k6)(()=>[(0,o.bF)(g,{page:(0,o.R1)(i).page,"onUpdate:page":m[0]||(m[0]=e=>(0,o.R1)(i).page=e),"page-size":(0,o.R1)(i).page_size,"onUpdate:pageSize":m[1]||(m[1]=e=>(0,o.R1)(i).page_size=e),"item-count":(0,o.R1)(d),onRefresh:(0,o.R1)(c)},null,8,["page","page-size","item-count","onRefresh"])]),_:1})]),_:1},8,["title"])}}}),K=(0,o.pM)({__name:"TaskStatus",setup(e){let t=(0,o.KR)("Error tasks"),a=(0,o.KR)(!1),r=(0,o.Kh)({status:0,task_id:0}),i=(0,o.KR)([]),n=(0,o.KR)([{key:"domain",title:"Domain"},{key:"count",title:"Count"},{key:"active",title:"Operator",align:"right",render:e=>(0,o.bF)(d.Ay,{text:!0,type:"primary",onClick:()=>{u(e)}},{default:()=>[(0,o.eW)("Details")]})}]),[c,p]=(0,m.h)({component:M}),u=e=>{p.setState({taskId:r.task_id,status:r.status,row:e}),p.open()},b=async()=>{let e=await (0,g.p0)((0,o.ux)(r));(0,k.cy)(e)&&(i.value=e)},[h,f]=(0,m.h)({onChangeState:e=>{if(e){let{row:e}=f.getState();e&&(i.value=[],r.task_id=e.id,t.value=`Error tasks [${e.subject}]`,b())}else i.value=[]}});return(e,r)=>{let d=s.A,p=l.A;return(0,o.uX)(),(0,o.Wv)((0,o.R1)(h),{title:(0,o.R1)(t),width:600,footer:!1},{default:(0,o.k6)(()=>[(0,o.bF)(p,null,{toolsLeft:(0,o.k6)(()=>[...r[0]||(r[0]=[])]),toolsRight:(0,o.k6)(()=>[...r[1]||(r[1]=[])]),table:(0,o.k6)(()=>[(0,o.bF)(d,{bordered:!1,loading:(0,o.R1)(a),columns:(0,o.R1)(n),data:(0,o.R1)(i)},null,8,["loading","columns","data"])]),modal:(0,o.k6)(()=>[(0,o.bF)((0,o.R1)(c))]),_:1})]),_:1},8,["title"])}}});var O=a(3401),L=a(75220);function P(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!(0,o.vv)(e)}let E=(0,o.pM)({__name:"index",setup(e){let{t}=(0,O.s9)(),{loading:a,tableParams:h,tableList:f,tableTotal:v,getTableData:y}=(0,b.i)({loading:!0,immediate:!0,params:{page:1,page_size:10,keyword:""},fetchFn:g.u3}),_=(0,o.KR)([{key:"create_time",title:t("market.task.columns.time"),width:"9%",minWidth:130,ellipsis:{tooltip:!0},render:e=>(0,k.fU)(e.create_time)},{key:"subject",title:t("market.task.columns.subject"),minWidth:120,ellipsis:{tooltip:!0}},{key:"addresser",title:t("market.task.columns.sender"),minWidth:130,ellipsis:{tooltip:!0}},{key:"recipient_count",title:t("market.task.columns.recipients"),width:"6%",minWidth:80},{key:"success_count",title:t("market.task.columns.success"),width:"6%",minWidth:80},{key:"error_count",title:t("market.task.columns.failed"),width:"6%",minWidth:80,render:e=>(0,o.bF)(d.Ay,{type:"error",text:!0,onClick:()=>{$(e)}},{default:()=>[e.error_count]})},{key:"active",title:t("market.task.columns.status"),width:"8%",minWidth:90,render:e=>{let a,l,r;return 0===e.task_process||3===e.task_process?(0,o.bF)(c.Ay,{size:"small",bordered:!1,type:"warning"},P(a=t("market.task.status.pending"))?a:{default:()=>[a]}):1===e.task_process?(0,o.bF)(c.Ay,{size:"small",bordered:!1,type:"info"},P(l=t("market.task.status.processing"))?l:{default:()=>[l]}):(0,o.bF)(c.Ay,{size:"small",bordered:!1,type:"success"},P(r=t("market.task.status.done"))?r:{default:()=>[r]})}},{key:"remark",title:t("market.task.columns.remark"),width:"8%",minWidth:80,ellipsis:{tooltip:!0},render:e=>e.remark||"--"},{key:"estimated_time_with_warmup",title:t("market.task.columns.estimatedTime"),width:"11%",minWidth:110,ellipsis:{tooltip:!0},render:e=>2===e.task_process?"--":e.estimated_time_with_warmup>=0?(0,k.Yq)(e.estimated_time_with_warmup):t("market.task.status.noIpWarmup")},{key:"progress",title:t("market.task.columns.progress"),width:"8%",minWidth:130,render:e=>(0,o.bF)("div",{class:"max-w-160px"},[(0,o.bF)(p.A,{type:"line",status:"success","indicator-placement":"inside",processing:100!==e.progress,percentage:e.progress,"show-indicator":!1},null)])},{title:t("common.columns.actions"),key:"actions",align:"right",width:250,render:e=>{let a,l,r,s,i;return(0,o.bF)(u.A,{inline:!0},{default:()=>[2!==e.task_process&&(0,o.bF)(d.Ay,{type:"primary",text:!0,onClick:()=>{A(e)}},{default:()=>[3===e.task_process?t("market.task.actions.send"):t("market.task.actions.pause")]}),3===e.task_process&&(0,o.bF)(d.Ay,{type:"primary",text:!0,onClick:()=>{E(e)}},P(a=t("common.actions.edit"))?a:{default:()=>[a]}),(0,o.bF)(d.Ay,{type:"primary",text:!0,onClick:()=>{R(e)}},P(l=t("market.task.actions.analytics"))?l:{default:()=>[l]}),2===e.task_process&&(0,o.bF)(d.Ay,{type:"primary",text:!0,onClick:()=>{j(e)}},P(r=t("market.task.actions.detail"))?r:{default:()=>[r]}),(0,o.bF)(d.Ay,{type:"primary",text:!0,onClick:()=>{z(e)}},P(s=t("common.actions.copy"))?s:{default:()=>[s]}),(0,o.bF)(d.Ay,{type:"error",text:!0,onClick:()=>{M(e)}},P(i=t("common.actions.delete"))?i:{default:()=>[i]})]})}}]),w=(0,L.rd)(),x=()=>{w.push("/market/task/edit")},R=e=>{w.push(`/market/task/analytics/${e.id}`)},z=e=>{w.push(`/market/task/edit?task_id=${e.id}`)},A=e=>{(0,k.lJ)({title:t("market.task.changeStatus.title",{subject:e.subject}),content:3===e.task_process?t("market.task.changeStatus.startConfirm"):t("market.task.changeStatus.pauseConfirm"),onConfirm:async()=>{3===e.task_process?await (0,g.VP)({task_id:e.id}):await (0,g.GA)({task_id:e.id}),y()}})},[S,F]=(0,m.h)({component:K}),$=e=>{F.setState({row:e}),F.open()},[B,C]=(0,m.h)({component:W}),j=e=>{C.setState({row:e}),C.open()},M=e=>{(0,k.lJ)({title:t("market.task.delete.title"),content:t("market.task.delete.confirm",{subject:e.subject}),confirmText:t("common.actions.delete"),confirmType:"error",onConfirm:async()=>{await (0,g.vq)({id:e.id}),y()}})},E=e=>{w.push(`/market/task/edit?task_id=${e.id}&type=edit`)};return(e,c)=>{let p=n.A,u=i.A,m=s.A,b=r.A,k=l.A;return(0,o.uX)(),(0,o.CE)("div",null,[(0,o.bF)(k,null,{toolsLeft:(0,o.k6)(()=>[(0,o.bF)((0,o.R1)(d.Ay),{type:"primary",onClick:x},{default:(0,o.k6)(()=>[(0,o.eW)((0,o.v_)((0,o.R1)(t)("market.task.actions.add")),1)]),_:1})]),toolsRight:(0,o.k6)(()=>[(0,o.bF)(p,{value:(0,o.R1)(h).keyword,"onUpdate:value":c[0]||(c[0]=e=>(0,o.R1)(h).keyword=e),width:320,placeholder:(0,o.R1)(t)("market.task.search.subjectPlaceholder"),onSearch:c[1]||(c[1]=()=>(0,o.R1)(y)(!0))},null,8,["value","placeholder"])]),table:(0,o.k6)(()=>[(0,o.bF)(m,{loading:(0,o.R1)(a),columns:(0,o.R1)(_),data:(0,o.R1)(f)},{empty:(0,o.k6)(()=>[(0,o.bF)(u)]),_:1},8,["loading","columns","data"])]),pageRight:(0,o.k6)(()=>[(0,o.bF)(b,{page:(0,o.R1)(h).page,"onUpdate:page":c[2]||(c[2]=e=>(0,o.R1)(h).page=e),"page-size":(0,o.R1)(h).page_size,"onUpdate:pageSize":c[3]||(c[3]=e=>(0,o.R1)(h).page_size=e),"item-count":(0,o.R1)(v),onRefresh:(0,o.R1)(y)},null,8,["page","page-size","item-count","onRefresh"])]),modal:(0,o.k6)(()=>[(0,o.bF)((0,o.R1)(S)),(0,o.bF)((0,o.R1)(B))]),_:1})])}}})},21879(e,t,a){a.d(t,{A:()=>s});var l=a(18348),r=a(53098);let s=function(e){return"number"==typeof e||(0,r.A)(e)&&"[object Number]"==(0,l.A)(e)}},85684(e,t,a){a.d(t,{A:()=>b});var l=a(44041),r=a(90290),s=a(49359),i=a(50922),n=a(79623),o=a(75454),d=a(69598),c=a(14957),p=a(20649);let u={name:"Flex",self:function(){return p.A}},m=Object.assign(Object.assign({},s.A.props),{align:String,justify:{type:String,default:"start"},inline:Boolean,vertical:Boolean,reverse:Boolean,size:{type:[String,Number,Array],default:"medium"},wrap:{type:Boolean,default:!0}}),b=(0,r.pM)({name:"Flex",props:m,setup(e){let{mergedClsPrefixRef:t,mergedRtlRef:a}=(0,i.Ay)(e),d=(0,s.A)("Flex","-flex",void 0,u,e,t);return{rtlEnabled:(0,n.I)("Flex",a,t),mergedClsPrefix:t,margin:(0,r.EW)(()=>{let{size:t}=e;if(Array.isArray(t))return{horizontal:t[0],vertical:t[1]};if("number"==typeof t)return{horizontal:t,vertical:t};let{self:{[(0,o.cF)("gap",t)]:a}}=d.value,{row:r,col:s}=(0,l.t8)(a);return{horizontal:(0,l.eV)(s),vertical:(0,l.eV)(r)}})}},render(){let{vertical:e,reverse:t,align:a,inline:l,justify:s,margin:i,wrap:n,mergedClsPrefix:o,rtlEnabled:p}=this,u=(0,d.B)((0,c.$)(this),!1);return u.length?(0,r.h)("div",{role:"none",class:[`${o}-flex`,p&&`${o}-flex--rtl`],style:{display:l?"inline-flex":"flex",flexDirection:e&&!t?"column":e&&t?"column-reverse":!e&&t?"row-reverse":"row",justifyContent:s,flexWrap:!n||e?"nowrap":"wrap",alignItems:a,gap:`${i.vertical}px ${i.horizontal}px`}},u):null}})}}]);