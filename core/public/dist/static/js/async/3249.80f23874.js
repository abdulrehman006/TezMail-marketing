"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([["3249"],{60045(e,t,a){a.d(t,{h:()=>r});var l=a(90290),s=a(98179);let o=Symbol("MODAL_INJECT"),r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{state:t={},component:a,onCancel:r,onConfirm:i}=e,n=(0,l.Kh)({});return a?[(0,l.pM)({setup(s,r){let{attrs:i,slots:d}=r;return(0,l.Gt)(o,{state:t,options:e,extendApi:e=>{Object.setPrototypeOf(n,e)},setState:e=>{Object.assign(t,e)}}),()=>(0,l.h)(a,{...s,...i},d)}}),n]:[(0,l.pM)({setup(t,a){let{attrs:d,slots:u}=a,p=(0,l.WQ)(o),c=(0,l.KR)(!1);return n.open=()=>{var t;c.value=!0,null==(t=e.onChangeState)||t.call(e,c.value)},n.close=()=>{c.value=!1},n.setState=t=>{var a;null==p||p.setState(t),null==(a=e.onChangeState)||a.call(e,c.value)},n.getState=()=>(null==p?void 0:p.state)??{},null==p||p.extendApi(n),()=>(0,l.bF)(s.A,(0,l.v6)({show:c.value},t,d,{onCancel:r,onConfirm:i,"onUpdate:show":e=>{c.value=e??!1}}),u)}}),n]}},6943(e,t,a){a.d(t,{i:()=>r});var l=a(21879),s=a(12532),o=a(90290);let r=e=>{let{fetchFn:t,params:a,loading:r=!1,immediate:i=!1}=e,n=(0,o.KR)(r),d=(0,o.KR)([]),u=(0,o.KR)(0),p=(0,o.KR)(a),c=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(e&&(a.page=1),t){n.value=!0;try{let e=await t(p.value);(0,s.Gv)(e)&&(d.value=(0,s.cy)(e.list)?e.list:[],u.value=(0,l.A)(e.total)?e.total:0)}finally{n.value=!1}}};return i&&c(),{loading:n,tableList:d,tableTotal:u,tableParams:p,getTableData:c}}},28391(e,t,a){a.d(t,{A:()=>i});var l=a(23995),s=a(27546),o=a(90290);let r={class:"leading-22px text-13px text-desc text-center"},i=(0,o.pM)({__name:"index",setup(e){let t=()=>{window.open("https://github.com/aaPanel/BillionMail/issues")},a=()=>{window.open("https://github.com/aaPanel/BillionMail")};return(e,i)=>{let n=s.Ay,d=(0,o.g2)("i18n-t"),u=l.A;return(0,o.uX)(),(0,o.Wv)(u,null,{default:(0,o.k6)(()=>[(0,o.Lk)("div",r,[(0,o.bF)(d,{tag:"span",scope:"global",keypath:"components.tableHelp.text1"},{issues:(0,o.k6)(()=>[(0,o.bF)(n,{class:"text-13px",type:"primary",text:"",onClick:t},{default:(0,o.k6)(()=>[...i[0]||(i[0]=[(0,o.Lk)("span",null,"Issues",-1),(0,o.Lk)("i",{class:"i-mdi:arrow-right ml-1px"},null,-1)])]),_:1})]),star:(0,o.k6)(()=>[(0,o.bF)(n,{class:"text-13px",type:"primary",text:"",onClick:a},{default:(0,o.k6)(()=>[...i[1]||(i[1]=[(0,o.eW)(" Star ",-1),(0,o.Lk)("i",{class:"i-mdi:arrow-right ml-1px"},null,-1)])]),_:1})]),_:1}),i[2]||(i[2]=(0,o.Lk)("br",null,null,-1)),(0,o.Lk)("span",null,(0,o.v_)(e.$t("components.tableHelp.text2")),1)])]),_:1})}}})},63919(e,t,a){a.d(t,{A:()=>o});var l=a(85684),s=a(90290);let o=(0,s.pM)({__name:"index",setup(e){let t=!!(0,s.Ht)().toolsLeft,a=!!(0,s.Ht)().toolsRight,o=!!(0,s.Ht)().pageLeft||!!(0,s.Ht)().pageRight;return(e,r)=>{let i=l.A;return(0,s.uX)(),(0,s.CE)("div",null,[t||a?((0,s.uX)(),(0,s.Wv)(i,{key:0,class:"items-center mb-12px",justify:"space-between"},{default:(0,s.k6)(()=>[(0,s.bF)(i,{class:"items-center",size:12},{default:(0,s.k6)(()=>[(0,s.RG)(e.$slots,"toolsLeft")]),_:3}),(0,s.bF)(i,{class:"items-center",size:12},{default:(0,s.k6)(()=>[(0,s.RG)(e.$slots,"toolsRight")]),_:3})]),_:3})):(0,s.Q3)("",!0),(0,s.RG)(e.$slots,"table"),(0,s.R1)(o)?((0,s.uX)(),(0,s.Wv)(i,{key:1,class:"items-center mt-12px",justify:"space-between"},{default:(0,s.k6)(()=>[(0,s.Lk)("div",null,[(0,s.RG)(e.$slots,"pageLeft")]),(0,s.bF)(i,null,{default:(0,s.k6)(()=>[(0,s.RG)(e.$slots,"pageRight")]),_:3})]),_:3})):(0,s.Q3)("",!0),(0,s.RG)(e.$slots,"modal")])}}})},13665(e,t,a){a.d(t,{A:()=>o});var l=a(62408),s=a(90290);let o=(0,s.pM)({__name:"index",props:{model:{},rules:{},labelWidth:{},labelPlacement:{default:"top"}},setup(e,t){let{expose:a}=t,o=(0,s.KR)(null);return a({validate:()=>{var e;return null==(e=o.value)?void 0:e.validate()},restoreValidation:()=>{var e;return null==(e=o.value)?void 0:e.restoreValidation()}}),(t,a)=>{let r=l.A;return(0,s.uX)(),(0,s.Wv)(r,(0,s.v6)(t.$attrs,{ref_key:"formRef",ref:o,model:e.model,rules:e.rules,"label-width":e.labelWidth,"label-placement":e.labelPlacement}),{default:(0,s.k6)(()=>[(0,s.RG)(t.$slots,"default")]),_:3},16,["model","rules","label-width","label-placement"])}}})},23618(e,t,a){a.d(t,{A:()=>i});var l=a(24259),s=a(90290),o=a(12532);let r={class:"ml-8px text-14px"},i=(0,s.pM)({__name:"index",props:(0,s.zz)({storeKey:{default:""},pageSizes:{default:()=>[10,20,50,100]},showTotal:{type:Boolean,default:!0},showSizePicker:{type:Boolean,default:!0},showQuickJumper:{type:Boolean,default:!0},onUpdatePage:{}},{page:{},pageModifiers:{},pageSize:{},pageSizeModifiers:{}}),emits:(0,s.zz)(["refresh"],["update:page","update:pageSize"]),setup(e,t){let{emit:a}=t,i=(0,s.EW)(()=>{let{storeKey:t}=e;return t?`${t}-page`:""}),n=(0,s.fn)(e,"page"),d=(0,s.fn)(e,"pageSize"),u=t=>{var l;null==(l=e.onUpdatePage)||l.call(e,t),a("refresh")},p=t=>{var l;n.value=1,null==(l=e.onUpdatePage)||l.call(e,1),c(t),a("refresh")},c=e=>{i.value&&(0,o.ZB)(i.value,String(e))};if(i.value){let e=(0,o.Lg)(i.value);e&&(d.value=(0,o.WZ)(e))}return(t,a)=>{let o=l.A;return(0,s.uX)(),(0,s.Wv)(o,(0,s.v6)(t.$attrs,{page:n.value,"onUpdate:page":[a[0]||(a[0]=e=>n.value=e),u],"page-size":d.value,"onUpdate:pageSize":[a[1]||(a[1]=e=>d.value=e),p],"show-size-picker":e.showSizePicker,"show-quick-jumper":e.showQuickJumper,"page-sizes":e.pageSizes,"display-order":["pages","size-picker","quick-jumper"]}),(0,s.eX)({_:2},[e.showTotal?{name:"suffix",fn:(0,s.k6)(e=>{let{itemCount:t}=e;return[(0,s.Lk)("span",r," Total "+(0,s.v_)(t),1)]}),key:"0"}:void 0]),1040,["page","page-size","show-size-picker","show-quick-jumper","page-sizes"])}}})},51144(e,t,a){a.r(t),a.d(t,{default:()=>x});var l=a(63919),s=a(23618),o=a(77625),r=a(28391),i=a(90290),n=a(45679),d=a(85684),u=a(27546),p=a(12532),c=a(6943),g=a(60045),f=a(85020);let{t:m}=a(46831).Ay.global,v=e=>f.K.get("/mail_forward/list",{params:e}),k=e=>f.K.post("/mail_forward/edit",e,{fetchOptions:{loading:m("settings.forward.loading.editing"),successMessage:!0}});var h=a(13665),b=a(45449),w=a(60801),R=a(3401);let y=(0,i.pM)({__name:"ForwardForm",setup(e){let{t}=(0,R.s9)(),a=(0,i.KR)(!1),l=(0,i.EW)(()=>a.value?t("settings.forward.edit"):t("settings.forward.add")),s=(0,i.rk)("formRef"),o=(0,i.Kh)({active:1,address:"",domain:"",goto:""}),r={},[d,u]=(0,g.h)({onChangeState:e=>{if(e){let e=u.getState(),{row:t}=e;a.value=e.isEdit,t&&(o.address=t.address,o.goto=t.goto,o.active=t.active)}else o.address="",o.goto="",o.domain="",o.active=1},onConfirm:async()=>{var e;if(await (null==(e=s.value)?void 0:e.validate()),a.value)await k((0,i.ux)(o));else{let e;await (e=(0,i.ux)(o),f.K.post("/mail_forward/add",e,{fetchOptions:{loading:m("settings.forward.loading.adding"),successMessage:!0}}))}u.getState().refresh()}});return(e,u)=>{let p=n.A,c=w.Ay,g=b.A,f=h.A;return(0,i.uX)(),(0,i.Wv)((0,i.R1)(d),{title:(0,i.R1)(l),width:"480"},{default:(0,i.k6)(()=>[(0,i.bF)(f,{ref_key:"formRef",ref:s,class:"pt-8px",model:(0,i.R1)(o),rules:r},{default:(0,i.k6)(()=>[(0,i.bF)(c,{label:(0,i.R1)(t)("settings.forward.form.status")},{default:(0,i.k6)(()=>[(0,i.bF)(p,{value:(0,i.R1)(o).active,"onUpdate:value":u[0]||(u[0]=e=>(0,i.R1)(o).active=e),"checked-value":1,"unchecked-value":0},null,8,["value"])]),_:1},8,["label"]),(0,i.bF)(c,{label:(0,i.R1)(t)("settings.forward.form.forwardedUsers"),path:"address"},{default:(0,i.k6)(()=>[(0,i.bF)(g,{value:(0,i.R1)(o).address,"onUpdate:value":u[1]||(u[1]=e=>(0,i.R1)(o).address=e),disabled:(0,i.R1)(a),placeholder:(0,i.R1)(t)("settings.forward.form.forwardedUsersPlaceholder")},null,8,["value","disabled","placeholder"])]),_:1},8,["label"]),(0,i.Q3)("",!0),(0,i.bF)(c,{label:(0,i.R1)(t)("settings.forward.form.receivingUser"),path:"goto"},{default:(0,i.k6)(()=>[(0,i.bF)(g,{value:(0,i.R1)(o).goto,"onUpdate:value":u[3]||(u[3]=e=>(0,i.R1)(o).goto=e),type:"textarea",row:4,placeholder:(0,i.R1)(t)("settings.forward.form.receivingUserPlaceholder")},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["title"])}}});function _(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!(0,i.vv)(e)}let x=(0,i.pM)({__name:"index",setup(e){let{t}=(0,R.s9)(),{tableParams:a,tableList:h,loading:b,tableTotal:w,getTableData:x}=(0,c.i)({loading:!0,immediate:!0,params:{page:1,page_size:10,domain:"",keyword:""},fetchFn:v}),z=(0,i.KR)([{key:"address",title:t("settings.forward.columns.address"),ellipsis:{tooltip:!0}},{key:"goto",title:t("settings.forward.columns.goto"),ellipsis:{tooltip:!0}},{key:"create_time",title:t("settings.forward.columns.created"),render:e=>(0,p.fU)(e.create_time)},{key:"update_time",title:t("settings.forward.columns.modified"),render:e=>(0,p.fU)(e.update_time)},{key:"active",title:t("settings.forward.columns.status"),render:e=>(0,i.bF)(n.A,{size:"small",value:e.active,"checked-value":1,"unchecked-value":0,onUpdateValue:t=>{M(t,e)}},null)},{title:t("common.columns.actions"),key:"actions",align:"right",width:120,render:e=>{let a,l;return(0,i.bF)(d.A,{inline:!0},{default:()=>[(0,i.bF)(u.Ay,{type:"primary",text:!0,onClick:()=>{C(e)}},_(a=t("common.actions.edit"))?a:{default:()=>[a]}),(0,i.bF)(u.Ay,{type:"error",text:!0,onClick:()=>{W(e)}},_(l=t("common.actions.delete"))?l:{default:()=>[l]})]})}}]),[A,F]=(0,g.h)({component:y,state:{isEdit:!1,refresh:x}}),S=()=>{F.setState({isEdit:!1,row:null}),F.open()},U=()=>{x(!0)},C=e=>{F.setState({isEdit:!0,row:e}),F.open()},M=async(e,t)=>{await k({address:t.address,goto:t.goto,active:e}),x()},W=e=>{(0,p.lJ)({title:t("settings.forward.delete.title"),content:t("settings.forward.delete.content",{address:e.address}),confirmText:t("common.actions.delete"),confirmType:"error",onConfirm:async()=>{let t;await (t={address:e.address},f.K.post("/mail_forward/delete",t,{fetchOptions:{loading:m("settings.forward.loading.deleting"),successMessage:!0}})),x()}})};return(e,t)=>{let n=r.A,d=o.A,p=s.A,c=l.A;return(0,i.uX)(),(0,i.Wv)(c,null,{toolsLeft:(0,i.k6)(()=>[(0,i.bF)((0,i.R1)(u.Ay),{type:"primary",onClick:S},{default:(0,i.k6)(()=>[(0,i.eW)((0,i.v_)(e.$t("settings.forward.add")),1)]),_:1})]),toolsRight:(0,i.k6)(()=>[(0,i.bF)((0,i.R1)(u.Ay),{onClick:U},{default:(0,i.k6)(()=>[(0,i.eW)((0,i.v_)(e.$t("common.actions.refresh")),1)]),_:1})]),table:(0,i.k6)(()=>[(0,i.bF)(d,{loading:(0,i.R1)(b),columns:(0,i.R1)(z),data:(0,i.R1)(h)},{empty:(0,i.k6)(()=>[(0,i.bF)(n)]),_:1},8,["loading","columns","data"])]),pageRight:(0,i.k6)(()=>[(0,i.bF)(p,{page:(0,i.R1)(a).page,"onUpdate:page":t[0]||(t[0]=e=>(0,i.R1)(a).page=e),"page-size":(0,i.R1)(a).page_size,"onUpdate:pageSize":t[1]||(t[1]=e=>(0,i.R1)(a).page_size=e),"item-count":(0,i.R1)(w),onRefresh:(0,i.R1)(x)},null,8,["page","page-size","item-count","onRefresh"])]),modal:(0,i.k6)(()=>[(0,i.bF)((0,i.R1)(A))]),_:1})}}})}}]);