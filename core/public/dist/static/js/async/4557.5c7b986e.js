"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([["4557"],{39372(e,a,t){t.r(a),t.d(a,{default:()=>eI});var l=t(28391),s=t(32966),i=t(80785),r=t(27546),u=t(90290),M=t(12532),d=t(60045),n=t(85020);let{t:o}=t(46831).Ay.global,c=e=>n.K.post("/relay/edit",e,{fetchOptions:{successMessage:!0,loading:o("smtp.api.loading.editing")}});var m=t(62606),N=t(23254),p=t(45679);let y={class:"status-text"},I=(0,u.pM)({__name:"SmtpStatus",props:{value:{type:Boolean,default:!1}},setup:e=>(a,t)=>{let l=N.Ay;return(0,u.uX)(),(0,u.Wv)(l,{size:"small",bordered:!1},{default:(0,u.k6)(()=>[(0,u.Lk)("div",{class:(0,u.C4)(["status-icon",e.value?"status-success":"status-error"])},null,2),(0,u.Lk)("div",y,(0,u.v_)(e.value?a.$t("smtp.status.online"):a.$t("smtp.status.offline")),1)]),_:1})}});var g=t(64901);let D=(0,g.default)(I,[["__scopeId","data-v-39703748"]]),j={class:"smtp-card relative rounded-8px p-16px shadow-sm"},v={class:"flex items-center mb-16px"},L={class:"flex items-center flex-1"},_={class:"w-32px h-32px flex items-center justify-center rounded-full bg-primary-100"},T=["src"],A={class:"ml-16px flex items-center gap-10px flex-1 min-w-0"},k={class:"text-18px font-600 truncate"},w={class:"ml-8px"},h={class:"smtp-desc"},x={class:"smtp-info"},b={class:"info-row"},z={class:"info-label"},E={class:"info-value flex flex-wrap gap-8px"},C={class:"flex items-center gap-4px"},f={class:"info-row"},O={class:"info-label"},S={class:"info-value"},R={class:"info-row"},U={class:"info-label"},Q={class:"info-value"},Y={class:"info-row"},F={class:"info-label"},W={class:"info-value truncate"},G={class:"action-buttons"},Z=(0,u.pM)({__name:"SmtpCard",props:{service:{type:Object,required:!0}},emits:["edit","delete","showDns"],setup(e,a){let{emit:t}=a,l=(0,u.EW)(()=>{switch(e.service.smtp_name){case"Gmail":return"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0Ij48cGF0aCBkPSJNMjQgNS40NTd2MTMuOTA5YzAgLjkwNC0uNzMyIDEuNjM2LTEuNjM2IDEuNjM2aC0zLjgxOVYxMS43M0wxMiAxNi42NGwtNi41NDUtNC45MXY5LjI3M0gxLjYzNkExLjYzNiAxLjYzNiAwIDAgMSAwIDE5LjM2NlY1LjQ1N2MwLTIuMDIzIDIuMzA5LTMuMTc4IDMuOTI3LTEuOTY0TDUuNDU1IDQuNjQgMTIgOS41NDhsNi41NDUtNC45MSAxLjUyOC0xLjE0NUMyMS42OSAyLjI4IDI0IDMuNDM0IDI0IDUuNDU3eiIgZmlsbD0iI0QxNDgzNiIvPjwvc3ZnPg==";case"Mailgun":return"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0Ij48cGF0aCBkPSJNMTIgMkM2LjQ4IDIgMiA2LjQ4IDIgMTJzNC40OCAxMCAxMCAxMCAxMC00LjQ4IDEwLTEwUzE3LjUyIDIgMTIgMnptMCAxOGMtNC40MSAwLTgtMy41OS04LThzMy41OS04IDgtOCA4IDMuNTkgOCA4LTMuNTkgOC04IDh6IiBmaWxsPSIjRjA0MjNCIi8+PHBhdGggZD0iTTEyIDZjLTMuMzEgMC02IDIuNjktNiA2czIuNjkgNiA2IDYgNi0yLjY5IDYtNi0yLjY5LTYtNi02em0wIDEwYy0yLjIxIDAtNC0xLjc5LTQtNHMxLjc5LTQgNC00IDQgMS43OSA0IDQtMS43OSA0LTQgNHoiIGZpbGw9IiNGMDQyM0IiLz48L3N2Zz4=";case"AWS SES":return"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0Ij48cGF0aCBkPSJNMTMuMTA2IDEwLjYzM0wyMi44IDEyLjczQTExLjk0NyAxMS45NDcgMCAwIDAgMTIgNC4yYy02LjYyNCAwLTEyIDUuMzc2LTEyIDEyczUuMzc2IDEyIDEyIDEyYzQuOTY4IDAgOS4yNDItMy4wMyAxMS4xMDYtNy4zNDJMMTMuMTA2IDE4Ljc1VjEwLjYzM3oiIGZpbGw9IiNGRjk5MDAiLz48cGF0aCBkPSJNMTQuNCA4LjR2MTAuOEwyNCAxNi44bC05LjYtOC40eiIgZmlsbD0iI0ZGOTkwMCIvPjwvc3ZnPg==";case"SendGrid":return"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0Ij48cGF0aCBkPSJNMTIgMkM2LjQ4IDIgMiA2LjQ4IDIgMTJzNC40OCAxMCAxMCAxMCAxMC00LjQ4IDEwLTEwUzE3LjUyIDIgMTIgMnptLTEgMTVoLTJ2LTZoMnY2em00IDBoLTJ2LTZoMnY2em00LTcuNWMwIC44My0uNjcgMS41LTEuNSAxLjVoLTljLS44MyAwLTEuNS0uNjctMS41LTEuNVY4YzAtLjgzLjY3LTEuNSAxLjUtMS41aDljLjgzIDAgMS41LjY3IDEuNSAxLjV2MS41eiIgZmlsbD0iIzFBODJFMiIvPjwvc3ZnPg==";case"custom":default:return"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNzQ3NjQwNjIwNDUzIiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjUgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjM4MTciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjAwLjE5NTMxMjUiIGhlaWdodD0iMjAwIj48cGF0aCBkPSJNODQxLjE0Mjg1NyA3My4xNDI4NTdhMTA5LjcxNDI4NiAxMDkuNzE0Mjg2IDAgMCAxIDEwOS4yMDIyODYgOTkuMTgxNzE0TDk1MC44NTcxNDMgMTgyLjg1NzE0M3YyOTQuMTA3NDI4YTM2LjU3MTQyOSAzNi41NzE0MjkgMCAwIDEtNzIuNTU3NzE0IDYuNTgyODU4TDg3Ny43MTQyODYgNDc2Ljk2NDU3MVYxOTQuMzQwNTcxTDU2OS4wNTE0MjkgNDU5Ljc3NmMtMzIuMTgyODU3IDE5LjUyOTE0My03MS44MjYyODYgMjEuMjExNDI5LTEwOC45MDk3MTUgMi4xMjExNDNsLTEwLjAyMDU3MS01LjcwNTE0M0wxNDYuMjg1NzE0IDE5NC41NnY1NzMuNDRhMzYuNTcxNDI5IDM2LjU3MTQyOSAwIDAgMCAyOS45ODg1NzIgMzUuOTg2Mjg2TDE4Mi44NTcxNDMgODA0LjU3MTQyOWgyMjEuODQyMjg2YTM2LjU3MTQyOSAzNi41NzE0MjkgMCAwIDEgNi41ODI4NTcgNzIuNTU3NzE0bC02LjU4Mjg1NyAwLjU4NTE0M0gxODIuODU3MTQzYTEwOS43MTQyODYgMTA5LjcxNDI4NiAwIDAgMS0xMDkuMjAyMjg2LTk5LjE4MTcxNUw3My4xNDI4NTcgNzY4di01ODUuMTQyODU3YTEwOS43MTQyODYgMTA5LjcxNDI4NiAwIDAgMSA5OS4xODE3MTQtMTA5LjIwMjI4NkwxODIuODU3MTQzIDczLjE0Mjg1N2g2NTguMjg1NzE0eiBtLTE5LjY3NTQyOCA3My4xNDI4NTdIMjAyLjI0TDQ5Mi45ODI4NTcgMzk3LjIzODg1N2E0MC43NDA1NzEgNDAuNzQwNTcxIDAgMCAwIDI5LjI1NzE0MyA1LjA0Njg1N2wzLjk0OTcxNC0xLjQ2Mjg1N0w4MjEuNDY3NDI5IDE0Ni4yODU3MTR6IiBmaWxsPSIjNEM1RDdDIiBwLWlkPSIzODE4Ij48L3BhdGg+PHBhdGggZD0iTTg1Ny41MjY4NTcgNjI2LjM5NTQyOWw1LjYzMiAzLjUxMDg1NyAxNDYuNjUxNDI5IDEwOS40MjE3MTRhMzYuNTcxNDI5IDM2LjU3MTQyOSAwIDAgMSA1LjU1ODg1NyA1My42MTM3MTRsLTUuMjY2Mjg2IDQuODI3NDI5LTE0Mi40ODIyODYgMTA4LjU0NGEzNi41NzE0MjkgMzYuNTcxNDI5IDAgMCAxLTQ5LjIyNTE0Mi01My43Nmw0LjkwMDU3MS00LjM4ODU3MiA1Ni4zMi00My4wMDgtMjU3Ljc1NTQyOSAwLjA3MzE0M2EzNi41NzE0MjkgMzYuNTcxNDI5IDAgMCAxLTYuNTgyODU3LTcyLjU1NzcxNGw2LjU4Mjg1Ny0wLjU4NTE0M0g4NzcuNzE0Mjg2bC01OC4yOTQ4NTctNDMuNTkzMTQzYTM2LjU3MTQyOSAzNi41NzE0MjkgMCAwIDEgMzguMTA3NDI4LTYyLjA5ODI4NXoiIGZpbGw9IiMxNDc2QkIiIHAtaWQ9IjM4MTkiPjwvcGF0aD48L3N2Zz4=";case"local":return"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNzQ3NjQwNjAxODg1IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjI3ODIiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+PHBhdGggZD0iTTgyOC44NDg3ODggMTI5LjUwMzYyNGMxNzIuNTAwODc1IDE2OC45MTc3NzEgMTc1LjA2MDIzNSA0NDUuODQwNTQgNi4xNDI0NjQgNjE4LjM0MTQxNWwtNi4xNDI0NjQgNi4xNDI0NjQtMjQzLjY1MTA4NyAyNDAuMDY3OTgzYy00MC40Mzc4OTEgMzkuOTI2MDE4LTEwNS40NDU2MzkgMzkuOTI2MDE4LTE0NS44ODM1MyAwbC0yNDMuNjUxMDg3LTI0MC4wNjc5ODNDMjMuMTYyMjA5IDU4NS4wNjk3MzMgMjAuNjAyODQ5IDMwOC4xNDY5NjMgMTg5LjUyMDYyIDEzNS42NDYwODhsNi4xNDI0NjQtNi4xNDI0NjRjMTc0LjU0ODM2My0xNzIuNTAwODc1IDQ1OC4xMjU0NjktMTcyLjUwMDg3NSA2MzMuMTg1NzA0IDB6TTUxMiAyMzguMDIwNDk1Yy0xMTQuMTQ3NDYzIDAtMjA2Ljc5NjMwMSA5MS4xMTMyMjItMjA2Ljc5NjMwMSAyMDMuNzI1MDY5czkyLjY0ODgzOCAyMDMuNzI1MDY5IDIwNi43OTYzMDEgMjAzLjcyNTA2OCAyMDYuNzk2MzAxLTkxLjExMzIyMiAyMDYuNzk2MzAxLTIwMy43MjUwNjgtOTIuNjQ4ODM4LTIwMy43MjUwNjktMjA2Ljc5NjMwMS0yMDMuNzI1MDY5eiIgZmlsbD0iIzRFNTRDOCIgcC1pZD0iMjc4MyI+PC9wYXRoPjwvc3ZnPg=="}}),s=()=>{t("edit",e.service)},i=()=>{t("delete",e.service)},M=()=>{t("showDns",e.service)},d=async a=>{await c({id:e.service.id,active:a}),e.service.active=a};return(a,t)=>{let n=p.A,o=N.Ay,c=m.Ay,y=r.Ay;return(0,u.uX)(),(0,u.CE)("div",j,[(0,u.Lk)("div",v,[(0,u.Lk)("div",L,[(0,u.Lk)("div",_,[(0,u.Lk)("img",{src:(0,u.R1)(l),class:"w-full h-full object-contain"},null,8,T)]),(0,u.Lk)("div",A,[(0,u.Lk)("div",k,(0,u.v_)(e.service.smtp_name),1),(0,u.bF)(D,{value:e.service.smtp_status.status},null,8,["value"])])]),(0,u.Lk)("div",w,[(0,u.bF)(n,{value:e.service.active,"checked-value":1,"unchecked-value":0,"onUpdate:value":d},null,8,["value"])])]),(0,u.Lk)("div",h,(0,u.v_)(e.service.remark),1),(0,u.Lk)("div",x,[(0,u.Lk)("div",b,[(0,u.Lk)("span",z,(0,u.v_)(a.$t("smtp.card.domain"))+"：",1),(0,u.Lk)("span",E,[((0,u.uX)(!0),(0,u.CE)(u.FK,null,(0,u.pI)(e.service.sender_domains,e=>((0,u.uX)(),(0,u.Wv)(o,{key:e,bordered:!1},{default:(0,u.k6)(()=>[(0,u.eW)((0,u.v_)(e),1)]),_:2},1024))),128)),1===e.service.check_spf?((0,u.uX)(),(0,u.Wv)(o,{key:0,type:"warning",class:"cursor-pointer",bordered:!1,onClick:M},{default:(0,u.k6)(()=>[(0,u.Lk)("div",C,[t[0]||(t[0]=(0,u.Lk)("i",{class:"i-carbon:warning-filled text-16px"},null,-1)),(0,u.Lk)("span",null,(0,u.v_)(a.$t("smtp.card.dnsUpdateRequired")),1)])]),_:1})):(0,u.Q3)("",!0)])]),(0,u.Lk)("div",f,[(0,u.Lk)("span",O,(0,u.v_)(a.$t("smtp.card.server"))+"：",1),(0,u.Lk)("span",S,[(0,u.bF)(c,null,{default:(0,u.k6)(()=>[(0,u.eW)((0,u.v_)(e.service.relay_host),1)]),_:1})])]),(0,u.Lk)("div",R,[(0,u.Lk)("span",U,(0,u.v_)(a.$t("smtp.card.port"))+"：",1),(0,u.Lk)("span",Q,(0,u.v_)(e.service.relay_port),1)]),(0,u.Lk)("div",Y,[(0,u.Lk)("span",F,(0,u.v_)(a.$t("smtp.card.username"))+"：",1),(0,u.Lk)("span",W,(0,u.v_)(e.service.auth_user),1)])]),(0,u.Lk)("div",G,[(0,u.bF)(y,{secondary:"",class:"action-btn",onClick:s},{icon:(0,u.k6)(()=>[...t[1]||(t[1]=[(0,u.Lk)("i",{class:"i-mdi-edit"},null,-1)])]),_:1}),(0,u.bF)(y,{secondary:"",class:"action-btn",onClick:i},{icon:(0,u.k6)(()=>[...t[2]||(t[2]=[(0,u.Lk)("i",{class:"i-mdi-delete"},null,-1)])]),_:1})])])}}}),B=(0,g.default)(Z,[["__scopeId","data-v-6bde014f"]]);var P=t(13665),H=t(67369),X=t(2770),$=t(60801),J=t(95403),V=t(91664),K=t(10932),q=t(45449),ee=t(3401);let ea=(0,u.pM)({__name:"SmtpForm",setup(e){let{t:a}=(0,ee.s9)(),t=(0,u.KR)(!1),l=(0,u.EW)(()=>t.value?a("smtp.form.editTitle"):a("smtp.form.addTitle")),s=(0,u.KR)(0),i=(0,u.rk)("formRef"),m=(0,u.Kh)({rtype:"custom",smtp_name:"",sender_domains:[],relay_host:"",relay_port:587,auth_user:"",auth_password:"",remark:"",active:1,auth_method:null,skip_tls_verify:null,helo_name:""}),N={smtp_name:{required:!0,message:a("smtp.form.validation.nameRequired"),trigger:["blur","input"]},relay_host:{required:!0,message:a("smtp.form.validation.serverRequired"),trigger:["blur","input"]},relay_port:{required:!0,trigger:["blur","input"],validator:(e,t)=>!!t||Error(a("smtp.form.validation.portRequired"))}},p=(0,u.KR)([]),y=[{label:"LOGIN",value:"LOGIN"},{label:"PLAIN",value:"PLAIN"},{label:"CRAM-MD5",value:"CRAM-MD5"},{label:"NONE",value:"NONE"}],I=[{label:a("smtp.form.tlsOptions.skip"),value:1},{label:a("smtp.form.tlsOptions.noSkip"),value:0}],g=async()=>{let e=await n.K.get("/relay/get_unbound_domains");(0,M.cy)(e)&&(p.value=e.map(e=>({label:`${e.domain}${!m.sender_domains.includes(e.domain)&&e.is_bound?a("smtp.form.bind"):""}`,value:e.domain,disabled:!m.sender_domains.includes(e.domain)&&e.is_bound})))},D={gmail:{smtp_name:"Gmail",relay_host:"smtp.gmail.com",relay_port:587,username:"",password:"",remark:"Gmail"},mailgun:{smtp_name:"Mailgun",relay_host:"smtp.mailgun.org",relay_port:587,username:"",password:"",remark:"Mailgun"},aws:{smtp_name:"AWS SES",relay_host:"email-smtp.us-east-1.amazonaws.com",relay_port:587,username:"",password:"",remark:"AWS SES"},sendgrid:{smtp_name:"SendGrid",relay_host:"smtp.sendgrid.net",relay_port:587,username:"apikey",password:"",remark:"SendGrid"},custom:{smtp_name:"Custom SMTP Relay",relay_host:"",relay_port:587,username:"",password:"",remark:"Custom SMTP Relay"}},j=async()=>{var e;let a;await (null==(e=i.value)?void 0:e.validate()),await (a={sender_domains:m.sender_domains,relay_host:m.relay_host,relay_port:m.relay_port,auth_user:m.auth_user,auth_password:m.auth_password},n.K.post("/relay/test_connection",a,{fetchOptions:{successMessage:!0,loading:o("smtp.api.loading.testing")}}))},[v,L]=(0,d.h)({onChangeState:e=>{if(e){let e;g();let a=L.getState();if(m.rtype=a.type,t.value=a.isEdit,(e=D[m.rtype])&&(m.smtp_name=e.smtp_name,m.relay_host=e.relay_host,m.relay_port=e.relay_port,m.auth_user=e.username,m.auth_password=e.password,m.remark=e.remark),a.row){let{row:e}=a;s.value=e.id,m.rtype=e.rtype,m.smtp_name=e.smtp_name,m.sender_domains=e.sender_domains,m.relay_host=e.relay_host,m.relay_port=(0,M.WZ)(e.relay_port),m.auth_user=e.auth_user,m.auth_password=e.auth_password,m.remark=e.remark,m.active=e.active,m.skip_tls_verify=e.skip_tls_verify}}else s.value=0,m.smtp_name="",m.sender_domains=[],m.relay_host="",m.relay_port=587,m.auth_user="",m.auth_password="",m.remark="",m.active=1,m.skip_tls_verify=null,m.auth_method=null,m.helo_name=""},onConfirm:async()=>{var e;await (null==(e=i.value)?void 0:e.validate());let a={rtype:m.rtype,smtp_name:m.smtp_name,sender_domains:m.sender_domains,relay_host:m.relay_host,relay_port:m.relay_port,auth_user:m.auth_user,auth_password:m.auth_password,remark:m.remark,active:m.active,skip_tls_verify:m.skip_tls_verify||"",auth_method:m.auth_method||"",helo_name:m.helo_name};if(t.value)await c({...a,id:s.value});else await n.K.post("/relay/add",a,{fetchOptions:{successMessage:!0,loading:o("smtp.api.loading.adding")}});L.getState().refresh()}});return(e,a)=>{let s=q.A,M=K.Ay,d=V.A,n=J.A,o=$.Ay,c=X.A,g=H.A,D=P.A,L=r.Ay;return(0,u.uX)(),(0,u.Wv)((0,u.R1)(v),{title:(0,u.R1)(l),width:"500"},{"footer-left":(0,u.k6)(()=>[(0,u.bF)(L,{type:"primary",ghost:"",onClick:j},{default:(0,u.k6)(()=>[(0,u.eW)((0,u.v_)(e.$t("smtp.form.testConnection")),1)]),_:1})]),default:(0,u.k6)(()=>[(0,u.bF)(D,{ref_key:"formRef",ref:i,model:(0,u.R1)(m),rules:N,class:"pt-16px"},{default:(0,u.k6)(()=>[(0,u.bF)(d,{cols:1,"x-gap":24},{default:(0,u.k6)(()=>[(0,u.bF)(M,{span:1,label:e.$t("smtp.form.remark"),path:"remark"},{default:(0,u.k6)(()=>[(0,u.bF)(s,{value:(0,u.R1)(m).remark,"onUpdate:value":a[0]||(a[0]=e=>(0,u.R1)(m).remark=e)},null,8,["value"])]),_:1},8,["label"])]),_:1}),(0,u.bF)(o,{label:e.$t("smtp.form.domain"),path:(0,u.R1)(t)?"":"sender_domains"},{default:(0,u.k6)(()=>[(0,u.bF)(n,{value:(0,u.R1)(m).sender_domains,"onUpdate:value":a[1]||(a[1]=e=>(0,u.R1)(m).sender_domains=e),multiple:"","max-tag-count":"responsive",options:(0,u.R1)(p)},null,8,["value","options"])]),_:1},8,["label","path"]),(0,u.bF)(d,{cols:8,"x-gap":24},{default:(0,u.k6)(()=>[(0,u.bF)(M,{span:6,label:e.$t("smtp.form.server"),path:"relay_host"},{default:(0,u.k6)(()=>[(0,u.bF)(s,{value:(0,u.R1)(m).relay_host,"onUpdate:value":a[2]||(a[2]=e=>(0,u.R1)(m).relay_host=e)},null,8,["value"])]),_:1},8,["label"]),(0,u.bF)(M,{span:2,label:e.$t("smtp.form.port"),path:"relay_port"},{default:(0,u.k6)(()=>[(0,u.bF)(c,{value:(0,u.R1)(m).relay_port,"onUpdate:value":a[3]||(a[3]=e=>(0,u.R1)(m).relay_port=e),class:"flex-1","show-button":!1,min:1},null,8,["value"])]),_:1},8,["label"])]),_:1}),(0,u.bF)(o,{label:e.$t("smtp.form.username"),path:"auth_user"},{default:(0,u.k6)(()=>[(0,u.bF)(s,{value:(0,u.R1)(m).auth_user,"onUpdate:value":a[4]||(a[4]=e=>(0,u.R1)(m).auth_user=e)},null,8,["value"])]),_:1},8,["label"]),(0,u.bF)(o,{label:e.$t("smtp.form.password"),path:"auth_password"},{default:(0,u.k6)(()=>[(0,u.bF)(s,{value:(0,u.R1)(m).auth_password,"onUpdate:value":a[5]||(a[5]=e=>(0,u.R1)(m).auth_password=e),class:"password-input",type:"password"},null,8,["value"])]),_:1},8,["label"]),(0,u.bF)(g,{title:e.$t("smtp.form.advancedFeatures")},{default:(0,u.k6)(()=>[(0,u.bF)(o,{label:e.$t("smtp.form.authMethod"),path:"auth_method"},{default:(0,u.k6)(()=>[(0,u.bF)(n,{value:(0,u.R1)(m).auth_method,"onUpdate:value":a[6]||(a[6]=e=>(0,u.R1)(m).auth_method=e),options:y},null,8,["value"])]),_:1},8,["label"]),(0,u.bF)(o,{label:e.$t("smtp.form.skipTlsVerify"),path:"skip_tls_verify"},{default:(0,u.k6)(()=>[(0,u.bF)(n,{value:(0,u.R1)(m).skip_tls_verify,"onUpdate:value":a[7]||(a[7]=e=>(0,u.R1)(m).skip_tls_verify=e),options:I},null,8,["value"])]),_:1},8,["label"]),(0,u.bF)(o,{label:"HELO Name",path:"helo_name"},{default:(0,u.k6)(()=>[(0,u.bF)(s,{value:(0,u.R1)(m).helo_name,"onUpdate:value":a[8]||(a[8]=e=>(0,u.R1)(m).helo_name=e)},null,8,["value"])]),_:1})]),_:1},8,["title"])]),_:1},8,["model"])]),_:1},8,["title"])}}});var et=t(79070),el=t(24646);let es={width:"140"},ei={width:"160"},er=(0,u.pM)({__name:"SmtpDns",setup(e){let{copyText:a}=(0,el.T)(),t=(0,u.KR)([]),[l,s]=(0,d.h)({onChangeState:e=>{if(e){let{smtp:e}=s.getState();e&&(t.value=e.spf_records.filter(e=>1===e.check).map(e=>e.dns_record))}}});return(e,s)=>{let i=m.Ay,M=r.Ay,d=et.A;return(0,u.uX)(),(0,u.Wv)((0,u.R1)(l),{title:"SMTP DNS",width:750,footer:!1},{default:(0,u.k6)(()=>[s[1]||(s[1]=(0,u.Lk)("div",{class:"record-desc"}," 需要调整对应域的spf记录，允许中继发送邮件（如果您已经添加可以忽略） ",-1)),(0,u.bF)(d,{size:"small"},{default:(0,u.k6)(()=>[(0,u.Lk)("thead",null,[(0,u.Lk)("tr",null,[(0,u.Lk)("th",es,(0,u.v_)(e.$t("domain.dns.table.recordType")),1),(0,u.Lk)("th",ei,(0,u.v_)(e.$t("domain.dns.table.host")),1),(0,u.Lk)("th",null,(0,u.v_)(e.$t("domain.dns.table.value")),1)])]),(0,u.Lk)("tbody",null,[((0,u.uX)(!0),(0,u.CE)(u.FK,null,(0,u.pI)((0,u.R1)(t),t=>((0,u.uX)(),(0,u.CE)("tr",null,[s[0]||(s[0]=(0,u.Lk)("td",null,"TXT",-1)),(0,u.Lk)("td",null,(0,u.v_)(t.host),1),(0,u.Lk)("td",null,[(0,u.bF)(i,{class:"mr-4px max-w-320px!"},{default:(0,u.k6)(()=>[(0,u.eW)((0,u.v_)(t.value),1)]),_:2},1024),(0,u.bF)(M,{text:"",type:"primary",onClick:()=>(0,u.R1)(a)(t.value)},{default:(0,u.k6)(()=>[(0,u.eW)((0,u.v_)(e.$t("common.actions.copy")),1)]),_:1},8,["onClick"])])]))),256))])]),_:1})]),_:1})}}}),eu=(0,g.default)(er,[["__scopeId","data-v-a6515c7a"]]);var eM=t(43416);let ed={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-16px"},en=(0,g.default)({},[["render",function(e,a){let t=eM.A;return(0,u.uX)(),(0,u.CE)("div",ed,[(0,u.bF)(t,{height:266,sharp:!1}),(0,u.bF)(t,{height:266,sharp:!1}),(0,u.bF)(t,{height:266,sharp:!1}),(0,u.bF)(t,{height:266,sharp:!1}),(0,u.bF)(t,{height:266,sharp:!1})])}]]),eo={class:"p-24px"},ec={class:"bt-title"},em={class:"flex gap-12px mb-16px"},eN={class:"mr-4px"},ep={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-16px"},ey={key:2,class:"flex-center h-400px text-center text-desc"},eI=(0,u.pM)({__name:"index",setup(e){let{t:a}=(0,ee.s9)(),t=(0,u.KR)(!1),c=(0,u.KR)([]),m=[{label:"Gmail",key:"gmail"},{label:"Mailgun",key:"mailgun"},{label:"AWS SES",key:"aws"},{label:"SendGrid",key:"sendgrid"},{label:a("smtp.providers.custom"),key:"custom"}],N=e=>{I.setState({isEdit:!1,type:e,row:null}),I.open()},p=async()=>{try{t.value=!0;let e=await n.K.get("/relay/list");(0,M.Gv)(e)&&(c.value=(0,M.cy)(e.list)?e.list:[])}finally{t.value=!1}},[y,I]=(0,d.h)({component:ea,state:{isEdit:!1,type:"custom",refresh:p}}),g=e=>{I.setState({isEdit:!0,row:e}),I.open()},[D,j]=(0,d.h)({component:eu,state:{isEdit:!1,type:"custom",refresh:p}}),v=e=>{j.setState({smtp:e}),j.open()},L=e=>{(0,M.lJ)({title:a("smtp.delete.title"),content:a("smtp.delete.confirm",{name:e.smtp_name}),onConfirm:async()=>{let a;await (a={id:e.id},n.K.post("/relay/delete",a,{fetchOptions:{successMessage:!0,loading:o("smtp.api.loading.deleting")}})),p()}})};return p(),(e,a)=>{let M=r.Ay,d=i.A,n=s.A,o=l.A;return(0,u.uX)(),(0,u.CE)("div",eo,[(0,u.Lk)("div",ec,(0,u.v_)(e.$t("smtp.title")),1),(0,u.Lk)("div",em,[(0,u.bF)(d,{placement:"bottom-start",trigger:"hover",size:"large",options:m,onSelect:N},{default:(0,u.k6)(()=>[(0,u.bF)(M,{type:"primary"},{default:(0,u.k6)(()=>[(0,u.Lk)("span",eN,(0,u.v_)(e.$t("common.actions.add")),1),a[0]||(a[0]=(0,u.Lk)("i",{class:"i-mdi-chevron-down text-17px"},null,-1))]),_:1})]),_:1}),(0,u.bF)(n,{href:"https://www.billionmail.com/start/smtp.html",text:e.$t("smtp.description")},null,8,["text"])]),(0,u.R1)(t)?((0,u.uX)(),(0,u.Wv)(en,{key:0})):(0,u.R1)(c).length>0?((0,u.uX)(),(0,u.CE)("div",ep,[((0,u.uX)(!0),(0,u.CE)(u.FK,null,(0,u.pI)((0,u.R1)(c),e=>((0,u.uX)(),(0,u.Wv)(B,{key:e.id,service:e,onEdit:g,onDelete:L,onShowDns:v},null,8,["service"]))),128))])):((0,u.uX)(),(0,u.CE)("div",ey,[(0,u.bF)(o)])),(0,u.bF)((0,u.R1)(y)),(0,u.bF)((0,u.R1)(D))])}}})}}]);